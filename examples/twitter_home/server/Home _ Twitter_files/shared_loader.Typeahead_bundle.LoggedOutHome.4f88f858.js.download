(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4ZbN":function(e,t,a){"use strict";t.a={deleteRecentSearchesDialog:"deleteRecentSearchesDialog",deleteSavedSearchDialog:"deleteSavedSearchDialog",typeaheadEmptySearch:"typeaheadEmptySearch",typeaheadRecentSearchesHeader:"typeaheadRecentSearchesHeader",typeaheadRecentSearchesItem:"typeaheadRecentSearchesItem",typeaheadSavedSearchesContainer:"typeaheadSavedSearchesContainer",typeaheadSavedSearchesHeader:"typeaheadSavedSearchesHeader",typeaheadSavedSearchesItem:"typeaheadSavedSearchesItem"}},"72nz":function(e,t,a){"use strict";a.r(t),a.d(t,"SearchBoxContainer",(function(){return $e}));var s=a("97Jx"),r=a.n(s),c=(a("MvUL"),a("ERkP")),n=a.n(c),i=a("MWbm"),o=a("rHpw"),l=a("qqsb"),h=a.n(l),d=a("Hw0q"),u=a("v6aA"),p=a("+Kfv"),m=a("8jkQ"),S=a("Rp9C"),y=a("3IPs"),b=a("GZwR"),_=a("u3ZE"),f=a("TnY3"),v=a("rRIm"),g=a("4e/K"),E=(a("kYxP"),a("7nmT")),I=a.n(E),C=a("t62R"),w=a("/yvb"),R=a("eb3s"),x=a("lnti"),k=a("v//M"),T=a("MXDK"),D=a("htQn"),O=a("IMA+"),U=a("hOZg"),A=a("rxPX"),L=a("M0jS"),F=a("G6rE");const H=(e,t)=>F.e.select(e,t.id),q=(e,t)=>Object(L.c)(e,t.id);var j=Object(A.a)().propsFromState((()=>({user:H,userSpace:q})));const P=n.a.createElement(U.a,null),N=h.a.e68b09b4,M=h.a.fd06b02f;class B extends n.a.Component{constructor(...e){super(...e),this._handleAvatarClick=()=>{const{userSpace:e}=this.props;e||this._handleClick()},this._handleClick=()=>{const{index:e,onItemClick:t}=this.props,a=this.searchItemData;a&&t(a,e)}}render(){const{onRemove:e,style:t,user:a,userSpace:s,withNewTypeaheadUI:r}=this.props,{featureSwitches:c}=this.context;if(!a)return null;const i=s&&c.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")?s:void 0;i&&(i.accessibilityLabel=M({screenName:a.screen_name}));const o=n.a.createElement(w.a,{accessibilityLabel:N,icon:P,onPress:e,size:"small",type:"brandText"});return n.a.createElement(O.a,{avatarSize:"xLarge",avatarUri:a.profile_image_url_https,decoration:o,displayMode:r?"ExperimentalUserTypeahead":"UserCompact",isProtected:a.protected,isVerified:a.verified,name:a.name,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:i,screenName:a.screen_name,style:t,userId:a.id_str,withInteractiveStyling:!1,withLink:!1,withUsernameCenterAligned:!0})}get searchItemData(){return this.props.user?{category:y.b.RecentSearch,link:this.props.user.screen_name,query:this.props.id,recentSearchType:y.a.User}:null}}B.contextType=u.a;var z=j.forwardRef(B),Q=a("5T6p");const V=h.a.e68b09b4;class K extends n.a.PureComponent{render(){const{id:e,onRemove:t,...a}=this.props;return e?n.a.createElement(i.a,{style:$.root},n.a.createElement(Q.a,a),n.a.createElement(w.a,{accessibilityLabel:V,icon:n.a.createElement(U.a,null),onPress:t,size:"small",style:$.button,type:"brandText"})):null}get searchItemData(){const{id:e,image:t,supportText:a,title:s}=this.props;return{category:y.b.RecentSearch,query:e,recentSearchType:y.a.Event,queryMetadata:{id:e,image:t,title:s,supportText:a}}}}const $=o.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between"},button:{alignSelf:"center"}})));var G=K,W=a("j7Bv"),Z=a("5mJL"),Y=a("EHV7");const X=n.a.createElement(U.a,null),J=h.a.e68b09b4;class ee extends n.a.Component{render(){const{description:e,id:t,name:a,onRemove:s,withNewTypeaheadUI:r}=this.props;if(!t)return null;const c=r?"xxxLarge":"xLarge",o=n.a.createElement(W.a,{Icon:Y.a,color:"primary",size:c,style:ae.searchIcon});return n.a.createElement(Z.a,{avatarCell:o,avatarSize:c,cellStyle:ae.bodyColumn},n.a.createElement(i.a,null,n.a.createElement(C.b,{numberOfLines:1,weight:"bold",withHashflags:!0},a),n.a.createElement(C.b,{color:"gray700",numberOfLines:1,withHashflags:!0},e)),n.a.createElement(w.a,{accessibilityLabel:J,icon:X,onPress:s,size:"small",type:"brandText"}))}get searchItemData(){const{description:e,id:t,name:a}=this.props;return t?{category:y.b.RecentSearch,query:t,recentSearchType:y.a.Topic,queryMetadata:{id:t,name:a,description:e}}:null}}var te=ee;const ae=o.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12}})));var se=a("hiGS"),re=a("Gfoi"),ce=a("zTrU");const ne=n.a.createElement(U.a,null),ie=n.a.createElement(se.a,null);class oe extends n.a.Component{constructor(...e){super(...e),this._getMemoizedButtonType=Object(ce.a)((e=>e===y.b.SavedSearch?"destructiveText":"brandText")),this._getMemoizedRemoveIcon=Object(ce.a)((e=>e===y.b.SavedSearch?ie:ne)),this._getButtonType=()=>{const{category:e}=this.props;return this._getMemoizedButtonType(e)},this._getRemoveIcon=()=>{const{category:e}=this.props;return this._getMemoizedRemoveIcon(e)}}render(){const{onRemove:e,query:t,withNewTypeaheadUI:a}=this.props,s=a?"xxxLarge":"xLarge",r=n.a.createElement(W.a,{Icon:re.a,color:"neutral",size:s,style:le.searchIcon});return n.a.createElement(Z.a,{avatarCell:r,avatarSize:s,cellStyle:le.bodyColumn},n.a.createElement(C.b,{numberOfLines:1,withHashflags:!0},t),n.a.createElement(w.a,{accessibilityLabel:"",icon:this._getRemoveIcon(),onPress:e,size:"small",type:this._getButtonType()}))}get searchItemData(){const{category:e,query:t}=this.props;return{category:e,query:t,recentSearchType:e===y.b.RecentSearch?y.a.Keyword:void 0}}}const le=o.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12,borderWidth:0,backgroundColor:"none"}})));var he=oe;const de={viewType:"search_result"};class ue extends n.a.Component{constructor(e,t){super(e,t),this._renderSearchItem=()=>{const{index:e,item:t,onItemClick:a}=this.props;return t.keyword?n.a.createElement(he,{category:t.category,onRemove:this._handleOnRemove,query:t.keyword.query,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.user?n.a.createElement(z,{id:t.user.id||"",index:e,onItemClick:a,onRemove:this._handleOnRemove,ref:this._handleItemRef,style:pe.itemPadding,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.topic?n.a.createElement(te,{description:t.topic.description||"",id:t.topic.id,name:t.topic.name||"",onRemove:this._handleOnRemove,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.event?n.a.createElement(G,{id:t.event.id,image:t.event.image||{url:"",height:0,width:0},onRemove:this._handleOnRemove,ref:this._handleItemRef,supportText:t.event.supportText||"",title:t.event.title||"",withNewTypeaheadUI:this._withNewTypeaheadUI}):null},this._handleItemRef=e=>{this._itemRef=e},this._handleOnRemove=e=>{const{index:t,item:a,onRemoveQuery:s}=this.props;s(a,t),e.stopPropagation()},this._handleOnClick=()=>{const{index:e,item:t,onItemClick:a}=this.props;t.user||this.searchItemData&&a(this.searchItemData,e)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}render(){const{domId:e,item:t,testID:a}=this.props;return n.a.createElement(p.a,{behavioralEventContext:de},n.a.createElement(D.a,{accessibilityRole:"option",accessibilityState:{selected:!!e},focusable:!0,nativeID:e,onClick:this._handleOnClick,style:[pe.root,e&&pe.focused,!(null!=t&&t.user)&&pe.itemPadding],testID:a},this._renderSearchItem()))}get searchItemData(){return this._itemRef?this._itemRef.searchItemData:null}}ue.contextType=u.a;const pe=o.a.create((e=>({root:{cursor:"pointer"},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.gray0}})));var me=ue,Se=a("hqKg"),ye=a("J4ZH"),be=a("k49u"),_e=a("0KEI"),fe=a("wtjx"),ve=a("v4XE"),ge=a("kGix");const Ee=e=>Object(be.c)(e,be.a.GenericUserNotFound)||Object(be.c)(e,be.a.OtherUserSuspended)||Object(be.c)(e,be.a.AddressBookLookupNotFound);var Ie=Object(A.a)().propsFromState((()=>{const e=Object(Se.createSelector)(fe.g,F.e.selectFetchStatuses,((e,t)=>{const a=Object(x.a)(e.map((e=>{var a;const s=null==(a=e.user)?void 0:a.id;return s&&t[s]?{id:s,fetchStatus:t[s]}:void 0})));return Object(ye.a)(a,(e=>e.fetchStatus))})),t=Object(Se.createSelector)(e,(e=>(e[ge.a.FAILED]||[]).map((e=>e.id)))),a=Object(Se.createSelector)(e,F.e.selectErrors,((e,t)=>(e[ge.a.FAILED]||[]).filter((({id:e})=>Ee(t[e]||{}))).map((e=>e.id)))),s=Object(Se.createSelector)(e,F.e.selectErrors,((e,t)=>{const a=(e[ge.a.FAILED]||[]).filter((({id:e})=>!Ee(t[e]||{})));return(e[ge.a.LOADING]||[]).length>0?ge.a.LOADING:(e[ge.a.LOADED]||[]).length>0?ge.a.LOADED:a.length>0?ge.a.FAILED:ge.a.NONE})),r=Object(Se.createSelector)(fe.g,(e=>e.map((e=>({...e,category:y.b.RecentSearch}))))),c=Object(Se.createSelector)(ve.d,(e=>e.map((e=>({keyword:{query:e.query},savedSearchId:e.id_str,category:y.b.SavedSearch})))));return{isRecentSearchDataLoaded:fe.e,recentSearches:r,usersFetchStatus:s,invalidRecentSearchUserIds:a,failedRecentSearchUserIds:t,savedSearches:c}})).adjustStateProps((({failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,isRecentSearchDataLoaded:a,recentSearches:s,savedSearches:r,usersFetchStatus:c})=>{const n=!s.filter((({user:e})=>e&&t.indexOf(e.id)<0)).length,i=c!==ge.a.LOADING&&a&&n?ge.a.LOADED:c;return{failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,recentSearches:s,fetchStatus:i,savedSearches:r}})).propsFromActions((()=>({clearAll:fe.b,createLocalApiErrorHandler:Object(_e.createLocalApiErrorHandlerWithContextFactory)("SEARCH_ONE_CLICK"),deleteSavedSearch:ve.a,fetchRecentSearchesIfNeeded:fe.c,fetchSavedSearchesIfNeeded:ve.b,fetchUsersIfNeeded:F.e.fetchManyIfNeeded,fetchUsersPresenceIfNeeded:L.b.fetchManyIfNeeded,removeQuery:fe.d}))).withAnalytics({element:"typeahead"}),Ce=a("sYRn"),we=a("4ZbN");const Re=h.a.ee295fbe,xe={headline:h.a.f45c4250,text:h.a.caae4dda,confirmButtonLabel:h.a.dbd5d400},ke=h.a.a8d68f62,Te=h.a.c6530778,De=h.a.e047b8fa,Oe=["user","keyword"];class Ue extends n.a.Component{constructor(e,t){super(e,t),this._getRecentSearchItems=()=>{const{failedRecentSearchUserIds:e,recentSearches:t}=this.props,{allowedRecentSearchItems:a}=this.state,s=t.filter((({user:t})=>!t||e.indexOf(t.id)<0)).filter((e=>Object.keys(e).some((e=>a.includes(e)))));return s.length>15?s.slice(0,15):s},this._render=()=>{const{domId:e,savedSearches:t}=this.props,a=0===this._getNumOfSearchItems(),s=this._getRecentSearchItems();return a?n.a.createElement(i.a,{style:Ae.emptyState,testID:we.a.typeaheadEmptySearch},n.a.createElement(C.b,{align:"center",color:"gray700"},Re)):n.a.createElement(i.a,{accessibilityRole:"listbox",nativeID:e},s.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{style:Ae.header,testID:we.a.typeaheadRecentSearchesHeader},n.a.createElement(C.b,{numberOfLines:1,size:"headline1",weight:"bold"},ke),n.a.createElement(w.a,{onPress:this._handleClearAllClick,size:"xSmall",type:"brandText"},De)),s.map(((e,t)=>this._renderRecentSearchItem(e,t)))):null,t.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{accessibilityHidden:!0,style:[Ae.header,Ae.borderTop],testID:we.a.typeaheadSavedSearchesHeader},n.a.createElement(C.b,{numberOfLines:1,size:"headline1",weight:"bold"},Te)),this._renderSavedSearches()):null)},this._renderRecentSearchItem=(e,t)=>{const{ariaDescendantId:a}=this.props,s=this.state.focusIndex===t;return n.a.createElement(me,{domId:s?a:void 0,index:t,item:e,key:this._chooseKeyType(e,t),onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:s?this._setFocusedItemRef:void 0,testID:we.a.typeaheadRecentSearchesItem})},this._chooseKeyType=(e,t)=>e.keyword?`keyword_${e.keyword.query}`:e.user?`user_${e.user.id}`:e.topic?`topic_${e.topic.id}`:e.event?`event_${e.event.id}`:`${t}`,this._renderSavedSearches=()=>{const{ariaDescendantId:e,savedSearches:t}=this.props,{focusIndex:a}=this.state,s=this._getRecentSearchItems(),r=[...t];return r.reverse(),n.a.createElement(i.a,{testID:we.a.typeaheadSavedSearchesContainer},r.map(((t,r)=>{const c=a===r+s.length;return n.a.createElement(me,{domId:c?e:void 0,index:r,item:t,key:t.savedSearchId,onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:c?this._setFocusedItemRef:void 0,testID:we.a.typeaheadSavedSearchesItem})})))},this._getNumOfSearchItems=()=>{const{savedSearches:e}=this.props,t=this._getRecentSearchItems();return e.length+t.length},this._handleUsersRetry=()=>{this._fetchUsersDetailsIfNeeded()},this._fetchUsersDetailsIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchUsersIfNeeded:t,fetchUsersPresenceIfNeeded:a,invalidRecentSearchUserIds:s,recentSearches:r}=this.props,{featureSwitches:c,loggedInUserId:n}=this.context,i=((e,t)=>e.map((e=>{var t;return null==e||null==(t=e.user)?void 0:t.id})).filter(Boolean).filter((e=>t.indexOf(e)<0)))(r,s);t(i).catch(e({})),n&&c.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")&&a(i).catch(e({}))},this._handleRemoveQuery=(e,t)=>{const{analytics:a,removeQuery:s}=this.props;switch(e.category){case y.b.RecentSearch:{const r={keyword:e.keyword,user:e.user,topic:e.topic,event:e.event};s(r),this._resetFocus();const c=S.a.forRecentSearchResult(r,t),n=this._handleRemoveAction(e);c&&a.scribe({action:n,data:{items:[c]}});break}case y.b.SavedSearch:this.setState({shouldShowDeleteSavedSearchConfirmation:!0,savedSearchIdToDelete:e.savedSearchId});break;default:return}},this._handleRemoveAction=e=>e.user?"clear_user":e.topic?"clear_topic_interests":e.event?"clear_event":"clear_topic",this._handleClearAllClick=()=>{this.setState({shouldShowClearAllConfirmationSheet:!0})},this._handleOnClearAllConfirm=()=>{const{analytics:e,clearAll:t}=this.props;t(),e.scribeAction("clear_all"),this.setState({shouldShowClearAllConfirmationSheet:!1})},this._handleOnClearAllCancel=()=>{this.setState({shouldShowClearAllConfirmationSheet:!1})},this._handleOnDeleteSavedSearchConfirm=()=>{const{analytics:e,deleteSavedSearch:t,savedSearches:a}=this.props,{savedSearchIdToDelete:s}=this.state,r=a.findIndex((e=>e.savedSearchId===s)),c=a[r];if(s){t(s);const a=c&&S.a.forSavedSearchResult(c.keyword.query,r);a&&e.scribe({element:"saved_search",action:"delete",data:{items:[a]}})}this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})},this._handleOnDeleteSavedSearchCancel=()=>{this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})},this._handleOnItemClick=(e,t)=>{const{onDismiss:a,onItemClick:s}=this.props;s(e,t),this._scribeClick(e,t),a&&a()},this._scribeRecentSearchImpression=()=>{const{analytics:e,recentSearches:t}=this.props;if(t&&t.length){const a=Object(x.a)(t.map(((e,t)=>S.a.forRecentSearchResult(e,t))));e.scribe({action:"impression",data:{items:a}})}},this._scribeSavedSearchImpression=()=>{const{analytics:e,savedSearches:t}=this.props;if(t&&t.length){const a=Object(x.a)(t.map(((e,t)=>S.a.forSavedSearchResult(e.keyword.query,t))));e.scribe({element:"saved_search",action:"impression",data:{items:a}})}},this._scribeClick=(e,t)=>{const{analytics:a}=this.props;switch(e.category){case y.b.SavedSearch:{const s=S.a.forSavedSearchResult(e.query,t);a.scribe({element:"typeahead",action:"click",data:{targets:[s]}});break}case y.b.RecentSearch:{let s;e.recentSearchType&&(s=e.recentSearchType===y.a.User?{user:{type:y.a.User,id:e.query}}:e.recentSearchType===y.a.Event&&e.queryMetadata&&e.queryMetadata.title?{event:{...e.queryMetadata,type:y.a.Event,id:e.query}}:e.recentSearchType===y.a.Topic&&e.queryMetadata&&e.queryMetadata.name?{topic:{...e.queryMetadata,type:y.a.Topic,id:e.query}}:{keyword:{type:y.a.Keyword,query:e.query}});const r=s&&S.a.forRecentSearchResult(s,t);r&&a.scribe({action:"click",data:{targets:[r]}});break}}},this._setFocusedItemRef=e=>{this._focusedItemRef=e,e&&this._shouldScrollToFocusedItem&&(Object(T.c)(this._getScrollParent(),this._getFocusedItem()),this._shouldScrollToFocusedItem=!1)},this.hasFocusedItem=()=>this._getNumOfSearchItems()>0,this.selectFocusedItem=()=>{if(this.hasFocusedItem()){const e=this._focusedItemRef&&this._focusedItemRef.searchItemData;e&&this._handleOnItemClick(e,this.state.focusIndex)}},this._setFocusIndex=(e,t)=>{const{onItemFocusChanged:a}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),a&&a()},this._resetFocus=()=>{this._setFocusIndex(-1)},this.focusNext=()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const a=e+1>=t?0:e+1;this._setFocusIndex(a,!0)},this.focusPrevious=()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const a=e-1<0?t-1:e-1;this._setFocusIndex(a,!0)};const{featureSwitches:a}=this.context;var s,r;this.state={focusIndex:0,shouldShowClearAllConfirmationSheet:!1,shouldShowDeleteSavedSearchConfirmation:!1,allowedRecentSearchItems:(s=!0===a.getValueWithoutScribeImpression("responsive_web_recent_searches_topics_enabled"),r=!0===a.getValueWithoutScribeImpression("responsive_web_recent_searches_events_enabled"),[...Oe,s?"topic":"",r?"event":""])}}componentDidMount(){const{createLocalApiErrorHandler:e,fetchRecentSearchesIfNeeded:t,fetchSavedSearchesIfNeeded:a,recentSearches:s,savedSearches:r}=this.props;t(),a().catch(e({})),this._fetchUsersDetailsIfNeeded(),this._scribeRecentSearchImpression(),this._scribeSavedSearchImpression(),(s&&s.length||r&&r.length)&&this._resetFocus()}componentDidUpdate(e){const{recentSearches:t,savedSearches:a}=this.props;e.recentSearches!==t&&(this._fetchUsersDetailsIfNeeded(),this._resetFocus(),this._scribeRecentSearchImpression()),e.savedSearches!==a&&(this._resetFocus(),this._scribeSavedSearchImpression())}render(){const{fetchStatus:e,style:t}=this.props,{shouldShowClearAllConfirmationSheet:a,shouldShowDeleteSavedSearchConfirmation:s}=this.state;return n.a.createElement(i.a,{style:t},n.a.createElement(k.a,{fetchStatus:e,onRequestRetry:this._handleUsersRetry,render:this._render}),a?n.a.createElement(R.a,{confirmButtonLabel:xe.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:xe.headline,onCancel:this._handleOnClearAllCancel,onConfirm:this._handleOnClearAllConfirm,testID:we.a.deleteRecentSearchesDialog,text:xe.text}):null,s?n.a.createElement(Ce.a,{onCancel:this._handleOnDeleteSavedSearchCancel,onConfirm:this._handleOnDeleteSavedSearchConfirm}):null)}_getScrollParent(){if(!this._scrollParent){const e=Object(T.a)(I.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}_getFocusedItem(){const e=this._focusedItemRef&&I.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}Ue.contextType=u.a;const Ae=o.a.create((e=>({emptyState:{padding:e.spaces.space12,paddingTop:e.spaces.space20},borderTop:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:1},header:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal}})));var Le=Ie.forwardRef(Ue);var Fe=Object(A.a)().propsFromActions((()=>({addQuery:fe.a}))).withAnalytics({component:"search_box"}),He=a("uIZp");const qe=(e,t)=>F.e.select(e,t.userId);const je=({user:e,userId:t})=>{const[a,s]=n.a.useState(!1),{featureSwitches:r}=n.a.useContext(u.a),c=r.isTrue("follow_nudge_search_enabled");return n.a.useEffect((()=>{c&&e&&!e.following&&s(!0)}),[e,c]),a?n.a.createElement(He.a,{isFollowNudge:!0,showRelationshipChangeConfirmation:!0,userId:t}):null};var Pe=Object(A.a)().propsFromState((()=>({user:qe})))(n.a.memo(je)),Ne="SearchBox_Search_Input";const Me=h.a.ib2e46ee,Be=h.a.hbc99b03,ze=/^(\w+)$/,Qe=[b.a.Events,b.a.Users,b.a.Topics],Ve=e=>"@"===e[0]?e.substring(1):e,Ke={viewType:"search_field"};class $e extends n.a.Component{constructor(e,t){var a;super(e,t),this._withNewTypeaheadUI=!1,this._renderSearchBoxEmptyState=e=>n.a.createElement(Le,r()({},e,{onItemClick:this._handleSearchItemClick})),this._renderSearchUserDecoration=({user:e,userId:t})=>{const{loggedInUserId:a}=this.context;return a&&t!==a?n.a.createElement(Pe,{userId:t}):null},this._handleSearchItemClick=({category:e,link:t,query:a,queryMetadata:s,recentSearchType:r})=>{const{addQuery:c}=this.props;e===y.b.SavedSearch?this._submitQuery({query:a,shouldAddToRecentSearch:!1,src:_.a.SavedSearchClick}):r===y.a.Keyword?this._submitQuery({query:a,shouldAddToRecentSearch:!0,src:_.a.RecentSearchClick}):r===y.a.Event?(this._routeTransition({pathname:`/i/events/${a}`}),s&&s.title&&c({event:{...s,id:a,type:y.a.Event}})):r===y.a.Topic?(this._routeTransition({pathname:`/i/topics/${a}`}),s&&s.name&&c({topic:{...s,id:a,type:y.a.Topic}})):t&&(this._routeTransition({pathname:`/${t}`,userId:a}),c({user:{id:a,type:y.a.User}}))},this._handleSearchShortcut=e=>{const t=this._inputRef;t&&(e&&t.setQuery(e),t.focus())},this._getUserExactMatch=({hasResults:e,isLoaded:t,query:a})=>{const s=Ve(a);if(s.match(ze))return{id:`${a}_no_result_user`,type:b.b.NoResult,data:{text:Be({screenName:s}),type:"user"}}},this._handleOnDismiss=()=>{const{history:e}=this.props,{location:t}=e,a=t.state||{};if(a.searchFocused){const s={...t,state:{...a,lockScroll:!1,searchFocused:!1}};e.replace(s)}},this._handleOnFocus=()=>{const{analytics:e,history:t}=this.props,{location:a}=t,s=a.state||{};if(!s.searchFocused){const r={...a,state:{...s,searchFocused:!0,lockScroll:!0}};e.scribe({action:"focus_field"}),t.push(r)}},this._handleChange=e=>{this.setState({query:e})},this._handleTypeaheadSubmit=()=>{const{items:e,query:t}=this.state,{analytics:a}=this.props;/^\s*$/.test(t)||(a.scribe({action:"search",data:{items:S.a.forTypeaheadResults(e),search_details:{query:t}}}),this._submitQuery({query:t,shouldAddToRecentSearch:!0}))},this._handleItemClick=(e,t)=>{const{addQuery:a}=this.props,{query:s}=this.state;switch(e.type){case b.b.User:if(e.data.id_str){a({user:{id:e.data.id_str,type:y.a.User}})}this._routeTransition({pathname:`/${e.data.screen_name}`,userId:e.data.id_str});break;case b.b.Topic:case b.b.Hashtag:this._submitQuery({query:e.data.topic,shouldAddToRecentSearch:!0,src:_.a.TypeaheadClick});break;case b.b.Event:e.data&&e.data.url?this._routeTransition({pathname:m.c.parseInternalUrl(e.data.url)}):this._submitQuery({query:e.data.topic,src:_.a.TypeaheadClick});break;case b.b.NoResult:{const{type:t}=e.data;"user"===t?this._routeTransition({pathname:`/${Ve(s)}`}):"topic"===t&&this._submitQuery({query:s,shouldAddToRecentSearch:!0,src:_.a.TypeaheadClick});break}}},this._handleItemsChanged=e=>{this.setState({items:e})},this._routeTransition=({params:e,pathname:t,query:a,src:s,userId:r})=>{const{history:c,location:n}=this.props,i={...n,pathname:t,search:"",query:e||(a?{q:a,src:s}:{}),state:{...n.state,searchFocused:!1,lockScroll:!1,...r?{userId:r}:{}}};c.replace(i)},this._submitQuery=({query:e,shouldAddToRecentSearch:t=!1,src:a=_.a.Typed})=>{const{addQuery:s,mode:r,onSubmit:c,searchFilters:n,searchRoute:i}=this.props;if(c&&c(e,a,this.state.lastSubmittedQuery===e),t){s({keyword:{query:e,type:y.a.Keyword}})}const o=Object(y.g)({query:e,querySrc:a,mode:r,searchFilters:n});this._routeTransition({pathname:i,params:o,src:a}),this.setState({lastSubmittedQuery:e})},this._setInputRef=e=>{this._inputRef=e},this.state={query:e.initialValue,items:[],lastSubmittedQuery:Object(d.a)(null==(a=e.location.query)?void 0:a.q)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{shouldHandleSearchShortcut:e}=this.props;e&&(this._unregisterSearchShortcutHandler=Object(v.b)(this._handleSearchShortcut))}componentWillUnmount(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}render(){const{forceVdlDisable:e,isCompact:t,isInSidebar:a,isOnHomepage:s,location:r,placeholder:c}=this.props,{query:o}=this.state,{searchPrefill:l}=r.state||{},h=this.props.initialValue||l,d=!!r.state&&!!r.state.searchFocused;return n.a.createElement(p.a,{behavioralEventContext:Ke},n.a.createElement(i.a,{style:Ge.root},n.a.createElement(g.default,{filter:Qe,forceVdlDisable:e,getTopicExactMatch:o?b.f:void 0,getUserExactMatch:o?this._getUserExactMatch:void 0,initialValue:h,inputStyle:Ge.input,isCompact:t,isInSidebar:a,isOnHomepage:s,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onItemsChanged:this._handleItemsChanged,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,placeholder:c,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,renderUserDecoration:this._renderSearchUserDecoration,rounded:!0,shouldAutoFocus:d,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:b.d.SearchBox,testID:Ne,withFixedPositioning:!0,withFocusStyling:!0,withSectionDivider:!this._withNewTypeaheadUI})))}}$e.defaultProps={initialValue:"",isInSidebar:!1,placeholder:Me,searchRoute:"/search",forceVdlDisable:!0},$e.contextType=u.a;const Ge=o.a.create((e=>({root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}})));t.default=Object(f.a)(Fe($e))},FITr:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("k/Ka"),n=a("Lsrn");const i=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20.235 14.61c-.375-1.745-2.342-3.506-4.01-4.125l-.544-4.948 1.495-2.242c.157-.236.172-.538.037-.787-.134-.25-.392-.403-.675-.403h-9.14c-.284 0-.542.154-.676.403-.134.25-.12.553.038.788l1.498 2.247-.484 4.943c-1.668.62-3.633 2.38-4.004 4.116-.04.16-.016.404.132.594.103.132.304.29.68.29H8.64l2.904 6.712c.078.184.26.302.458.302s.38-.118.46-.302l2.903-6.713h4.057c.376 0 .576-.156.68-.286.146-.188.172-.434.135-.59z"})));i.metadata={width:24,height:24},t.a=i},Nqmc:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("MWbm"),n=a("t62R"),i=a("5mJL"),o=a("SV7d"),l=a("nBUg"),h=a("rHpw"),d=a("XIXT"),u=a("yDX5"),p=a("qjak"),m=a("dC06");const S={viewType:"social_context"};class y extends r.a.PureComponent{render(){const{avatarSize:e,bottomControl:t,iconStyle:a,nativeID:s,onLayout:h,rightControl:d,style:u,testID:m,textColor:y,textSize:_,topControl:f,weight:v,withBottomBorder:g,withLeftPadding:E,withTextCentered:I,...C}=this.props,{Icon:w,accessibilityLabel:R,link:x,text:k}=Object(p.a)(C),T=r.a.createElement(n.b,{accessibilityLabel:R,color:y,nativeID:s,numberOfLines:2,size:_,testID:m,weight:v},k),{cellStyle:D,viewStyle:O}=this._getStyles();return k?r.a.createElement(l.b.UseProps,null,(s=>r.a.createElement(o.a,{behavioralEventContext:S},r.a.createElement(r.a.Fragment,null,f||null,r.a.createElement(c.a,{onLayout:h,style:[u,O,s.socialContextRefreshEnabled()&&!E&&b.socialContextRefresh]},r.a.createElement(i.a,{avatarCell:w||(E?null:void 0),avatarCellStyle:[a,b.socialContextIconColumn,!E&&b.unsetIconWidth,s.socialContextRefreshEnabled()&&!E&&b.socialContextRefreshIcon],avatarSize:e,cellStyle:D},r.a.createElement(c.a,{style:b.cellWrapper},r.a.createElement(c.a,{style:[b.socialContextTextColumn,s.socialContextRefreshEnabled()&&!E&&b.socialContextRefreshTextColumn]},x?this._renderLink(x,T):T),d||null)),t||null))))):null}_renderLink(e,t){const{contextType:a,nativeID:s,onClick:c,retweetData:i,textColor:o,topicData:l}=this.props,{screenName:h}=i||{},p=r.a.createElement(n.b,{color:o,link:e,nativeID:s,onClick:c},t);return a===m.a.Topic&&l?r.a.createElement(d.a,{topicId:l.topicId},p):a===m.a.Retweet&&h?r.a.createElement(u.a,{screenName:h},p):p}_getStyles(){const{bottomControl:e,contextType:t,withBottomBorder:a,withTextCentered:s}=this.props,r=t===m.a.TextOnly,c=a?[b.bottomBorderMargin,!!e&&b.bottomBorder]:[],n=a&&!e?[b.bottomBorder]:[];return r&&n.push(b.topicContext),s&&n.push(b.socialContextTextCentered),{viewStyle:c,cellStyle:n}}}y.defaultProps={iconSize:"small",textColor:"gray700",textSize:"subtext2",withBottomBorder:!1,withLeftPadding:!0,withTextCentered:!1};const b=h.a.create((e=>({socialContextIconColumn:{alignItems:"flex-end",justifyContent:"center"},bottomBorderMargin:{marginBottom:e.componentDimensions.gutterVertical},cellWrapper:{flexDirection:"row"},bottomBorder:{paddingBottom:e.spaces.space4,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},topicContext:{paddingBottom:`calc(${e.spaces.space4} + ${e.spaces.space2})`},socialContextTextColumn:{alignItems:"flex-start",flexShrink:1,justifyContent:"center"},unsetIconWidth:{flexBasis:"unset"},socialContextRefreshIcon:{marginRight:e.spaces.space8},socialContextRefresh:{marginBottom:e.spaces.space8},socialContextRefreshTextColumn:{minHeight:e.spaces.space32},socialContextTextCentered:{justifyContent:"center"}})));t.a=y},aPcQ:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("k/Ka"),n=a("Lsrn");const i=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20 16H5.81l2.72-2.72c.294-.293.294-.768 0-1.06s-.767-.294-1.06 0l-4 4c-.293.292-.293.767 0 1.06l4 4c.146.147.338.22.53.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06L5.81 17.5H20c.414 0 .75-.337.75-.75S20.414 16 20 16zm.53-9.28l-4-4c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l2.72 2.72H4c-.414 0-.75.337-.75.75S3.586 8 4 8h14.19l-2.72 2.72c-.294.293-.294.768 0 1.06.146.147.338.22.53.22s.384-.073.53-.22l4-4c.293-.293.293-.767 0-1.06z"})));i.metadata={width:24,height:24},t.a=i},qjak:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("shC7"),n=a("qqsb"),i=a.n(n),o=a("FITr"),l=a("yVEN"),h=a("uCrx"),d=a("6ZHn"),u=a("GcQN"),p=a("x0mb"),m=a("Hp3u"),S=a("k/Ka"),y=a("Lsrn");const b=(e={})=>Object(S.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[y.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M19.75 2H4.25C3.01 2 2 3.01 2 4.25v13.003c0 1.24 1.01 2.25 2.25 2.25h4.56l2.59 3.45c.142.19.364.3.6.3.235 0 .457-.11.598-.3l2.588-3.45h4.563c1.24 0 2.25-1.01 2.25-2.25V4.25C22 3.01 20.99 2 19.75 2zM6.963 12.375c-.76 0-1.375-.616-1.375-1.375s.616-1.375 1.375-1.375S8.338 10.24 8.338 11s-.616 1.375-1.375 1.375zm4.85 0c-.76 0-1.375-.616-1.375-1.375s.616-1.375 1.375-1.375 1.375.616 1.375 1.375-.616 1.375-1.375 1.375zm4.85 0c-.76 0-1.375-.616-1.375-1.375s.616-1.375 1.375-1.375c.76 0 1.375.616 1.375 1.375s-.616 1.375-1.375 1.375z"})));b.metadata={width:24,height:24};var _=b,f=a("EHV7"),v=a("wpLu"),g=a("EfHu"),E=a("cOhU"),I=a("cap5"),C=a("r9x5");const w=(e={})=>Object(S.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[y.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm3.75 12.257c-.038 0-.074-.003-.11-.008l-3.667-.54s-.28-.048-.292-.053c-.343-.07-.602-.372-.602-.735V6.417c0-.414.336-.75.75-.75s.75.336.75.75v5.115l3.28.483c.41.06.692.44.632.852-.055.372-.375.64-.74.64z"})));w.metadata={width:24,height:24};var R=w,x=a("0qK0"),k=a("aPcQ");const T=(e={})=>Object(S.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[y.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M8.417 11.816c1.355 0 2.872-.15 3.84-1.256.813-.93 1.077-2.367.806-4.392-.38-2.826-2.116-4.513-4.645-4.513-2.53 0-4.267 1.687-4.646 4.513-.273 2.025-.01 3.462.805 4.393.968 1.108 2.485 1.257 3.84 1.257zm8.28 7.42c-.88-3.526-4.283-5.99-8.28-5.99-3.998 0-7.403 2.464-8.28 5.99-.172.692-.03 1.4.395 1.94.408.52 1.04.82 1.733.82H14.57c.69 0 1.323-.3 1.73-.82.425-.54.568-1.246.396-1.94zM23.24 3.47h-5.624l1.64-1.642c.315-.316.315-.827 0-1.143-.316-.315-.826-.316-1.143 0l-2.96 2.96c-.16.16-.238.366-.238.572 0 .207.08.414.237.57l2.96 2.962c.16.156.365.234.572.234s.413-.08.57-.236c.316-.316.316-.828 0-1.144l-1.64-1.64h5.623c.414 0 .75-.336.75-.75s-.334-.747-.748-.747z"})));T.metadata={width:24,height:24};var D=T,O=a("lUZE"),U=a("t62R"),A=a("MAI/"),L=a("rHpw"),F=a("dC06");const H=i.a.jb767df8,q=i.a.bb3323fa,j=i.a.habf9678,P=i.a.db0798ed,N=i.a.dc716ec9,M=e=>r.a.createElement(U.b,{dir:c.a.getConstants().isRTL?"rtl":"ltr",withHashflags:!0},e),B=(e,t)=>t?H:(e=>{const t=M(e);return r.a.createElement(i.a.I18NFormatMessage,{$i18n:"h99e9c95"},t)})(e),z=L.a.create((e=>({small:{height:e.lineHeights.subtext3,width:e.lineHeights.subtext3},large:{height:e.lineHeights.subtext1,width:e.lineHeights.subtext1},xLarge:{height:e.lineHeights.headline1,width:e.lineHeights.headline1}}))),Q=L.a.create((e=>({circle:{color:e.colors.primary,width:"0.5em"},colorDeepGray:{color:e.colors.gray700},colorBlue:{color:e.colors.blue500},colorGreen:{color:e.colors.green500},colorOrange:{color:e.colors.orange500},colorPrimary:{color:e.colors.primary},colorRed:{color:e.colors.magenta500},grayscaleImage:{borderRadius:e.borderRadii.infinite,filter:"grayscale(100%)"},brandColor:{color:e.colors.brandColor}})));t.a=({contextType:e,iconColor:t,iconSize:a,link:s,retweetData:c,text:n,topicData:i,userAvatarUrls:S})=>{const{isSelfRetweet:y,name:b,screenName:w}=c||{},T=((e,t,a,s=[])=>{const c=z[t],n=[a?{color:L.a.theme.colors[a]}:Q.colorDeepGray,c],i=r.a.createElement(o.a,{style:n}),S=r.a.createElement(l.a,{style:n}),y=r.a.createElement(h.a,{style:n}),b=r.a.createElement(d.a,{style:n}),w=r.a.createElement(u.a,{style:n}),T=r.a.createElement(p.a,{style:Q.circle}),U=r.a.createElement(m.a,{style:n}),H=r.a.createElement(_,{style:n}),q=r.a.createElement(f.a,{style:n}),j=r.a.createElement(v.a,{style:n}),P=r.a.createElement(g.a,{style:n}),N=r.a.createElement(E.a,{style:n}),M=r.a.createElement(I.a,{style:n}),B=r.a.createElement(C.a,{style:n}),V=r.a.createElement(R,{style:n}),K=r.a.createElement(x.a,{style:n}),$=r.a.createElement(k.a,{style:n}),G=r.a.createElement(D,{style:n}),W=r.a.createElement(A.a,{borderColor:"cellBackground",userAvatarSize:t,userAvatarUrls:s}),Z=r.a.createElement(O.a,{style:n});switch(e){case F.a.Pin:case F.a.ReplyPin:return i;case F.a.Retweet:return S;case F.a.Like:return y;case F.a.Follow:return b;case F.a.Moment:return w;case F.a.NewTweets:return T;case F.a.Reply:case F.a.Conversation:return U;case F.a.Feedback:return H;case F.a.Topic:return q;case F.a.List:return j;case F.a.Location:return P;case F.a.Community:return N;case F.a.Spaces:return M;case F.a.Sparkle:return B;case F.a.SmartBlockExpiration:return V;case F.a.SocialProof:case F.a.FollowFollowed:return G;case F.a.FollowMutual:return $;case F.a.FollowFollowing:return K;case F.a.Facepile:return W;case F.a.Bird:return Z;case F.a.TextOnly:default:return null}})(e,a,t,S);switch(e){case F.a.Retweet:return{Icon:T,text:n||B(b,y),link:w?`https://twitter.com/${w}`:void 0};case F.a.Pin:return{Icon:T,text:n||q};case F.a.ReplyPin:return{Icon:T,text:n||j};case F.a.Topic:return{Icon:T,accessibilityLabel:"Recommendation"===(null==i?void 0:i.functionalityType)||"RecWithEducation"===(null==i?void 0:i.functionalityType)?N({topicName:n}):P({topicName:n}),text:n?M(n):null,link:s};default:return{Icon:T,text:n?M(n):null,link:s}}}},r9x5:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("k/Ka"),n=a("Lsrn");const i=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M22.772 10.506l-5.618-2.192-2.16-6.5c-.102-.307-.39-.514-.712-.514s-.61.207-.712.513l-2.16 6.5-5.62 2.192c-.287.112-.477.39-.477.7s.19.585.478.698l5.62 2.192 2.16 6.5c.102.306.39.513.712.513s.61-.207.712-.513l2.16-6.5 5.62-2.192c.287-.112.477-.39.477-.7s-.19-.585-.478-.697zM7.413 4.562c0-.414-.336-.75-.75-.75h-1.88V2.05c0-.414-.337-.75-.75-.75s-.75.336-.75.75v1.762H1.5c-.414 0-.75.336-.75.75s.336.75.75.75h1.782v1.762c0 .414.336.75.75.75s.75-.336.75-.75V5.312h1.88c.415 0 .75-.336.75-.75zm1.785 14.872h-1.1v-1.016c0-.414-.335-.75-.75-.75s-.75.336-.75.75v1.016H5.57c-.414 0-.75.336-.75.75s.336.75.75.75H6.6v1.016c0 .414.335.75.75.75s.75-.336.75-.75v-1.016h1.098c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"})));i.metadata={width:24,height:24},t.a=i},rRIm:function(e,t,a){"use strict";a.d(t,"b",(function(){return T}));a("kYxP");var s=a("ERkP"),r=a.n(s),c=a("6/RC"),n=a("MWbm"),i=a("rHpw"),o=a("t62R"),l=a("qqsb"),h=a.n(l),d=a("uScj"),u=a("fs1G"),p=a("BcsE"),m=a("VPAj"),S=a("aITJ"),y=a("v6aA"),b=a("sTyV"),_=a("sebV"),f=a("QK5w"),v=a("OrGc"),g=a("TnY3"),E=a("rxPX"),I=a("G6rE"),C=Object(E.a)().propsFromState((()=>({loggedInUser:I.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({loggedInUserScreenName:e?e.screen_name:void 0})));const w=h.a.b47e760e,R=h.a.fd2c7b44,x=new d.a,k=e=>{if(e.target instanceof HTMLInputElement){const t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},T=e=>{if(!c.canUseDOM)return u.a;return x.subscribe(e).unsubscribe};class D extends r.a.Component{constructor(...e){super(...e),this._bindKeyboardShortcuts=()=>{const{history:e,loggedInUserScreenName:t}=this.props,a=t=>a=>{a.preventDefault(),x.getListeners().length?x.notify(t):e.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:t}})},s={[v.e.search]:a(),[v.e.goToUser]:a("@"),[v.e.openKeyboardShortcuts]:()=>e.push("/i/keyboard_shortcuts"),[v.e.goExplore]:()=>e.push("/explore"),[v.e.goSettings]:()=>e.push("/settings")},r=t=>({[v.e.goProfile]:()=>e.push(`/${t}`),[v.e.goLikes]:()=>e.push(`/${t}/likes`),[v.e.goLists]:()=>e.push(`/${t}/lists`)}),c=this.context.userClaims.isTrueAndEnabled("subscriptions_feature_1007"),n=t&&c?{...r(t),[v.e.goTopArticles]:()=>e.push("/i/articles")}:t?r(t):{},i={...s,...n,[v.e.goHome]:()=>e.push("/home"),[v.e.goDisplay]:()=>e.push("/i/display"),[v.e.goNotifications]:()=>e.push("/notifications"),[v.e.goMentions]:()=>e.push("/notifications/mentions"),[v.e.goMessages]:()=>e.push("/messages"),[v.e.newMessage]:()=>e.push("/messages/compose"),[v.e.newTweet]:()=>e.push("/compose/tweet"),[v.e.goMomentMaker]:()=>e.push("/i/moment_maker"),[v.e.goBookmarks]:()=>e.push("/i/bookmarks")},o=this.props.loggedInUserScreenName?i:s;this._unbindKeyboardShortcuts=Object(b.a)(o)},this._handleKeyDown=e=>{k(e)||"Backspace"!==e.key||(this._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())},this._handleKeyUp=e=>{if(!k(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();const t=this._backspaceDown,a=!!Object(p.a)(t)&&Date.now()-t<500,s=Object(f.a)({},{location:this.props.location});a&&s?this.props.history.goBack():window.close()}}}componentDidMount(){this._bindKeyboardShortcuts(),S.b.isKaiOS()&&_.a.isStandaloneApp()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}componentWillUnmount(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),S.b.isKaiOS()&&_.a.isStandaloneApp()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}render(){return this.props.loggedInUserScreenName?r.a.createElement(n.a,{accessibilityLevel:2,accessibilityRole:"heading",style:i.a.visuallyHidden},r.a.createElement(o.b,null,w),r.a.createElement(o.b,{focusable:!1,link:"/i/keyboard_shortcuts"},R)):null}}D.contextType=y.a;const O=C(D),U=c.canUseDOM?Object(g.a)(O):Object(m.a)(null);t.a=U},sYRn:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("eb3s"),n=a("qqsb"),i=a.n(n),o=a("4ZbN");const l=i.a.hffea05c,h=i.a.j037e374,d=i.a.d96cf7ce;t.a=({onCancel:e,onConfirm:t})=>r.a.createElement(c.a,{confirmButtonLabel:d,confirmButtonType:"destructiveFilled",headline:l,onCancel:e,onConfirm:t,testID:o.a.deleteSavedSearchDialog,text:h})},u3ZE:function(e,t,a){"use strict";t.a={AdvancedSearchPage:"advanced_search_page",CashtagClick:"cashtag_click",HashtagClick:"hashtag_click",PromotedTrendClick:"promoted_trend_click",RecentSearchClick:"recent_search_click",SavedSearchClick:"saved_search_click",RelatedQueryClick:"related_query_click",SpellingCorrectionClick:"spelling_correction_click",SpellingCorrectionRevertClick:"spelling_suggestion_revert_click",SpellingExpansionClick:"spelling_expansion_click",SpellingExpansionRevertClick:"spelling_expansion_revert_click",SpellingSuggestionClick:"spelling_suggestion_click",TrendClick:"trend_click",TrendView:"trend_view",TypeaheadClick:"typeahead_click",Typed:"typed_query",TweetDetailQuoteTweet:"tdqt"}},v4XE:function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return S})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return b}));a("kYxP");var s=a("SrIh"),r=a("Ssj5"),c=a("oEOe"),n=a("kGix"),i=a("RqPI");const o="savedSearches",l={fetchStatus:n.a.NONE,savedSearches:[]},h=Object.freeze({REQUEST:"rweb/savedSearches/FETCH_SAVED_SEARCHES_REQUEST",SUCCESS:"rweb/savedSearches/FETCH_SAVED_SEARCHES_SUCCESS",FAILURE:"rweb/savedSearches/FETCH_SAVED_SEARCHES_FAILURE"}),d=Object.freeze({REQUEST:"rweb/savedSearches/SAVE_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/SAVE_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/SAVE_SEARCH_FAILURE"}),u=Object.freeze({REQUEST:"rweb/savedSearches/DELETE_SAVED_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/DELETE_SAVED_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/DELETE_SAVED_SEARCH_FAILURE"});function p(e=l,t){switch(t.type){case h.SUCCESS:{const a=t.payload,r=Array.isArray(a);return r||Object(s.a)("Saved search results are not type array",{extra:{savedSearchResultsType:typeof a}}),{...e,fetchStatus:n.a.LOADED,savedSearches:r&&a?a:[]}}case h.FAILURE:return{...e,fetchStatus:n.a.FAILED};case d.SUCCESS:return{...e,savedSearches:t.payload?[...e.savedSearches,t.payload]:e.savedSearches};case u.SUCCESS:return t.payload?{...e,savedSearches:e.savedSearches.filter((e=>e.id_str!==t.payload.id_str))}:e;default:return e}}r.a.register({[o]:p});const m=e=>e.savedSearches.savedSearches,S=e=>(t,a,{api:s})=>Object(c.b)(t,{request:s.SavedSearches.create,params:{query:e}})({actionTypes:d,context:"SAVE_SEARCH"}),y=e=>(t,a,{api:s})=>Object(c.b)(t,{request:s.SavedSearches.destroy,params:{id:e}})({actionTypes:u,context:"DELETE_SAVED_SEARCH"}),b=()=>(e,t,{api:a})=>{const s=t();if(!Object(i.o)(s))return Promise.resolve();return(e=>e.savedSearches.fetchStatus)(s)===n.a.LOADED?Promise.resolve():e(((e,t,{api:a})=>Object(c.b)(e,{request:a.SavedSearches.fetch,params:{}})({actionTypes:h,context:"FETCH_SAVED_SEARCHES"})))}},wtjx:function(e,t,a){"use strict";a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return y})),a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return v})),a.d(t,"c",(function(){return g}));var s=a("Ssj5"),r=a("RqPI");const c="recentSearches",n="rweb.recentSearches",i=e=>(t,a,{userPersistence:s})=>s.set(n,{recentSearches:e}).catch((()=>{Promise.resolve()})),o=(e,t)=>{let a=[];if(e&&e.user){const s=e.user;a=t.filter((e=>e.keyword||e.topic||e.event||e.user&&e.user.id!==s.id))}else if(e&&e.topic){const s=e.topic;a=t.filter((e=>e.keyword||e.user||e.event||e.topic&&e.topic.id!==s.id))}else if(e&&e.event){const s=e.event;a=t.filter((e=>e.keyword||e.user||e.topic||e.event&&e.event.id!==s.id))}else if(e&&e.keyword){const s=e.keyword;a=t.filter((e=>e.keyword&&e.keyword.query!==s.query||e.user||e.topic||e.event))}return a},l={fetched:!1,recentSearches:[]};const h=e=>e.recentSearches.recentSearches,d=e=>h(e)[0]||null,u=e=>e.recentSearches.fetched,p="rweb/recentSearches/INIT_FROM_CACHE",m=e=>({type:p,payload:e}),S="rweb/recentSearches/REMOVE_QUERY",y=e=>(t,a,{userPersistence:s})=>{t({payload:e,type:S});const c=a().recentSearches;return Object(r.o)(a())?t(i(c.recentSearches)):Promise.resolve()},b="rweb/recentSearches/CLEAR_ALL",_=()=>(e,t,{userPersistence:a})=>{e({type:b});const s=t().recentSearches;return Object(r.o)(t())?e(i(s.recentSearches)):Promise.resolve()},f="rweb/recentSearches/ADD_QUERY",v=e=>(t,a,{userPersistence:s})=>{t({payload:e,type:f});const c=a().recentSearches;return Object(r.o)(a())?t(i(c.recentSearches)):Promise.resolve()},g=()=>(e,t,{userPersistence:a})=>t().recentSearches.fetched?Promise.resolve():e(((e,t,{userPersistence:a})=>{const s=t();return Object(r.o)(s)?a.get(n).then((t=>{e(m(t))})).catch((()=>{e(m())})):(e(m()),Promise.resolve())}));s.a.register({[c]:function(e=l,t){switch(t.type){case f:{const a=t.payload,s=a?o(a,e.recentSearches):[];return s.length>49&&s.splice(49,1),a&&s.unshift(a),{...e,recentSearches:s}}case S:{const a=t.payload,s=a?o(a,e.recentSearches):[];return{...e,recentSearches:s}}case b:return{fetched:!0,recentSearches:[]};case p:return{...e,...t.payload,fetched:!0};default:return e}}})},x0mb:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),c=a("k/Ka"),n=a("Lsrn");const i=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75z"})));i.metadata={width:24,height:24},t.a=i}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.LoggedOutHome.4f88f858.js.map