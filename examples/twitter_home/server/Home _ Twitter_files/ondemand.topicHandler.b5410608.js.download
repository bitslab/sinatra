(window.webpackJsonp=window.webpackJsonp||[]).push([[376],{E3Hq:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a}));var o=n("Rp9C"),r=n("XcJG");const c=({feedbackItems:e,topic:t,topicItemContent:n})=>{const o=n.topicFunctionalityType===r.b.Recommendation,c=1===(null==e?void 0:e.length)?e[0].onClick:void 0;return!(null!=t&&t.not_interested)&&!(null!=t&&t.following)&&o?c:void 0},a=e=>o.a.forTopic(e.content.topicId,e.itemMetadata.clientEventInfo)},UnyZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},YMZp:function(e,t,n){"use strict";n.r(t);var o=n("VPAj"),r=n("ezF+"),c=n("ERkP"),a=n.n(c),i=n("fRsM"),s=n("XcJG"),l=n("Irs7"),d=n("E3Hq"),p=n("rxPX"),u=n("wtjx"),m=n("Zejx");const h=(e,t)=>m.a.select(e,t.entry.content.topicId);const b=e=>{const t=Object(l.b)(),{entry:{content:n},feedbackItems:o,saveAsRecentSearch:r,shouldStoreTypeaheadItem:c,topic:p}=e;if(a.a.useEffect((()=>{p&&t.scribeAction("impression")}),[]),!p)return null;const u=Object(d.a)({feedbackItems:o,topic:p,topicItemContent:n}),m=n.topicDisplayType===s.a.Basic;return a.a.createElement(i.a,{notInterestedOnClick:u,saveAsRecentSearch:r,shouldStoreTypeaheadItem:c,topic:p,withIcon:m})};var f=Object(p.a)().propsFromState((()=>({topic:h}))).propsFromActions((()=>({saveAsRecentSearch:u.a})))(a.a.memo(b));t.default=e=>r.b({component:f,isFocusable:Object(o.a)(!0),getScribeDataItem:d.b,shouldDisplayBorder:Object(o.a)(!1)}).getHandler((()=>({...e})))},"aV/s":function(e,t,n){"use strict";n("kYxP");var o=n("ERkP"),r=n.n(o),c=n("MWbm"),a=n("qqsb"),i=n.n(a),s=n("hOZg"),l=n("iY63"),d=n("IMYl"),p=n("t62R"),u=n("I4+6"),m=n("cm6r"),h=n("rHpw"),b=n("UnyZ");const f={active:i.a.e557ad8e,expand:i.a.e3a58c28,remove:i.a.h517e8d8};class y extends r.a.PureComponent{constructor(...e){super(...e),this._handleSecondaryClick=()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}}render(){const{accessibilityLabel:e,avatar:t,compact:n,disabled:o,link:a,mode:i,onClick:s,secondaryAction:l,selected:d,style:b,text:y}=this.props,g=this._renderIcon(!0,i),v=l&&this._renderIcon(!1,l.mode),w=[I.root,n&&I.compact,o&&I.disabled,d&&I.selected,b],k=[I.content,!!g&&I.withIcon,!!t&&(n&&I.withAvatarImageCompact||I.withAvatarImage)],S=u.a.generate({backgroundColor:d?h.a.theme.colors.primary:"transparent",color:d?h.a.theme.colors.white:h.a.theme.colors.primary});return r.a.createElement(c.a,{style:w},r.a.createElement(m.a,{accessibilityLabel:e||(i?f[i]:""),disabled:o,interactiveStyles:S,link:a,onPress:s,style:k},this._renderAvatar(),r.a.createElement(p.b,{color:d?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:I.text,weight:"bold"},y),g),l?r.a.createElement(m.a,{accessibilityLabel:l.accessibilityLabel||(l.mode?f[l.mode]:""),disabled:o||l.disabled,hoverLabel:{label:l.hoverLabel||(l.mode?f[l.mode]:"")},interactiveStyles:S,onPress:this._handleSecondaryClick,style:I.secondaryControl},r.a.createElement(c.a,{style:I.secondaryBorder},v)):null)}_renderIcon(e=!0,t){const{selected:n}=this.props,o=[I.icon,n&&I.iconSelected],c=[I.icon];switch(t){case b.a.Remove:return r.a.createElement(s.a,{style:[I.dismissIcon,e&&o]});case b.a.Expand:return r.a.createElement(l.a,{style:e?o:c});case b.a.Active:return r.a.createElement(d.a,{style:o});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?r.a.createElement(c.a,{style:[I.avatarContainer,t?I.avatarCompact:I.avatar]},e):null}}y.defaultProps={compact:!1,disabled:!1,selected:!1};const I=h.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingLeft:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}})));t.a=y},fRsM:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),c=n("MWbm"),a=n("htQn"),i=n("t62R"),s=n("j7Bv"),l=n("rHpw"),d=n("qqsb"),p=n.n(d),u=n("EHV7"),m=n("v6aA"),h=n("LWCC"),b=n("YICZ"),f=n("X04g"),y=n("3IPs"),I=n("Irs7"),g=n("hxu0");const v=p.a.a2a3824a;let w=0;class k extends r.a.Component{constructor(e,t){super(e,t),this._topicLink={pathname:`/i/topics/${this.props.topic.id}`,state:{referringScribeNamespace:{...this.props.analytics.contextualScribeNamespace,action:"click"}}},this._handleOnClick=()=>{const{saveAsRecentSearch:e,shouldStoreTypeaheadItem:t,topic:{description:n,id:o,name:r}}=this.props;e&&t&&t(f.a.ItemType.TOPIC)&&e({topic:{id:o,name:r,description:n||"",type:y.a.Topic}}),this._handleScribe("click")},this._topicDomId=`topic${w}`,this._nameDomId=`topic-name${w}`,this._descriptionDomId=`topic-description${w}`,this._followButtonDomId=`topic-follow-button${w}`,this._notInterestedButtonDomId=`topic-not-interested-button${w}`,w+=1}render(){const{educateOnFollow:e,isInSidebar:t,nameWeight:n,notInterestedOnClick:o,topic:s}=this.props,{description:l,name:d}=s,{loggedInUserId:p}=this.context;return r.a.createElement(a.a,{accessibilityLabelledBy:[this._topicDomId,this._nameDomId,this._descriptionDomId,this._followButtonDomId,this._notInterestedButtonDomId].join(" "),interactiveStyles:this._topicLink?void 0:null,link:this._topicLink,onClick:this._topicLink?this._handleOnClick:void 0,style:[S.root,S.flexStart],withDarkerInteractiveBackground:t},r.a.createElement(c.a,{style:S.topic},r.a.createElement(c.a,{accessibilityLabel:v,nativeID:this._topicDomId}),this._renderIcon(),r.a.createElement(c.a,{style:S.text},r.a.createElement(i.b,{nativeID:this._nameDomId,weight:n,withInteractiveStyling:!!this._topicLink},d),l?r.a.createElement(i.b,{color:"gray700",nativeID:this._descriptionDomId,numberOfLines:2},l):null)),r.a.createElement(c.a,{style:S.buttons},r.a.createElement(h.a,{educateOnFollow:e,nativeID:this._followButtonDomId,topic:s}),p&&o?r.a.createElement(b.a,{nativeID:this._notInterestedButtonDomId,onPress:o,style:S.marginLeft,topicId:s.id}):null))}_renderIcon(){const{withIcon:e}=this.props;return e?r.a.createElement(s.a,{Icon:u.a,size:"large",style:S.icon}):null}_handleScribe(e){const{analytics:t}=this.props;t.scribeAction(e)}}k.contextType=m.a,k.defaultProps={nameWeight:"bold",withIcon:!0};const S=l.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},flexStart:{alignItems:"flex-start"},icon:{alignSelf:"flex-start",marginRight:e.spaces.space12},customIcon:{borderRadius:e.borderRadii.infinite,height:e.spaces.space32,width:e.spaces.space32},text:{flexShrink:1},buttons:{alignItems:"center",alignSelf:"center",flexDirection:"row",paddingLeft:e.spaces.space8},marginLeft:{marginLeft:e.spaces.space4},topic:{alignItems:"center",flexDirection:"row",flexShrink:1,paddingRight:e.spaces.space4}})));t.a=Object(g.a)(Object(I.a)(k))},gwY8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ERkP");const r=n.n(o).a.createContext({onFollow:void 0,onInitialize:void 0,onUnfollow:void 0})},hxu0:function(e,t,n){"use strict";var o=n("97Jx"),r=n.n(o),c=n("ERkP"),a=n.n(c),i=n("vqbU");t.a=e=>t=>a.a.createElement(i.a.Consumer,null,(n=>a.a.createElement(e,r()({},t,{isInSidebar:n}))))},"lnL+":function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),c=n("MWbm"),a=n("iySH"),i=n("t62R"),s=n("I4+6"),l=n("cm6r"),d=n("rHpw");const p=()=>{const e=u.icon;return r.a.createElement(a.a,{style:e})},u=d.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexDirection:"row",minHeight:e.spaces.space32},border:{borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:e.spaces.space1},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingRight:e.spaces.space12,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space8},text:{width:"100%"},icon:{color:e.colors.text,flexShrink:0,marginLeft:e.spaces.space4}})));t.a=e=>{const{link:t,onClick:n,text:o}=e,a=p(),m=s.a.generate({backgroundColor:"transparent",color:d.a.theme.colors.text});return r.a.createElement(c.a,{style:u.root},r.a.createElement(l.a,{interactiveStyles:m,link:t,onPress:n,style:[u.border,u.content]},r.a.createElement(i.b,{numberOfLines:1,selectable:!1,style:u.text,weight:"medium"},o),a))}},wtjx:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return w}));var o=n("Ssj5"),r=n("RqPI");const c="recentSearches",a="rweb.recentSearches",i=e=>(t,n,{userPersistence:o})=>o.set(a,{recentSearches:e}).catch((()=>{Promise.resolve()})),s=(e,t)=>{let n=[];if(e&&e.user){const o=e.user;n=t.filter((e=>e.keyword||e.topic||e.event||e.user&&e.user.id!==o.id))}else if(e&&e.topic){const o=e.topic;n=t.filter((e=>e.keyword||e.user||e.event||e.topic&&e.topic.id!==o.id))}else if(e&&e.event){const o=e.event;n=t.filter((e=>e.keyword||e.user||e.topic||e.event&&e.event.id!==o.id))}else if(e&&e.keyword){const o=e.keyword;n=t.filter((e=>e.keyword&&e.keyword.query!==o.query||e.user||e.topic||e.event))}return n},l={fetched:!1,recentSearches:[]};const d=e=>e.recentSearches.recentSearches,p=e=>d(e)[0]||null,u=e=>e.recentSearches.fetched,m="rweb/recentSearches/INIT_FROM_CACHE",h=e=>({type:m,payload:e}),b="rweb/recentSearches/REMOVE_QUERY",f=e=>(t,n,{userPersistence:o})=>{t({payload:e,type:b});const c=n().recentSearches;return Object(r.o)(n())?t(i(c.recentSearches)):Promise.resolve()},y="rweb/recentSearches/CLEAR_ALL",I=()=>(e,t,{userPersistence:n})=>{e({type:y});const o=t().recentSearches;return Object(r.o)(t())?e(i(o.recentSearches)):Promise.resolve()},g="rweb/recentSearches/ADD_QUERY",v=e=>(t,n,{userPersistence:o})=>{t({payload:e,type:g});const c=n().recentSearches;return Object(r.o)(n())?t(i(c.recentSearches)):Promise.resolve()},w=()=>(e,t,{userPersistence:n})=>t().recentSearches.fetched?Promise.resolve():e(((e,t,{userPersistence:n})=>{const o=t();return Object(r.o)(o)?n.get(a).then((t=>{e(h(t))})).catch((()=>{e(h())})):(e(h()),Promise.resolve())}));o.a.register({[c]:function(e=l,t){switch(t.type){case g:{const n=t.payload,o=n?s(n,e.recentSearches):[];return o.length>49&&o.splice(49,1),n&&o.unshift(n),{...e,recentSearches:o}}case b:{const n=t.payload,o=n?s(n,e.recentSearches):[];return{...e,recentSearches:o}}case y:return{fetched:!0,recentSearches:[]};case m:return{...e,...t.payload,fetched:!0};default:return e}}})},zWr2:function(e,t,n){"use strict";n.r(t);var o=n("VPAj"),r=n("ezF+"),c=n("ERkP"),a=n.n(c),i=n("MWbm"),s=n("lnL+"),l=n("rHpw"),d=(n("kYxP"),n("UnyZ")),p=n("aV/s"),u=n("qqsb"),m=n.n(u),h=n("gwY8"),b=n("v6aA"),f=n("Tp1h"),y=n("Jkc4"),I=n("0KEI"),g=n("rxPX"),v=n("Zejx");var w=Object(g.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(I.createLocalApiErrorHandlerWithContextFactory)("TOPIC_PILL_CONTEXT"),follow:v.a.follow,unfollow:v.a.unfollow}))).withAnalytics();const k=m.a.ge8f3043,S=m.a.aa576cbf,C=m.a.i77347d1,E=m.a.e839db3a,x=e=>{const{loggedInUserId:t}=a.a.useContext(b.a),{analytics:n,createLocalApiErrorHandler:o,follow:r,notInterestedOnClick:c,topic:s,unfollow:l,withActionIcon:u}=e,{following:m,id:I,name:g,not_interested:v}=s,w=a.a.useRef(!1),[x,_]=a.a.useState(0),P=a.a.useCallback((e=>{if(0===x){const{nativeEvent:{layout:{width:t}}}=e;_(t)}}),[x]),R=e=>{if(!v&&u)return m?d.a.Active:d.a.Expand},A=(e,t,n)=>e(m?O(n):D(t)),D=e=>t=>{r(I).catch(o()).then(e&&e(I)),n.scribeAction("follow")},O=e=>t=>{l(I).catch(o()).then(e&&e(I)),n.scribeAction("unfollow")},j=(e,n,o)=>{if(t&&c)return{mode:d.a.Remove,onSecondaryClick:c,accessibilityLabel:C({topicName:g}),hoverLabel:E,disabled:m||v}};return a.a.createElement(y.a,{customText:g,displayMode:f.a.topic},(e=>a.a.createElement(h.a.Consumer,null,(({onFollow:t,onInitialize:n,onUnfollow:o})=>(n&&!w.current&&(n(I,m),w.current=!0),a.a.createElement(i.a,{onLayout:P,style:[L.root,{minWidth:x}]},a.a.createElement(p.a,{accessibilityLabel:m?S({topicName:g}):k({topicName:g}),disabled:v,key:I,mode:R(),onClick:A(e,t,o),secondaryAction:j(),selected:m,style:L.pill,text:g})))))))};x.defaultProps={withActionIcon:!0};const L=l.a.create((e=>({root:{marginHorizontal:e.spaces.space4,marginVertical:e.spaces.space4},pill:{textOverflow:"ellipsis"},roundIcon:{borderRadius:e.borderRadii.infinite,height:"100%",width:"100%"}})));var _=w(x),P=n("XcJG"),R=n("Irs7"),A=n("E3Hq");const D=(e,t)=>v.a.select(e,t.entry.content.topicId);var O=Object(g.a)().propsFromState((()=>({topic:D})));const j=e=>{const t=Object(R.b)(),{entry:{content:n},feedbackItems:o,topic:r}=e,{topicDisplayType:c,topicFunctionalityType:l}=n;a.a.useEffect((()=>{r&&t.scribeAction("impression")}),[]);const d=a.a.useCallback((()=>{t.scribeAction("click")}),[t]);if(!r)return null;const p=Object(A.a)({feedbackItems:o,topic:r,topicItemContent:n}),u=l!==P.b.Pivot&&c!==P.a.PillWithoutActionIcon;return l===P.b.Pivot?a.a.createElement(i.a,{style:H.root},a.a.createElement(s.a,{link:`/i/topics/${r.id}`,onClick:d,text:r.name})):a.a.createElement(_,{notInterestedOnClick:p,topic:r,withActionIcon:u})},H=l.a.create((e=>({root:{margin:e.spaces.space4}})));var T=O(a.a.memo(j));t.default=({shouldDisplayBorder:e=!1})=>r.b({component:T,isFocusable:Object(o.a)(!0),getScribeDataItem:A.b,shouldDisplayBorder:Object(o.a)(e)}).getHandler()}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.topicHandler.b5410608.js.map