(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+/sI":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var i=a("ERkP"),n=a.n(i),r=a("t62R"),s=a("a6qo"),o=a("rHpw"),l=a("TGcR");const c="animated_gif",d="video";class u extends n.a.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let a;if(t===c||"vine"===t)a=t===c?n.a.createElement(r.b,{weight:"bold"},"GIF"):n.a.createElement(l.a,{style:p.icon});else if(t===d&&e){const t=Math.trunc(e/6e4),i=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);a=n.a.createElement(r.b,{color:"white"},`${t}:${i}`)}return a?n.a.createElement(s.a,{align:"left"},a):null}}const p=o.a.create((e=>({icon:{color:e.colors.white}})));t.c=u},"/Imo":function(e,t,a){"use strict";var i=a("97Jx"),n=a.n(i),r=(a("kYxP"),a("ERkP")),s=a.n(r),o=a("k/Ka"),l=a("qqsb"),c=a.n(l),d=a("/yvb"),u=a("rHpw");const p=c.a.i5450bec,h=c.a.f7432494;class m extends s.a.Component{constructor(...e){super(...e),this._handlePress=e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()},this._handleChange=e=>{const{onChange:t}=this.props,a=e.target,i=a.files;i.length&&t&&t(i),a.value=""},this._handleFileInputButtonRef=e=>{this._fileInput=e}}render(){const{accept:e,disabled:t,multiple:a,onChange:i,testID:r,...l}=this.props,c=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,n()({hoverLabel:e?{label:c?h:p}:void 0},l,{disabled:t,onPress:this._handlePress})),Object(o.a)("input",{accept:e,disabled:t,multiple:a,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:b.input,tabIndex:-1,testID:r,type:"file"}))}}m.defaultProps={disabled:!1,multiple:!1};const b=u.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=m},"4bHO":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"7myi":function(e,t,a){"use strict";a("kYxP"),a("849X");var i=a("ERkP"),n=a.n(i),r=a("2dXj"),s=a("oEoC"),o=a("GZwR"),l=a("dzqK"),c=a("4bHO");class d extends n.a.Component{constructor(...e){super(...e),this._genericWrapperRef=n.a.createRef(),this.state={queryContext:void 0,canShowTypeahead:!1},this.render=()=>{const{children:e,composeCommunityId:t,contextText:a,isInline:i,isInlineReply:s,onTypeaheadStateChange:l,source:c}=this.props,{canShowTypeahead:d,queryContext:u}=this.state,p=d&&u?{word:u.word,resultType:u.resultType}:void 0;return n.a.createElement(r.a,{composeCommunityId:t,contextText:a,isInline:i,isInlineReply:s,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:l,query:p,ref:this._genericWrapperRef,source:c||o.d.Compose},e(this._handleInputChange))},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const i=Object(c.a)(e,a.resultType),{newCursor:n,newTweetText:r}=this._replaceToken(i,a);t({target:{value:r}}),this._updateDOMTextArea(n,r)}this._setQueryContext(void 0)},this._updateDOMTextArea=(e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())},this._handleInputChange=e=>{if(Object(l.a)(e))throw new Error("PlainTextTypeaheadComposeWrapper cannot handle rich text input changes");const t=e&&(e.currentTarget||e.target),{queryContext:a}=this.state;this._textAreaRef=t;const i=a&&a.word,n=t.value,{end:r,start:o,word:c}=s.c(t.selectionStart,n),d=s.e(c||"","compose");if((null==d?void 0:d.q)!==i)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===o)this._setQueryContext(void 0);else if(d){const{q:e,result_type:a}=d;this._setQueryContext({word:e,resultType:a,fullText:t.value,startIndex:o,endIndex:r})}else this._setQueryContext(void 0)},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{endIndex:a,fullText:i,startIndex:n}=t,r=i.slice(0,n);return{newTweetText:r+e+i.slice(a),newCursor:r.length+e.length}}}t.a=d},KqB4:function(e,t,a){"use strict";var i=a("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=[],i=(0,n.default)(e,t),r=0;r<i.length;r++)a.push(i[r].url);return a};var n=i(a("vwfs"));e.exports=t.default},LCtV:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a("kYxP");var i=a("ERkP"),n=a.n(i),r=a("U+bB"),s=a("MWbm"),o=a("Qwev"),l=a("rHpw"),c=a("qqsb"),d=a.n(c),u=a("1auM"),p=a("ude7"),h=a("mN6z");const m=d.a.gff1f69e,b=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class f extends n.a.Component{constructor(...e){super(...e),this.state={imagePreviewUrl:null},this._getImageSrc=()=>{const{enableGif:e,mediaItem:t}=this.props,{imagePreviewUrl:a}=this.state;if(t&&t.mediaFile)return t.mediaFile.isGif&&!e?a:t.mediaFile.url}}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:a}=this.state;e||a||t instanceof u.a&&t.isGif&&Object(p.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(h.a)(e,this.props)||!Object(h.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:i,resizeMode:l}=this.props,{imagePreviewUrl:c}=this.state||{},d=a.mediaFile&&a.mediaFile.isGif&&!t&&!c,u=a.needsProcessing||d,p=[y.root,g[e],u&&y.loadingBorder],h=this._getImageSrc();return n.a.createElement(s.a,{onClick:i,style:p},u||!h?n.a.createElement(o.a,{accessibilityLabel:m,style:y.activityIndicator}):n.a.createElement(r.a,{resizeMode:l,source:h,style:y.image}))}}f.defaultProps={borderRadius:b.NONE,enableGif:!0,resizeMode:"cover"};const g=l.a.create((e=>({[b.INFINITE]:{borderRadius:e.borderRadii.infinite},[b.MEDIUM]:{borderRadius:e.borderRadii.small},[b.NONE]:{borderRadius:e.borderRadii.none}}))),y=l.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=f},MLl7:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}));const i=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),n=e=>Object.values(i).indexOf(e)>=0,r=(e,t)=>"boolean"==typeof e?e:t},UgB4:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),r=a("k/Ka"),s=a("Lsrn");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M21.13 11.358L3.614 2.108c-.29-.152-.64-.102-.873.126-.23.226-.293.577-.15.868l4.362 8.92-4.362 8.92c-.143.292-.08.643.15.868.145.14.333.212.523.212.12 0 .24-.028.35-.087l17.517-9.25c.245-.13.4-.386.4-.664s-.155-.532-.4-.662zM4.948 4.51l12.804 6.762H8.255l-3.307-6.76zm3.307 8.26h9.498L4.948 19.535l3.307-6.763z"})));o.metadata={width:24,height:24},t.a=o},VPdC:function(e,t,a){"use strict";a.d(t,"b",(function(){return y}));var i=a("97Jx"),n=a.n(i),r=a("ERkP"),s=a.n(r),o=a("/Imo"),l=a("rHpw"),c=a("qqsb"),d=a.n(c),u=a("cjZk"),p=a("9HgX"),h=a("sjK1"),m="fileInput";const b=d.a.b9960f32,f={viewType:"media_picker"},g=s.a.createElement(u.a,null),y=({acceptGifs:e,acceptImages:t=!0,acceptVideo:a})=>(t?p.b:[]).concat(e?[p.a]:[]).concat(a?h.a:[]);class v extends s.a.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:a,customMimeTypes:i,icon:r,style:l,withIcon:c,...d}=this.props,u=y({acceptGifs:e,acceptImages:t,acceptVideo:a}).concat(i).join(",");return s.a.createElement(o.a,n()({},d,{accept:u,behavioralEventContext:f,icon:c?r:void 0,style:[_.root,l],testID:m}))}}v.defaultProps={acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:b,icon:g,size:"medium",withIcon:!0};const _=l.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=v},b5s6:function(e,t,a){"use strict";var i=a("97Jx"),n=a.n(i),r=a("ERkP"),s=a.n(r),o=a("nBUg"),l=a("uCxL"),c=a("YeIG"),d=a("x5Pi"),u=a("Irs7"),p=a("v6aA"),h=a("0KEI"),m=a("rxPX"),b=a("eSoz"),f=a("XOJV");const g=(e,t)=>t.tweetId,y=(e,t)=>{const a=t.tweetId,i=a&&f.a.select(e,a);return i?Object(b.g)(e,i):void 0};const v=Object(m.a)().propsFromState((()=>({community:y,hydratedTweet:f.a.createHydratedTweetSelector(g)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(h.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:b.c.fetchOneIfNeeded})))((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,hydratedTweet:i,onPress:r,tweetId:h,...m})=>{const{featureSwitches:b,loggedInUserId:f}=s.a.useContext(p.a),g=Object(u.b)(),y=null==i?void 0:i.community_id_str;s.a.useEffect((()=>{y&&Object(c.a)(e)&&a(y).catch(t())}),[e,y,t,a]);const v=s.a.useCallback((e=>{g.scribeAction("click"),r&&r(e)}),[r,g]),_=i&&Object(d.f)(i,f,e),E=_&&Object(d.e)(_),w=b.isTrue("responsive_web_reactions_enabled");return s.a.createElement(o.b.Provider,{value:{isCollaborativeTweetConsumptionEnabled:()=>b.isTrue("responsive_web_cotweet_consumption_enabled"),isEditTweetConsumptionEnabled:()=>b.isTrue("responsive_web_edit_tweet_enabled")||b.isTrue("subscriptions_feature_labs_1004"),isVibeTweetConsumptionEnabled:()=>b.isTrue("vibe_tweet_context_enabled"),mixedMediaEnabled:()=>b.isTrue("responsive_web_mixed_media_consumption_enabled")}},s.a.createElement(l.a,n()({},m,{loggedInUserId:f,onPress:v,shouldShowAltLabelAlways:!0,socialContextProps:E,tweet:i,withReactions:w})))}));t.a=v},cIoY:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),r=a("CaKu"),s=a("U+bB"),o=a("mjJ+"),l=a("t62R"),c=a("cm6r"),d=a("rHpw"),u=a("qqsb"),p=a.n(u),h=a("I/9y"),m=(a("kYxP"),a("k/Ka")),b=a("sgih"),f=a("/yvb");const g=p.a.cfd2f35e;class y extends n.a.Component{constructor(...e){super(...e),this._handleOnFocus=e=>{e.currentTarget.select()}}render(){const{cancelButtonLabel:e,description:t,headerText:a,link:i,onCancel:r}=this.props,s=Object(m.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:v.linkInput,value:i});return n.a.createElement(b.a,{onMaskClick:r,style:v.container,type:"center",withMask:!0},a&&n.a.createElement(l.b,{align:"center",style:v.headerText,weight:"bold"},a),t&&n.a.createElement(l.b,{align:"center",color:"gray700",style:v.labelText},t),s,n.a.createElement(f.a,{onPress:r,size:"xLarge",style:v.cancelButton,type:"brandText"},e))}}y.defaultProps={cancelButtonLabel:g};const v=d.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var _=y;const E=p.a.e05c00b4,w=p.a.eabf2209,C=p.a.a613e720,x=p.a.f88553c8,I={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class P extends n.a.PureComponent{constructor(e){super(e),this._renderMenu=e=>n.a.createElement(o.a,{items:[{text:C,Icon:h.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}),this._handleCopyGifLinkButtonClick=e=>{const{addToast:t,gifUrl:a}=this.props;r.a.isAvailable()?(r.a.setString(a),t({text:x})):this.setState({showCopyLinkSheet:!0}),e&&e()},this._handleCopyLinkSheetCancel=()=>{this.setState({showCopyLinkSheet:!1})},this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{gifUrl:t,provider:a}=this.props,{display_name:i,name:r}=a,s=I[r];return s?n.a.createElement(n.a.Fragment,null,e?n.a.createElement(_,{description:w({providerName:i}),headerText:E,link:t,onCancel:this._handleCopyLinkSheetCancel}):null,n.a.createElement(l.b,{align:"center",color:"gray700",style:k.root},n.a.createElement(p.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(i,s)))):null}_renderAttribution(e,t){return n.a.createElement(c.a,{interactiveStyles:null,renderMenu:this._renderMenu},n.a.createElement(l.b,{weight:"bold",withInteractiveStyling:!0},n.a.createElement(s.a,{source:{uri:t},style:k.image}),n.a.createElement(l.b,null,e.toUpperCase())))}}const k=d.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var R=P,T=a("rxPX"),S=a("1YZw");const O=Object(T.a)().propsFromActions((()=>({addToast:S.b})))((({addToast:e,gifUrl:t,provider:a})=>n.a.createElement(R,{addToast:e,gifUrl:t,provider:a})));t.a=O},dzqK:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("ERkP");var i=a("zpdM");function n(e){return e instanceof i.EditorState}},gpVt:function(e,t,a){"use strict";a.d(t,"b",(function(){return k}));var i=a("ERkP"),n=a.n(i),r=a("MWbm"),s=a("/yvb"),o=a("rHpw"),l=a("qqsb"),c=a.n(l),d=a("hOZg"),u=a("VY6S"),p=a("mN6z"),h=a("KqB4"),m=a.n(h),b=a("cnVF"),f=a("v6aA"),g=a("aX4+"),y=(a("kYxP"),a("0KEI")),v=a("rxPX"),_=a("vjRr"),E=a("CDB5"),w=a("xVN5");const C=(e,t)=>{const{urls:a}=t,i=[...a];let n;for(const t of i.reverse())if(n=_.a.select(e,t),n)break;return n};var x=Object(v.a)().propsFromState((()=>({card:C}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(y.createLocalApiErrorHandlerWithContextFactory)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:_.a.fetchCardPreviewIfNeeded,updateDMComposer:E.e,updateTweetComposer:w.w})));const I=c.a.f6fec9f6,P=/^https?:\/\//i,k=e=>{const t=m()(e);if(t.length)return t.map((e=>!P.test(e)&&`http://${e}`||e))};class R extends n.a.Component{constructor(e,t){super(e,t),this._fetchCardPreviewIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchCardPreviewIfNeeded:t,urls:a}=this.props;a.forEach((a=>{t(a).catch(e())}))},this._handleCardPreviewDismissal=e=>this._updateSingleComposer({cardUrl:b.C}),this._updateSingleComposer=e=>{const{conversationId:t,index:a,updateDMComposer:i,updateTweetComposer:n}=this.props,{cardUrl:r}=e||{};this._isDMComposer?t&&i(t,r):n({updates:{cardUrl:r},index:a})},this._debouncedFetchCardPreview=Object(u.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(p.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:a}=this.props,{loggedInUserId:i}=this.context;return e&&!t&&i?n.a.createElement(r.a,{style:a},n.a.createElement(g.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:i},isInteractive:!1,preventVideoPlayback:!0}),n.a.createElement(s.a,{accessibilityLabel:I,icon:n.a.createElement(d.a,null),onPress:this._handleCardPreviewDismissal,size:"xSmall",style:T.closeButton,type:"onMediaDominantColorFilled"})):null}}R.contextType=f.a;const T=o.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),S=x(R);t.a=S},jtO7:function(e,t,a){"use strict";var i=a("97Jx"),n=a.n(i),r=a("ERkP"),s=a.n(r),o=a("MWbm"),l=a("t62R"),c=a("I4+6"),d=a("cm6r"),u=a("rHpw");const p=u.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.space48,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16}})));t.a=({align:e="center",color:t,label:a,...i})=>{const r=c.a.generate({backgroundColor:u.a.theme.colors.transparent,color:u.a.theme.colors[t],insetFocusRing:!0});return s.a.createElement(o.a,{style:p.container},s.a.createElement(d.a,n()({},i,{interactiveStyles:r,style:p.root}),s.a.createElement(l.b,{align:e,color:t},a)))}},krmn:function(e,t,a){"use strict";a("kYxP");var i=a("ERkP"),n=a.n(i),r=a("2ZFc"),s=a("OiMc"),o=a("/yvb"),l=a("qqsb"),c=a.n(l),d=a("pNJr"),u=a("zb92"),p=a("RuTB");var h=Object(u.a)({loader:()=>c.a.emoji.then((()=>Promise.all([a.e(14),a.e(218)]).then(a.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>n.a.createElement(p.a,{hasError:e,onRetry:t})}),m=a("U+bB"),b=a("kLqS"),f=a("MWbm"),g=a("rHpw"),y=a.p+"twemoji_sprite.6d90d9d8.png",v=a.p+"twemoji_sprite_high_res.0b0faef8.png";const _=g.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var E=e=>{const{onSelect:t,partialRender:a}=e,i=b.a.get()>1?v:y;return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{style:[_.content,_.dimensions]},n.a.createElement(h,{onSelect:t,partialRender:a,rowSize:9,spriteUrl:i})),n.a.createElement(m.a,{source:i,style:_.hidden}))};const w=c.a.d4a4842e,C=n.a.createElement(d.a,null),x=c.a.fec16c1c,I={viewType:"emoji_picker"},P=e=>{const{disabled:t,onEmojiSelect:a,onPress:i,size:l,style:c,textInputRef:d}=e,[u,p]=n.a.useState(!0);n.a.useEffect((()=>{const e=setTimeout((()=>{h.preload(),r.a.get("emojiPicker2")}),5e3);return()=>{clearTimeout(e)}}),[]);return n.a.createElement(s.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>p(!1),onDismiss:()=>p(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>d&&d.focus()))},renderContent:()=>n.a.createElement(E,{onSelect:a,partialRender:u}),withArrow:!0},n.a.createElement(o.a,{accessibilityHasPopup:"menu",accessibilityLabel:w,behavioralEventContext:I,disabled:t,hoverLabel:{label:x},icon:C,onPress:e=>i&&i(e),size:l,style:c,type:"brandText"}))};P.defaultProps={disabled:!1,size:"xSmall"};t.a=P},pKoL:function(e,t,a){"use strict";a("kYxP");var i=a("ERkP"),n=a.n(i),r=a("U+bB"),s=a("MWbm"),o=a("cHvH"),l=a("mXq/"),c=a("/yvb"),d=a("a6qo"),u=a("rHpw"),p=a("qqsb"),h=a.n(p),m=a("hOZg"),b=a("GCOQ"),f=a("tuke"),g=a("9HgX"),y=a("v6aA"),v=a("HPNB"),_=a("eyty"),E=a("62wY"),w=a("sjK1"),C=a("k/Ka"),x=a("z4Tm"),I=a("eXeu");class P extends n.a.Component{constructor(...e){super(...e),this._setVideoRef=e=>{const{getVideoRef:t}=this.props;t&&t(e)}}render(){const{children:e,dataSaverMode:t,getVideoRef:a,style:i,variants:r,...s}=this.props,o=Object(x.c)(Object(I.e)(r),t);return Object(C.a)("video",{...s,children:[o.map((e=>n.a.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:i})}}P.defaultProps={dataSaverMode:!1,variants:[]};var k=a("+/sI"),R=a("LCtV"),T=a("zb92"),S=a("RuTB"),O=Object(T.a)({loader:()=>Promise.all([a.e(0),a.e(4),a.e(187)]).then(a.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__}))),renderPlaceholder:(e,t)=>n.a.createElement(S.a,{hasError:e,onRetry:t})});const M=h.a.gd80afba,D=h.a.j322caee,L=h.a.abd845fe,F=h.a.df1b0708,j=h.a.cd959e5c,V=h.a.e68b09b4,B=h.a.add55c98;class z extends n.a.Component{constructor(...e){super(...e),this.state={isVideoPaused:!0,playGif:!1},this._handleGifClick=()=>{this.setState({playGif:!this.state.playGif})},this._handleMediaPreviewLayout=e=>{const{mediaItem:t,resizeIfNeeded:a}=this.props,i=t.mediaFile||t.externalMediaDetails;if(!i)return;const{nativeEvent:{layout:{height:n,width:r}}}=e,{height:s,width:o}=i,l=o/s;Math.abs(l-r/n)>.05&&this._mediaContainer&&("width"===a?this._mediaContainer.setNativeProps({style:{width:n*l}}):"height"===a&&this._mediaContainer.setNativeProps({style:{height:r/l}}))},this._handleVideoOnPlay=e=>{this.setState({isVideoPaused:!1})},this._handleVideoOnPause=e=>{this.setState({isVideoPaused:!0})},this._setMediaContainerRef=e=>{this._mediaContainer=e},this._setVideoRef=e=>{this._video=e},this.playVideo=()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}},this.pauseVideo=()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}}render(){var e;const{accessibilityLabel:t,accessibilityRole:a,enableGif:i,mediaItem:r,onEdit:u,onEditSensitiveWarning:p,onRemove:h,style:y,withAltTextLabel:_,withCloseButton:E,withEditButton:w,withEditIcon:C,withEditSensitiveWarningButton:x}=this.props,{playGif:I}=this.state,P=r.externalMediaDetails&&r.externalMediaDetails.mediaType===g.a,R=P||i&&r.mediaFile&&r.mediaFile.isGif,T=!(null==(e=r.mediaFile)||!e.isVideo);return n.a.createElement(o.a,null,(({windowWidth:e})=>{const i=void 0!==C?C:!v.a.isTwoColumnLayout(e);return n.a.createElement(s.a,{accessibilityLabel:t||B,accessibilityRole:a,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[y,A.cursor,P&&A.gifPlayButton]},this._renderPreview(),P&&!I&&n.a.createElement(l.a,{accessibilityLabel:F,onPress:this._handleGifClick,size:"small"}),E?n.a.createElement(c.a,{accessibilityLabel:j,hoverLabel:{label:V},icon:n.a.createElement(m.a,null),onPress:h,size:"small",style:A.close,type:"onMediaDominantColorFilled"}):null,R?n.a.createElement(k.c,{type:k.a}):null,_&&!T?n.a.createElement(d.a,{align:"left",altLabel:t}):null,w?n.a.createElement(s.a,{style:[A.editMedia,T?A.editVideo:A.editImage]},x?n.a.createElement(c.a,{accessibilityLabel:D,icon:n.a.createElement(b.a,{style:A.editSensitiveWarningIcon}),onPress:p,size:"small",style:A.editSensitiveWarningButton,type:"onMediaDominantColorFilled"}):null,n.a.createElement(c.a,{accessibilityLabel:M,icon:i?n.a.createElement(f.a,null):void 0,onPress:u,size:i?"xSmall":"small",type:"onMediaDominantColorFilled"},i?void 0:L)):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,a=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,a)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):n.a.createElement(s.a,{style:u.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:a}=this.state,i={uri:a?e:t};return n.a.createElement(s.a,{onClick:this._handleGifClick,style:u.a.absoluteFill},n.a.createElement(r.a,{resizeMode:"cover",source:i,style:A.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,imageResizeMode:a,mediaItem:i,onClick:r}=this.props;return n.a.createElement(R.b,{borderRadius:e,enableGif:t,mediaItem:i,onClick:r,resizeMode:a})}_renderVideoPreview(e,t,a,i){var r;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:s}=this.props,o=null==(r=s.mediaMetadata)?void 0:r.subtitles;if(this._configurableVideoPlayerEnabled&&i instanceof w.c){const r=Object(_.h)(i.fileHandle)?[{src:t,type:e}]:[],l=`${a}`;return n.a.createElement(O,{mediaFile:i,mediaId:l,subtitles:o,trimData:null==s?void 0:s.trimData,variants:r})}{var l;const a=Object(_.h)(i.fileHandle)?[{content_type:e,url:t}]:[],r=(null==o||null==(l=o.upload)?void 0:l.mediaFile)instanceof E.b?o.upload.mediaFile.vtt:void 0;return n.a.createElement(P,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:i instanceof w.c?i.thumbnail:"",style:A.video,variants:a},o&&r?n.a.createElement("track",{default:!0,kind:"subtitles",label:o.displayName,src:r,srcLang:o.lang}):null)}}}z.contextType=y.a,z.defaultProps={enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1,withEditSensitiveWarningButton:!1};const A=u.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editSensitiveWarningIcon:{color:e.colors.primary},editMedia:{display:"flex",flexDirection:"row",position:"absolute",right:e.spaces.space4},editImage:{bottom:e.spaces.space4},editVideo:{top:e.spaces.space4},editSensitiveWarningButton:{marginRight:e.spaces.space8},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=z},rFBM:function(e,t,a){"use strict";a("kYxP");var i=a("ERkP"),n=a.n(i),r=a("k/Ka"),s=a("MWbm"),o=a("rHpw");const l=e=>Object(r.a)("div",e);class c extends n.a.Component{constructor(...e){super(...e),this._dragEnterCount=0,this.state={active:!1},this._handleDragDrop=e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)},this._handleDragEnter=e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)},this._handleDragLeave=e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)},this._handleDragOver=e=>{e.preventDefault()}}render(){const{allowDragDrop:e,children:t,style:a}=this.props,{active:i}=this.state,r=e?d.dragBorderValid:d.dragBorderInvalid;return n.a.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[d.root,a,i&&r]},n.a.createElement(s.a,{style:d.inner},"function"==typeof t?t(i):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}c.defaultProps={allowDragDrop:!0};const d=o.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.magenta500},inner:{flexGrow:1}})));t.a=c},tuke:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),r=a("k/Ka"),s=a("Lsrn");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));o.metadata={width:24,height:24},t.a=o},w3n3:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),r=a("/yvb"),s=a("qqsb"),o=a.n(s),l=a("3rWK"),c=a("Irs7");const d=o.a.a4993fa2,u=n.a.createElement(l.a,null),p=o.a.i0db46e6,h={viewType:"gif_search"};t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:a,history:i,onPress:s,style:o,testID:l})=>{const m=Object(c.b)(),b=n.a.useCallback((()=>{s&&s(),m.scribe({element:"found_media_button",action:"click"}),i.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:a,dmConversationId:e}})}),[e,m,a,i,s]);return n.a.createElement(r.a,{accessibilityLabel:d,behavioralEventContext:h,disabled:!t,hoverLabel:{label:p},icon:u,onPress:b,size:"medium",style:o,testID:l,type:"brandText"})}},wpu3:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return m}));a("kYxP"),a("qd3W");var i=a("VAyw"),n=a("/Ikv"),r=a("1auM"),s=a("s1N3"),o=a("lnti"),l=a("kIAd"),c=a("oEoC");const d=({excludeReplyUser:e,inReplyToStatus:t,loggedInUserId:a})=>{const{retweeted_status:n}=t,{entities:r,unmentioned_user_ids:l,user:c}=n||t,d=n?n.user:{},p=n?t.user:{},h=(null==r?void 0:r.user_mentions)||[],m=i.a.mergeTaggedUsers((null==r?void 0:r.media)||[]),b=u(n||t)||{},f={[d.id_str]:d,[p.id_str]:p,[c.id_str]:c,[b.id_str]:b};h.forEach((e=>{f[e.id_str]=e})),m.forEach((({name:e,screen_name:t,user_id:a})=>{f[a]={id_str:a,name:e,screen_name:t}}));const g=e=>{const t=null==l?void 0:l.includes(e.id_str),a=e.id_str===c.id_str;return!t||a?[e.id_str]:[]},y=Object(s.a)(Object(o.a)([...g(d),...g(p),c.id_str,...h.flatMap((e=>g(e))),...m.map((e=>e.user_id))])).filter((e=>e!==a));let v=a&&c.id_str===a?[a,...y]:y;return e&&(v=v.filter((e=>e!==c.id_str))),v.map((e=>f[e]))},u=({card:e})=>{let t=null;if(e){const a=n.a.getBindingValue(e.binding_values,"site");a&&e.users&&(t=e.users[a.id_str])}return t},p=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const a=t.some((e=>!!e.externalMediaDetails)),i=!a&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),n=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof r.a)&&e.mediaFile.isVideo));if(i||a||n)return 1===t.length;{const a=t.length<=e,i=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return a&&i}},h=p({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const a=e.split(l.b.WordBoundary);return t&&a.pop(),!!a.find((e=>{const t=Object(c.e)(e,"compose");return t&&"users"===t.result_type}))}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.DMDrawer~bundle.DMRichTextCompose~bundle.PlainTextCompose.4c573ea8.js.map