(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{UnyZ:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));const s=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},V2l4:function(e,t,o){"use strict";o.r(t),o.d(t,"UserPicker",(function(){return b})),o.d(t,"finalGetItemIsDisabled",(function(){return _})),o.d(t,"getFinalItemDisabledMessage",(function(){return I}));var s=o("ERkP"),a=o.n(s),r=o("MWbm"),i=o("oSwX"),n=o("aV/s"),l=o("rHpw"),c=o("qqsb"),d=o.n(c),p=o("4e/K"),h=o("ZcYN"),m=o("GZwR"),u="searchPeople";const g=[m.a.Users],y=d.a.fc9dd578,w=d.a.gdb7bc25;class b extends a.a.Component{constructor(e,t){super(e,t),this._renderSelectedUsersList=()=>{const{selectedUsers:e}=this.props;return a.a.createElement(r.a,{style:x.selectedUsersList},e.map(this._renderSelectedUserPill))},this._renderSelectedUserPill=e=>{const{withCompactPills:t}=this.props,o=this.props.onRemove.bind(this,e),s=e.type===m.b.User?a.a.createElement(i.default,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:e.data.profile_image_url_https}):void 0;return a.a.createElement(n.a,{accessibilityLabel:w({name:e.data.name}),avatar:s,compact:t,key:e.id,mode:"remove",onClick:o,style:x.selectionPill,text:e.data.name})},this._getItemIsDisabled=e=>{const{getItemIsDisabled:t,preselectedUsers:o}=this.props;return _(e,t,o)},this._getItemDisabledMessage=e=>{const{getItemDisabledMessage:t,preselectedUsers:o}=this.props;return I(e,t,o)},this._handleQueryChange=e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)},this._handleOnSelect=e=>{const{onSelect:t}=this.props;t&&t(e)},this.state={query:""}}render(){const{injections:e,preselectedUsers:t,renderCallout:o,renderHeader:s,selectedUsers:i,shouldAutoFocus:n,source:l}=this.props,c=i.map((({id:e})=>e)).concat(t);return a.a.createElement(r.a,{style:x.root},a.a.createElement(p.default,{alwaysOpen:!0,disableClearButton:!0,filter:g,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:y,renderCallout:o,renderHeader:s,renderInSearchField:i.length?this._renderSelectedUsersList:void 0,renderUserDecoration:h.a,selectedItems:c,shouldAutoFocus:n,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:l,testID:u,withSectionDivider:!1}))}}b.defaultProps={preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1};const f=(e,t)=>t.indexOf(e)>=0,_=(e,t,o)=>f(e.id,o)||!(!t||!t(e)),I=(e,t,o)=>{if(!f(e.id,o)&&t)return t(e)},x=l.a.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}})));t.default=b},"aV/s":function(e,t,o){"use strict";o("kYxP");var s=o("ERkP"),a=o.n(s),r=o("MWbm"),i=o("qqsb"),n=o.n(i),l=o("hOZg"),c=o("iY63"),d=o("IMYl"),p=o("t62R"),h=o("I4+6"),m=o("cm6r"),u=o("rHpw"),g=o("UnyZ");const y={active:n.a.e557ad8e,expand:n.a.e3a58c28,remove:n.a.h517e8d8};class w extends a.a.PureComponent{constructor(...e){super(...e),this._handleSecondaryClick=()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}}render(){const{accessibilityLabel:e,avatar:t,compact:o,disabled:s,link:i,mode:n,onClick:l,secondaryAction:c,selected:d,style:g,text:w}=this.props,f=this._renderIcon(!0,n),_=c&&this._renderIcon(!1,c.mode),I=[b.root,o&&b.compact,s&&b.disabled,d&&b.selected,g],x=[b.content,!!f&&b.withIcon,!!t&&(o&&b.withAvatarImageCompact||b.withAvatarImage)],C=h.a.generate({backgroundColor:d?u.a.theme.colors.primary:"transparent",color:d?u.a.theme.colors.white:u.a.theme.colors.primary});return a.a.createElement(r.a,{style:I},a.a.createElement(m.a,{accessibilityLabel:e||(n?y[n]:""),disabled:s,interactiveStyles:C,link:i,onPress:l,style:x},this._renderAvatar(),a.a.createElement(p.b,{color:d?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:b.text,weight:"bold"},w),f),c?a.a.createElement(m.a,{accessibilityLabel:c.accessibilityLabel||(c.mode?y[c.mode]:""),disabled:s||c.disabled,hoverLabel:{label:c.hoverLabel||(c.mode?y[c.mode]:"")},interactiveStyles:C,onPress:this._handleSecondaryClick,style:b.secondaryControl},a.a.createElement(r.a,{style:b.secondaryBorder},_)):null)}_renderIcon(e=!0,t){const{selected:o}=this.props,s=[b.icon,o&&b.iconSelected],r=[b.icon];switch(t){case g.a.Remove:return a.a.createElement(l.a,{style:[b.dismissIcon,e&&s]});case g.a.Expand:return a.a.createElement(c.a,{style:e?s:r});case g.a.Active:return a.a.createElement(d.a,{style:s});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?a.a.createElement(r.a,{style:[b.avatarContainer,t?b.avatarCompact:b.avatar]},e):null}}w.defaultProps={compact:!1,disabled:!1,selected:!1};const b=u.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingLeft:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}})));t.a=w},bJYH:function(e,t,o){"use strict";o.r(t),o.d(t,"GenericTypeaheadComposeWrapper",(function(){return C}));var s=o("ERkP"),a=o.n(s),r=o("7nmT"),i=o.n(r),n=o("MWbm"),l=o("rHpw"),c=o("0FVZ"),d=o("xoZN"),p=o("7N4s"),h=o("zTrU"),m=o("OEYw"),u=o("WPfJ"),g=o("GZwR"),y=o("oEoC"),w=o("Irs7");const b=[g.a.Users],f=[g.a.Topics],_=50*l.a.theme.scaleMultipler,I=30*l.a.theme.scaleMultipler;let x=0;class C extends a.a.Component{constructor(e,t){super(e,t),this._typeaheadActive=!1,this._renderTypeaheadDropdown=e=>{const{composeCommunityId:t,contextText:o,isInlineReply:s,onSelectItem:r,source:i}=this.props,{isModal:l}=this.context,d=e.resultType===g.a.Topics?"hashtag":void 0,p=t?g.d.CommunityHashtagsSuggested:i||g.d.Compose,h=a.a.createElement(m.a,{ariaDescendantId:this.state.ariaDescendantId,communityId:t,contextText:o,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:r,onItemFocusChanged:this._handleItemFocusChanged,query:e.word,ref:this._handleTypeaheadRef,source:p,style:this._calcStyle(),topicType:d,withItemAlwaysSelected:!0});return l||s?a.a.createElement(c.a.HalfSheet,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{onClick:this._handleDismiss,style:S.mask}),h)):a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{onClick:this._handleDismiss,style:S.mask}),h)},this.render=()=>{const{children:e,query:t}=this.props,o=a.a.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=i.a.findDOMNode(t),this._textInputRef=t;const{ref:o}=e;o&&o(t)}});return a.a.createElement(n.a,{style:S.inputContainer},a.a.createElement(d.a,{onKeyDown:this._handleKeyDown},o,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))},this._getFilter=e=>"users"===e?b:f,this._calcStyle=()=>{const{isModal:e}=this.context,{isInline:t,isInlineReply:o,source:s}=this.props,a=this._textInputNode,r=window.innerHeight,i=window.innerWidth,n=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(a instanceof window.HTMLElement){if(s===g.d.LongformComposer){const e=this._getWindowSelectionY()||this._windowSelectionY;return e?[this._getLongformDropdownPositioningStyle(r,i,e,60,70),S.dropdownStyle]:void 0}if(e||t){const t=a.getBoundingClientRect();return[this._getDropdownPositioningStyle(r,i,t.top,t.top+n,t.left,e,!!o),S.dropdownStyle]}return[this._getModalFullViewportStyle(n),S.modalFullViewportStyle]}return[this._getDropdownPositioningStyle(n,i,0,0,0,e,!!o),S.dropdownStyle]},this._handleKeyDown=e=>{const{selectedItem:t}=this.state,{onSelectItem:o,query:s}=this.props,{key:a}=e;y.g(e)&&s&&("ArrowDown"===a?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===a?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===a||"Tab"===a?t&&(o(t),e.preventDefault()):"Escape"===a&&(this._handleDismiss(),e.preventDefault()))},this._handleItemFocusChanged=e=>this.setState({ariaDescendantId:y.b(),selectedItem:e}),this._handleTypeaheadRef=e=>{this._typeaheadRef=e},this._handleDismiss=()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()},this._getDropdownHeight=Object(h.a)(((e,t)=>{const o=50*e/100;return o>t?t:o})),this._getModalOrInlineReplyDropdownStyles=Object(h.a)(((e,t,o)=>e?{bottom:`${o}px`}:{top:`${t}px`})),this._getWindowSelectionY=()=>{var e;const t=window.getSelection().rangeCount>0?Array.from(window.getSelection().getRangeAt(0).getClientRects()):[];return null==t||null==(e=t[0])?void 0:e.y},this._getLongformDropdownPositioningStyle=Object(h.a)(((e,t,o,s,a)=>{const{maxWidth:r,minWidth:i}=this._getDropdownMinMaxWidth(t,a),n=o>(e-s)/2+s,l=this._getDropdownHeight(e,(e-3*s)/2);return{height:`${l}px`,maxWidth:`${r}px`,minWidth:`${i}px`,position:"fixed",top:`${n?o-I-l:o+_}px`}})),this._getDropdownPositioningStyle=Object(h.a)(((e,t,o=0,s=0,a=0,r=!1,i=!1)=>{const{maxWidth:n,minWidth:l}=this._getDropdownMinMaxWidth(t,a),c=e-s,d=o,p=c/e<.5&&d>c,h={maxWidth:`${n}px`,minWidth:`${l}px`,maxHeight:`${p?this._getDropdownHeight(e,d-10):this._getDropdownHeight(e,c-10)}px`};return r||i?{...h,position:"fixed",left:`${a}px`,...this._getModalOrInlineReplyDropdownStyles(p,s,e-o)}:p?{...h,bottom:"100%",position:"absolute"}:{...h,top:"100%",position:"absolute"}})),this._getDropdownMinMaxWidth=(e,t)=>{const o=e-t-10;return{maxWidth:o,minWidth:Math.min(o,300)}},this._getModalFullViewportStyle=Object(h.a)((e=>({position:"absolute",top:`${e||0}px`,overflowX:"hidden",overflowY:"auto"}))),this.state={ariaDescendantId:y.b()},this._dropdownDomId=`typeaheadDropdownWrapped-${x}`,x+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,o=!(!this._textInputNode||!t);if(o!==this._typeaheadActive){this._typeaheadActive=o,e&&e(o);const t=this._getWindowSelectionY();t&&t!==this._windowSelectionY&&(this._windowSelectionY=t)}}resetSelectedItem(){this.setState({selectedItem:void 0})}}C.contextType=p.b,C.defaultProps={source:g.d.Compose};const S=l.a.create((e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,overflowX:"hidden",overflowY:"auto"},mask:{...l.a.absoluteFillObject,position:"fixed"},modalFullViewportStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"relative",width:"100%",zIndex:u.g}})));t.default=Object(w.a)(C,{component:"compose"})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.90bd8358.js.map