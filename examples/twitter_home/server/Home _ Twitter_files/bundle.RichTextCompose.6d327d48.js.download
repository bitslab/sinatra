(window.webpackJsonp=window.webpackJsonp||[]).push([[88,9,12,81],{"+/sI":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a("ERkP"),i=a.n(n),s=a("t62R"),o=a("a6qo"),r=a("rHpw"),l=a("TGcR");const c="animated_gif",d="video";class u extends i.a.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let a;if(t===c||"vine"===t)a=t===c?i.a.createElement(s.b,{weight:"bold"},"GIF"):i.a.createElement(l.a,{style:h.icon});else if(t===d&&e){const t=Math.trunc(e/6e4),n=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);a=i.a.createElement(s.b,{color:"white"},`${t}:${n}`)}return a?i.a.createElement(o.a,{align:"left"},a):null}}const h=r.a.create((e=>({icon:{color:e.colors.white}})));t.c=u},"+7q0":function(e,t,a){var n=a("eN33"),i=a("Pz+s"),s=a("zWgn"),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=o},"+fUG":function(e,t,a){var n=a("5pfJ"),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return i.call(t,e)?t[e]:void 0}},"+ooz":function(e,t,a){var n=a("8Zrg"),i=a("kwr2"),s=a("5VYK"),o=a("Coc+"),r=a("LzM7");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=r,e.exports=l},"/Imo":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),o=a.n(s),r=a("k/Ka"),l=a("qqsb"),c=a.n(l),d=a("/yvb"),u=a("rHpw");const h=c.a.i5450bec,p=c.a.f7432494;class m extends o.a.Component{constructor(...e){super(...e),this._handlePress=e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()},this._handleChange=e=>{const{onChange:t}=this.props,a=e.target,n=a.files;n.length&&t&&t(n),a.value=""},this._handleFileInputButtonRef=e=>{this._fileInput=e}}render(){const{accept:e,disabled:t,multiple:a,onChange:n,testID:s,...l}=this.props,c=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,i()({hoverLabel:e?{label:c?p:h}:void 0},l,{disabled:t,onPress:this._handlePress})),Object(r.a)("input",{accept:e,disabled:t,multiple:a,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:g.input,tabIndex:-1,testID:s,type:"file"}))}}m.defaultProps={disabled:!1,multiple:!1};const g=u.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=m},"/Rsk":function(e,t,a){"use strict";a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"h",(function(){return g})),a.d(t,"g",(function(){return b})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return w})),a.d(t,"i",(function(){return x}));var n=a("Ssj5"),i=a("oEOe"),s=a("kGix"),o=a("a/ea"),r=a("M6MT"),l=a("qlwE"),c=a("474o");const d="placePicker",u=Object.freeze({REQUEST:"rweb/placePicker/SEARCH_REQUEST",SUCCESS:"rweb/placePicker/SEARCH_SUCCESS",FAILURE:"rweb/placePicker/SEARCH_FAILURE"}),h=Object.freeze({initial:{fetchStatus:s.a.NONE},lastSearch:{fetchStatus:s.a.NONE},lastSelectedPlace:void 0});const p=e=>e.placePicker.initial.results,m=e=>e.placePicker.initial.fetchStatus,g=e=>e.placePicker.lastSearch.results,b=e=>e.placePicker.lastSearch.fetchStatus,f=e=>((e,t)=>null!=t?t:null==e?void 0:e.places.find((t=>(null==e?void 0:e.autotag_place_id)===t.place.id)))(p(e),(e=>e.placePicker.lastSelectedPlace)(e)),_=(e,t)=>(a,n,{api:s})=>Object(i.b)(a,{request:s.Places.search,params:e})({actionTypes:u,context:"SEARCH_PLACES_ACTION",meta:{resultSet:t}}),y=e=>(t,a,{api:n})=>{const i=Object(o.d)(a());return t(_({query_type:c.a.tweet_compose_location,lat:null==i?void 0:i.coords.latitude,long:null==i?void 0:i.coords.longitude,hacc:null==i?void 0:i.coords.accuracy,search_term:e},c.c.lastSearch))},v=()=>(e,t,{api:a})=>{const n=m(t()),i=p(t());if(n===s.a.LOADING||i)return Promise.resolve();const r=Object(o.d)(t());return r?e(_({lat:r.coords.latitude,long:r.coords.longitude,hacc:r.coords.accuracy,query_type:c.a.tweet_compose_location,count:50},c.c.initial)):Promise.resolve()},w=()=>(e,t,{api:a})=>Object(l.m)(t())&&Object(o.c)(t())===r.b.granted?e(Object(o.b)()).then((()=>e(v()))).then((()=>f(t()))):Promise.resolve(),C="rweb/placePicker/UPDATE_LAST_SELECTED_PLACE",x=e=>({type:C,payload:e});n.a.register({[d]:function(e=h,t){switch(t.type){case u.REQUEST:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:s.a.LOADING}}}case u.FAILURE:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:s.a.FAILED}}}case u.SUCCESS:{const{meta:{resultSet:a},payload:n}=t;return{...e,[a]:{fetchStatus:s.a.LOADED,results:n}}}case C:{const{payload:a}=t;return{...e,lastSelectedPlace:null!=a?a:void 0}}default:return e}}})},"07FG":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("cnVF");const i=e=>e===n.C},"0uGn":function(e,t,a){"use strict";a.d(t,"a",(function(){return ie}));a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("k/OQ"),r=a("/yvb"),l=a("t62R"),c=a("qqsb"),d=a.n(c),u=a("95Se"),h=a("7Mjr"),p=a("Mbn/"),m=a("zIWA"),g=a("1auM"),b=a("eYns"),f=a("zTrU"),_=e=>{const t=new Map;return e.forEach((([e,a])=>{t.set(e,a)})),t},y=a("mN6z"),v=a("jHSc"),w=a("EeFI"),C=a("7JQg"),x=a("feu+"),E=a("rHpw"),T=a("xZGM"),S="altTextInput",I="endEditingButton",R="altTextEducationSheetPrimaryAction",D=a("p+r5"),P=a("GTeL");var M=E.a.create((e=>({formTextInput:{width:"100%",backgroundColor:e.colors.navigationBackground,paddingHorizontal:e.spaces.space12,paddingBottom:0,borderTopWidth:e.spaces.space1,borderTopStyle:"solid",borderTopColor:e.colors.borderColor},attachmentContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}})));const k=d.a.feabf2a0,O=d.a.e36287c6,A=d.a.cf565d08;class L extends i.a.Component{constructor(...e){super(...e),this._renderInputHelperText=()=>{const{onShowEducation:e}=this.props;return e?i.a.createElement(l.b,{color:"link",onPress:e,withInteractiveStyling:!0},A):null},this._handleChange=e=>{const{currentMediaId:t,mediaItem:a,onChange:n}=this.props,{value:i}=e.target;a?n(i,a.id.toString()):t&&n(i,t)}}render(){const{autofocus:e,maxLength:t,mediaItem:a,orientedImage:n,value:o}=this.props;return i.a.createElement(s.a,{style:M.root},i.a.createElement(s.a,{style:M.attachmentContainer},i.a.createElement(P.a,{mediaItem:a,orientedImage:n}),i.a.createElement(D.a,{accessibilityLabel:k,autoFocus:e,helperText:this._renderInputHelperText(),label:O,maxLength:t,maxNumberOfLines:6,multiline:!0,name:"altTextInput",numberOfLines:2,onChange:this._handleChange,style:M.formTextInput,testID:S,value:o})))}}var F=a("rxPX");const B=(e,t)=>Object(T.I)(e,T.a);var N=Object(F.a)().propsFromState((()=>({showEducationOnMount:B}))).propsFromActions((()=>({addFlag:T.E}))).withAnalytics();const j=d.a.ffe9ec3a,z=d.a.j063b262,V=d.a.e57144f0,H=d.a.f9f9210c;class U extends i.a.Component{constructor(...e){super(...e),this.state={showAltTextEducationSheet:!1},this._handleOpenEducationPrompt=()=>{const{analytics:e}=this.props;this.setState({showAltTextEducationSheet:!0}),e.scribe({component:"education",action:"click"})},this._handleCloseEducationPrompt=()=>{this.setState({showAltTextEducationSheet:!1})},this._handleEducationPromptPrimaryAction=()=>{const{analytics:e}=this.props;this._handleCloseEducationPrompt(),e.scribe({component:"education",element:"alt_text_button",action:"click"})},this._handleEducationPromptSecondaryAction=()=>{const{history:e}=this.props;e.goBack()}}componentDidMount(){const{addFlag:e,analytics:t,showEducationOnMount:a}=this.props;a&&(this.setState({showAltTextEducationSheet:!0}),t.scribe({component:"education",action:"open"}),e(T.a))}render(){const{mediaItem:e,onAltTextChange:t,orientedImage:a,value:n}=this.props,{showAltTextEducationSheet:o}=this.state,r=e&&e.id.toString();return i.a.createElement(s.a,{style:W.root},o?i.a.createElement(x.a,{actionLabel:V,headline:j,onAction:this._handleEducationPromptPrimaryAction,onClose:this._handleCloseEducationPrompt,onSecondaryAction:this._handleEducationPromptSecondaryAction,primaryButtonTestID:R,secondaryActionLabel:H,subtext:z}):null,i.a.createElement(L,{autofocus:!0,currentMediaId:r,maxLength:1e3,mediaItem:e,onChange:t,onShowEducation:this._handleOpenEducationPrompt,orientedImage:a,value:n}))}}const W=E.a.create((e=>({root:{flexGrow:1}})));var q=N(U),G=a("9Q4p"),$=a("PrL8");const K={section:"alt_text"},Q={section:"crop"},X={section:"sensitive_media"},J=d.a.e070024a,Y=d.a.i2209530,Z=d.a.i7d24b36,ee=d.a.f96a38a2,te=d.a.hac7c548,ae=d.a.e3dbfba4,ne=d.a.dd4a83a6,ie={crop:"crop",altText:"alt_text",sensitiveMedia:"sensitive_media"};class se extends i.a.Component{constructor(e){super(e),this._cropper=i.a.createRef(),this._getMemoizedTabMetadata=Object(f.a)(((e,t)=>t&&e===ie.sensitiveMedia?{namespace:X,title:ne,renderer:this._renderSensitiveMediaTab}:e===ie.altText?{namespace:K,title:ae,renderer:this._renderAltTextTab}:{namespace:Q,title:te,renderer:this._renderCropTab})),this._renderTabContent=e=>{var t;const{location:a,sensitiveMediaTabEnabled:n}=this.props,r=this._getMemoizedTabMetadata(e,n),l=!(null!=(t=a.state)&&t.hideTabs),c=l?this._getTabLinks(e):[],d=r.renderer();return l&&c.length>1?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{accessibilityLabel:J,links:c}),i.a.createElement(s.a,{style:$.a.segmentedControlChildren},d)):d},this._renderAltTextTab=()=>{const{history:e}=this.props,{currentMediaId:t,mediaMetadata:a,orientedImage:n}=this.state,s=this._getCurrentMediaItem(),o=a[t]&&a[t].altText;return i.a.createElement(q,{history:e,key:t,mediaItem:s,onAltTextChange:this._handleAltTextChange,orientedImage:n.get(t),value:o})},this._renderCropTab=()=>{const{cropData:e,currentMediaId:t}=this.state,a=this._getCurrentMediaItem();return i.a.createElement(w.a,{defaultCropData:e.get(t),key:t,media:a,ref:this._cropper,withAspectRatioOptions:!0})},this._renderSensitiveMediaTab=()=>{const{currentMediaId:e,mediaMetadata:t,orientedImage:a}=this.state,n=this._getCurrentMediaItem(),s=t[e]&&t[e].sensitiveMediaWarning;return i.a.createElement(G.a,{currentWarnings:s,key:e,mediaItem:n,onWarningChange:this._handleSensitiveWarningChange,orientedImage:a.get(e)})},this._renderAppBarRightControl=()=>{const{isProcessing:e}=this.state,t=this._getNextMediaIndex(1),a=this._getNextMediaIndex(-1);return i.a.createElement(s.a,{style:$.a.rightControl},this._hasMediaAtIndex(a)||this._hasMediaAtIndex(t)?i.a.createElement(s.a,{style:[$.a.rightControl,$.a.leftRightButtons]},i.a.createElement(r.a,{accessibilityLabel:ee,disabled:!this._hasMediaAtIndex(a),icon:i.a.createElement(u.a,null),onPress:this._handleClickToMediaAtIndex(a),size:"small",style:$.a.prevButton,type:"primaryOutlined"}),i.a.createElement(r.a,{accessibilityLabel:Z,disabled:!this._hasMediaAtIndex(t),icon:i.a.createElement(h.a,null),onPress:this._handleClickToMediaAtIndex(t),size:"small",type:"primaryOutlined"})):null,i.a.createElement(r.a,{disabled:e,onPress:this._handleEndEditingClick,size:"small",style:$.a.saveButton,testID:I,type:"primaryFilled"},Y))},this._handleCancelEditingClick=e=>{this._scribeWithNamespace({action:"cancel"}),e()},this._handleClickTab=e=>{const{analytics:t}=this.props;this._handleSaveCropData(),this._scribeWithNamespace({element:e,action:"click"}),t.scribePageImpression()},this._getCurrentMediaItem=()=>{const{media:e}=this.props,{currentMediaId:t}=this.state;return e.find((e=>e.id===t))},this._getNextMediaIndex=e=>{const{media:t}=this.props,a=this._getCurrentMediaItem();return t.indexOf(a)+e},this._hasMediaAtIndex=e=>{const{media:t}=this.props;return e>=0&&e<t.length},this._handleClickToMediaAtIndex=e=>()=>{const{media:t}=this.props;if(this._hasMediaAtIndex(e)){this._handleSaveCropData();const a=t[e].id;this.setState({currentMediaId:a})}},this._saveMediaMetadata=()=>{const{media:e,setMediaMetadata:t}=this.props,{mediaMetadata:a}=this.state;e.forEach((e=>{t(e.id,a[e.id])}))},this._handleEndEditingClick=()=>{const{history:e}=this.props,t=this._cropper&&this._cropper.current,{cropData:a}=this.state;if(t||a.size){const{media:e,processMedia:n,updateMediaUpload:i}=this.props,{currentMediaId:s}=this.state;this.setState({isProcessing:!0});const o=t?_([...a,[s,t.getCropData()]]):a,r=e.map((e=>o.get(e.id)?(i({id:e.id,cropData:o.get(e.id)}),n(e.id)):Promise.resolve()));Promise.all(r).then((()=>{this._scribeWithNamespace({action:"done"})}))}this._saveMediaMetadata(),e.goBack()},this._handleAltTextChange=e=>{this.setState((t=>({mediaMetadata:{...t.mediaMetadata,[t.currentMediaId]:{...t.mediaMetadata[t.currentMediaId],altText:e}}})))},this._handleSensitiveWarningChange=(e,t)=>{this.setState((a=>{const n=a.mediaMetadata[a.currentMediaId]&&a.mediaMetadata[a.currentMediaId].sensitiveMediaWarning||new Set;return t?n.add(e):n.delete(e),{mediaMetadata:{...a.mediaMetadata,[a.currentMediaId]:{...a.mediaMetadata[a.currentMediaId],sensitiveMediaWarning:n}}}}))},this._handleSaveCropData=()=>{const e=this._cropper&&this._cropper.current;if(e){const{currentMediaId:t}=this.state,a=e.getCropData(),n=this._getCurrentMediaItem();if(n&&!Object(y.a)(a,this.state.cropData.get(t))&&(this.setState((e=>({orientedImage:_([...e.orientedImage,[t,null]])}))),n.originalMediaFile&&n.originalMediaFile instanceof g.a)){const{cropData:e}=n;Object(b.b)(n.originalMediaFile,{cropData:a||e}).then((e=>new g.a(e).withDimensionsAndOrientation().then((e=>{this.setState((n=>({orientedImage:_([...n.orientedImage,[t,e]]),cropData:_([...n.cropData,[t,a]])})))})))).catch((()=>{this.setState((e=>({orientedImage:_([...e.orientedImage,[t,void 0]])})))}))}this.setState((e=>({cropData:_([...e.cropData,[t,a]])})))}},this._scribeWithNamespace=e=>{const{analytics:t,sensitiveMediaTabEnabled:a}=this.props,n=this._getCurrentTab(),i=this._getMemoizedTabMetadata(n,a);t.scribe({...i.namespace,...e})},this._getMediaMetadata=e=>{const t={};return e.forEach((e=>t[e.id]=e.mediaMetadata)),t};const{initialMediaId:t,media:a}=e,n=this._getMediaMetadata(a);this.state={cropData:new Map,isProcessing:!1,mediaMetadata:n,currentMediaId:t||-1,orientedImage:new Map}}render(){const{history:e,sensitiveMediaTabEnabled:t}=this.props,a=this._getCurrentTab(),n=this._getMemoizedTabMetadata(a,t);return i.a.createElement(C.c,{namespace:n.namespace},i.a.createElement(v.b,{backButtonType:"back",containerStyle:$.a.root,documentTitle:n.title,history:e,onBackClick:this._handleCancelEditingClick,rightControl:this._renderAppBarRightControl(),title:n.title},this._renderTabContent(a)))}_getCurrentTab(){var e;const{location:t,sensitiveMediaTabEnabled:a}=this.props,n=null==(e=t.state)?void 0:e.tab;return a&&n===ie.sensitiveMedia?ie.sensitiveMedia:n===ie.altText?ie.altText:ie.crop}_getTabLinks(e){var t;const{analytics:a,location:n,sensitiveMediaTabEnabled:s}=this.props,o=this._getCurrentMediaItem(),r=[];return null!=o&&null!=(t=o.originalMediaFile)&&t.isImage&&r.push({to:{...n,state:{...n.state,tab:ie.crop}},label:i.a.createElement(p.a,null),key:ie.crop,accessibilityLabel:te,isActive:()=>e===ie.crop,onClick:()=>a.scribePageImpression()}),r.push({to:{...n,state:{...n.state,tab:ie.altText}},label:i.a.createElement(l.b,{weight:"bold"},"ALT"),key:ie.altText,accessibilityLabel:ae,isActive:()=>e===ie.altText,onClick:()=>this._handleClickTab("alt_text_button")}),s&&r.push({to:{...n,state:{...n.state,tab:ie.sensitiveMedia}},label:i.a.createElement(m.a,null),key:ie.sensitiveMedia,accessibilityLabel:ne,isActive:()=>e===ie.sensitiveMedia,onClick:()=>this._handleClickTab("sensitive_media_tab")}),r}}t.b=se},"1sLo":function(e,t,a){var n=a("JBn+"),i=a("OfKG"),s=a("sCL+"),o=a("H87J"),r=a("SU8Q"),l=a("S0iI"),c=Math.min;e.exports=function(e,t,a){for(var d=a?s:i,u=e[0].length,h=e.length,p=h,m=Array(h),g=1/0,b=[];p--;){var f=e[p];p&&t&&(f=o(f,r(t))),g=c(f.length,g),m[p]=!a&&(t||u>=120&&f.length>=120)?new n(p&&f):void 0}f=e[0];var _=-1,y=m[0];e:for(;++_<u&&b.length<g;){var v=f[_],w=t?t(v):v;if(v=a||0!==v?v:0,!(y?l(y,w):d(b,w,a))){for(p=h;--p;){var C=m[p];if(!(C?l(C,w):d(e[p],w,a)))continue e}y&&y.push(w),b.push(v)}}return b}},"21U8":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("qqsb"),r=a.n(o),l=a("k/Ka"),c=a("Lsrn");const d=(e={})=>Object(l.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 19.944H4.25c-1.24 0-2.25-1.01-2.25-2.25V6.306c0-1.24 1.01-2.25 2.25-2.25h15.5c1.24 0 2.25 1.01 2.25 2.25v11.39c0 1.24-1.01 2.248-2.25 2.248zM4.25 5.556c-.413 0-.75.337-.75.75v11.39c0 .412.337.75.75.75h15.5c.413 0 .75-.338.75-.75V6.305c0-.413-.337-.75-.75-.75H4.25z"})));d.metadata={width:24,height:24};var u=d;const h=(e={})=>Object(l.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 19.89H4.25C3.01 19.89 2 18.88 2 17.64v-7.28c0-1.24 1.01-2.25 2.25-2.25h15.5c1.24 0 2.25 1.01 2.25 2.25v7.277c0 1.24-1.01 2.25-2.25 2.25zM4.25 9.61c-.413 0-.75.338-.75.75v7.278c0 .413.337.75.75.75h15.5c.413 0 .75-.337.75-.75V10.36c0-.412-.337-.75-.75-.75H4.25z"})));h.metadata={width:24,height:24};var p=h;const m=(e={})=>Object(l.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 22H4.25C3.01 22 2 20.99 2 19.75V4.25C2 3.01 3.01 2 4.25 2h15.5C20.99 2 22 3.01 22 4.25v15.5c0 1.24-1.01 2.25-2.25 2.25zM4.25 3.5c-.413 0-.75.337-.75.75v15.5c0 .413.337.75.75.75h15.5c.413 0 .75-.337.75-.75V4.25c0-.413-.337-.75-.75-.75H4.25z"})));m.metadata={width:24,height:24};var g=m;const b=(e={})=>Object(l.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}),i.a.createElement("path",{d:"M15.21 11c0 .41-.34.75-.75.75h-2.71v2.71c0 .41-.34.75-.75.75s-.75-.34-.75-.75v-2.71H7.54c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.71V7.54c0-.41.34-.75.75-.75s.75.34.75.75v2.71h2.71c.41 0 .75.34.75.75z"})));b.metadata={width:24,height:24};var f=b;const _=(e={})=>Object(l.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[c.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}),i.a.createElement("path",{d:"M14.46 11.75H7.54c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h6.92c.415 0 .75.336.75.75s-.335.75-.75.75z"})));_.metadata={width:24,height:24};var y=_,v=a("aITJ"),w=a("/yvb"),C=a("3rX5"),x=a("ZvMt"),E=a("9RkS"),T=a("rHpw"),S=a("rOXj");const I=T.a.create((e=>({mask:{backgroundColor:"transparent",borderWidth:e.spaces.space4,borderColor:e.colors.primary,boxShadow:`0 0 0 9999px ${e.colors.activeFaintGray}`},circle:{borderRadius:e.borderRadii.infinite}})));var R=({circle:e,height:t,width:a})=>i.a.createElement(s.a,{pointerEvents:"none",style:[I.mask,{width:a,height:t},e&&I.circle]}),D=a("97Jx"),P=a.n(D),M=a("7ep7"),k=a("CHgo");class O extends i.a.Component{constructor(e){super(e),this._previousTouchDistance=0,this._previousPositionX=0,this._previousPositionY=0,this._centerPosition={x:0,y:0},this._panResponder={},this._setRef=e=>{const{onPanEnd:t,onPanMove:a,onPinchMove:n,onWheel:i}=this.props;if(e){(a||t||n)&&(this._removeTouchMoveToScrollListener=Object(k.a)(e,this._preventDefaultEvent,!1)),i&&(this._removeScrollToScaleListener=Object(k.b)(e,this._preventDefaultEvent,!1));const s=e.getBoundingClientRect();this._centerPosition={x:s.width/2+s.left,y:s.height/2+s.top}}},this._preventDefaultEvent=e=>{e.preventDefault()},this._handlePanResponderMove=(e,t)=>{const{onPanMove:a,onPinchMove:n}=this.props,i=e.nativeEvent.touches;if(2===t.numberActiveTouches){if(n){const e=(s=i[0],o=i[1],Math.sqrt(Math.pow(s.pageY-o.pageY,2)+Math.pow(s.pageX-o.pageX,2))),{pageX:t,pageY:a}=((e,t)=>({pageX:Math.min(t.pageX,e.pageX)+Math.abs(t.pageX-e.pageX)/2,pageY:Math.min(t.pageY,e.pageY)+Math.abs(t.pageY-e.pageY)/2}))(i[0],i[1]),r=this._previousPositionX?t-this._previousPositionX:0,l=this._previousPositionY?a-this._previousPositionY:0,c=this._previousTouchDistance?e-this._previousTouchDistance:0;this._previousPositionX=t,this._previousPositionY=a,this._previousTouchDistance=e;const{x:d,y:u}=this._centerPosition;n(c,d-t,u-a,r,l)}}else a&&a(t.dx,t.dy);var s,o;document.addEventListener("selectstart",this._preventDefaultEvent,!1)},this._handlePanResponderEnd=(e,t)=>{this.props.onPanEnd&&this.props.onPanEnd(t.dx,t.dy),this.props.onPinchMove&&(this._previousTouchDistance=0),this._previousPositionX=0,this._previousPositionY=0,this._removeSelectStartListener()},this._handleWheel=e=>{const{clientX:t,clientY:a,deltaX:n,deltaY:i}=e,{x:s,y:o}=this._centerPosition,r=s-t,l=o-a;this.props.onWheel&&this.props.onWheel(n,i,r,l)},this._panResponder=M.a.create({onStartShouldSetPanResponder:()=>!0,onMoveShouldSetPanResponder:()=>!0,onPanResponderMove:this._handlePanResponderMove,onPanResponderRelease:this._handlePanResponderEnd,onPanResponderTerminate:this._handlePanResponderEnd}),this._removeSelectStartListener=()=>document.removeEventListener("selectstart",this._preventDefaultEvent,!1)}render(){const{children:e,onPanEnd:t,onPanMove:a,onPinchMove:n,onWheel:o,...r}=this.props;return i.a.createElement(s.a,P()({},r,{onWheel:this._handleWheel,ref:this._setRef},this._panResponder.panHandlers),this.props.children)}componentWillUnmount(){this._removeTouchMoveToScrollListener&&this._removeTouchMoveToScrollListener(),this._removeScrollToScaleListener&&this._removeScrollToScaleListener(),this._removeSelectStartListener()}}var A=O;const L=r.a.d85bc1b8,F=r.a.f596ace8,B=r.a.df031fca,N=r.a.b40332c6,j=r.a.e547b368,z=r.a.f7571204,V=r.a.e6e16812,H=Math.log2||function(e){return Math.log(e)*Math.LOG2E};class U extends i.a.Component{constructor(e){var t;super(e),this._previousLeft=0,this._previousTop=0,this._panStyles={top:0,left:0},this._shouldShowZoomControl=()=>(!v.b.isMobileOS()||!S.a.isTouchSupported())&&this.props.withZoomControl,this._renderControls=()=>{const{image:e,withAspectRatioOptions:t}=this.props,{aspectRatio:a}=this.state,n=e.width/e.height,o=this._shouldShowZoomControl();return t||o?i.a.createElement(s.a,{style:W.controlsContainer},t?i.a.createElement(s.a,{style:W.ratioContainer},i.a.createElement(w.a,{accessibilityLabel:F,borderColor:"transparent",color:a===n?"primary":"gray700",hoverLabel:{label:j},icon:i.a.createElement(u,null),onPress:this._setAspectRatio(n),size:"medium"}),i.a.createElement(w.a,{accessibilityLabel:B,borderColor:"transparent",color:a===16/9?"primary":"gray700",hoverLabel:{label:z},icon:i.a.createElement(p,null),onPress:this._setAspectRatio(16/9),size:"medium"}),i.a.createElement(w.a,{accessibilityLabel:N,borderColor:"transparent",color:1===a?"primary":"gray700",hoverLabel:{label:V},icon:i.a.createElement(g,null),onPress:this._setAspectRatio(1),size:"medium"})):null,o?i.a.createElement(s.a,{style:W.zoomContainer},i.a.createElement(E.a,{accessibilityLabel:L,max:this._maxScale,maxIcon:i.a.createElement(f,{style:W.icon}),min:0,minIcon:i.a.createElement(y,{style:W.icon}),onChange:this._handleScaleChange,step:"any",value:this.state.imageScale})):null):null},this._setImageRef=e=>{this._imageRef=e},this._handleScaleChange=e=>{this.setState({imageScale:e})},this._getImageDimensions=()=>{const{imageScale:e}=this.state,t=this.props.image.width/this.props.image.height,{height:a,width:n}=this._getMaskDimensions(),{height:i,width:s}=x.a.getCoverDimensions({width:n,height:a},t);return{width:s*Math.pow(2,e),height:i*Math.pow(2,e)}},this._getMaskDimensions=()=>{const{aspectRatio:e,containerHeight:t,containerWidth:a}=this.state,{height:n,width:i}=x.a.getContainDimensions({width:a-50,height:t-50},e);return{width:i,height:n}},this._handleLayout=e=>{const{height:t,width:a}=e.nativeEvent.layout;this.state.containerHeight||this.state.containerWidth?this.setState({containerHeight:t,containerWidth:a}):(this.setState({containerHeight:t,containerWidth:a}),this._setDefaultCropData())},this._setDefaultCropData=()=>{const{defaultCropData:e,image:t}=this.props;if(!e)return;const{width:a}=this._getImageDimensions(),{width:n}=this._getMaskDimensions(),i=a/t.width,s=H(n/(e.width*i));this.setState({imageScale:s});const{left:o,top:r}=this._getUnscaledCropData();this._panStyles.top=r-e.top*i*Math.pow(2,s),this._previousTop=this._panStyles.top,this._panStyles.left=o-e.left*i*Math.pow(2,s),this._previousLeft=this._panStyles.left,this._updateNativeStyles()},this._handleWheel=(e,t,a,n)=>{const i=-1*t/500;this.setState((({imageScale:e})=>{const t=Math.min(this._maxScale,Math.max(e+i,0));return this._panStyles.left+=a*(t-e),this._panStyles.top+=n*(t-e),this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top,{imageScale:t}}))},this._handlePanMove=(e,t)=>{this._panStyles.left=this._previousLeft+e,this._panStyles.top=this._previousTop+t,this._updateNativeStyles(),this._adjustToInBounds()},this._handlePanEnd=(e,t)=>{this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top},this._handlePinchMove=(e,t,a,n,i)=>{const s=e/200;this.setState((({imageScale:e})=>{const o=Math.min(this._maxScale,Math.max(e+s,0));return this._panStyles.left+=t*(o-e)+n,this._panStyles.top+=a*(o-e)+i,this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top,{imageScale:o}}))},this._adjustToInBounds=()=>{const e=this._getUnscaledCropData(),t=this._getImageDimensions(),a=e.left,n=e.top,i=e.left+e.width-t.width,s=e.top+e.height-t.height;let o=!1;a<0&&(o=!0,this._panStyles.left+=a,this._previousLeft+=a),n<0&&(o=!0,this._panStyles.top+=n,this._previousTop+=n),i>0&&(o=!0,this._panStyles.left+=i,this._previousLeft+=i),s>0&&(o=!0,this._panStyles.top+=s,this._previousTop+=s),o&&this._updateNativeStyles()},this._updateNativeStyles=()=>{const{left:e,top:t}=this._panStyles;this._imageRef&&this._imageRef.setNativeProps({style:{transform:[{translate3d:`${e}px, ${t}px, 0`}]}})},this._getUnscaledCropData=()=>{const{height:e,width:t}=this._getImageDimensions(),{height:a,width:n}=this._getMaskDimensions(),{left:i,top:s}=this._panStyles;return{top:(e-a)/2-s,left:(t-n)/2-i,width:n,height:a}},this._setAspectRatio=e=>()=>{this.setState({aspectRatio:e})},this.state={aspectRatio:e.defaultAspectRatio||e.image.width/e.image.height,imageScale:0,containerHeight:0,containerWidth:0},this._maxScale=(t=e.image,Math.max(Math.min(H(t.width/150),H(t.height/150),3),.5))}render(){const{circle:e,image:t,withZoomControl:a}=this.props,{height:n,width:o}=this._getImageDimensions(),{height:r,width:l}=this._getMaskDimensions(),c=this.state.containerWidth&&this.state.containerHeight;return i.a.createElement(s.a,{style:W.container},i.a.createElement(A,{onLayout:this._handleLayout,onPanEnd:this._handlePanEnd,onPanMove:this._handlePanMove,onPinchMove:a?this._handlePinchMove:void 0,onWheel:a?this._handleWheel:void 0,style:W.root},c?i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{ref:this._setImageRef,source:{uri:t.src,width:o,height:n},style:W.image}),i.a.createElement(R,{circle:e,height:r,width:l})):null),c?this._renderControls():null)}componentDidUpdate(e,t){this._updateNativeStyles(),this._adjustToInBounds()}getCropData(){const{width:e}=this._getImageDimensions(),t=this.props.image.width/e,a=this._getUnscaledCropData();return{aspectRatio:this.state.aspectRatio,top:Math.round(t*a.top),left:Math.round(t*a.left),width:Math.round(t*a.width),height:Math.round(t*a.height)}}}U.defaultProps={circle:!1,withZoomControl:!0};const W=T.a.create((e=>({container:{flexGrow:1,flexShrink:1},controlsContainer:{backgroundColor:e.colors.navigationBackground,minHeight:e.spaces.space20,flexDirection:"row",paddingVertical:e.spaces.space4,alignSelf:"stretch",justifyContent:"center",alignItems:"center"},ratioContainer:{flexBasis:0,flexGrow:1,flexShrink:0,flexDirection:"row",justifyContent:"space-around"},zoomContainer:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center",height:e.spaces.space40,paddingHorizontal:e.spaces.space20,maxWidth:400},root:{flexGrow:1,flexShrink:1,overflow:"hidden",justifyContent:"center",alignItems:"center",cursor:"move"},image:{position:"absolute"},icon:{color:e.colors.gray700}})));t.a=U},"2Fbm":function(e,t,a){var n=a("5pfJ");e.exports=function(){this.__data__=n?n(null):{},this.size=0}},"2WeA":function(e,t,a){"use strict";a.r(t);a("ERkP");var n=a("ORQL"),i=a("pcjM");t.default=Object(n.a)(i.default)},"2q8g":function(e,t,a){var n=a("Dhk8"),i=a("tQYX");e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"3KBa":function(e,t,a){var n=a("IBsm")["__core-js_shared__"];e.exports=n},"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("qqsb"),i=a.n(n),s=a("pXBW"),o=a("1YZw"),r=a("SrIh");const l=i.a.a5d4fda0,c=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:n}=a;return!a instanceof s.a&&(a.message=`Strato error occurred in ${n.id}: ${n.action}`),Object(r.a)(a,{extra:{context:n,isStrato:!0}}),t?Object(o.b)({text:e}):[]}})},"474o":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));const n=Object.freeze({profile_location:"profile_location",tweet_compose_location:"tweet_compose_location"}),i=Object.freeze({foursquare:"foursquare",yelp:"yelp"}),s=Object.freeze({initial:"initial",lastSearch:"lastSearch"})},"4bHO":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"4p/L":function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},"5VYK":function(e,t,a){var n=a("6QIk");e.exports=function(e){var t=this.__data__,a=n(t,e);return a<0?void 0:t[a][1]}},"5emT":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("Lsrn");const r=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M14.548 11.634c-1.207 0-2.188-.98-2.188-2.188 0-.664.302-1.25.77-1.653-.363-.097-.736-.165-1.13-.165-2.416 0-4.375 1.96-4.375 4.376S9.585 16.38 12 16.38c2.418 0 4.377-1.96 4.377-4.376 0-.4-.07-.78-.17-1.146-.402.47-.992.776-1.66.776z"}),i.a.createElement("path",{d:"M12 19.79c-7.228 0-10.12-6.724-10.24-7.01-.254-.466-.254-1.105.035-1.642C1.88 10.923 4.772 4.2 12 4.2s10.12 6.723 10.24 7.01c.254.465.254 1.104-.035 1.64-.085.216-2.977 6.94-10.205 6.94zm0-14c-6.154 0-8.668 5.787-8.772 6.033-.068.135-.068.208-.033.273.137.316 2.65 6.104 8.805 6.104 6.18 0 8.747-5.973 8.772-6.033.07-.136.07-.21.034-.274-.138-.316-2.652-6.103-8.806-6.103z"})));r.metadata={width:24,height:24},t.a=r},"5nKN":function(e,t,a){var n=a("2q8g"),i=a("9vbJ"),s=a("tQYX"),o=a("c18h"),r=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(n(e)?h:r).test(o(e))}},"5pfJ":function(e,t,a){var n=a("vxC8")(Object,"create");e.exports=n},"6QIk":function(e,t,a){var n=a("pPzx");e.exports=function(e,t){for(var a=e.length;a--;)if(n(e[a][0],t))return a;return-1}},"6UKJ":function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"6XNv":function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("shC7"),r=a("MWbm"),l=a("FG+G"),c=a("4r2z"),d=a("piX5"),u=a("t62R"),h=a("rHpw");const p=i.a.forwardRef(((e,t)=>Object(s.a)("select",{...e,ref:t}))),m=e=>Object(s.a)("option",e);let g=1;class b extends i.a.PureComponent{constructor(e){super(e),this._selectRef=i.a.createRef(),this.state={isFocused:!1},this._handleChange=e=>{const{onChange:t,withEmptyOption:a}=this.props,{selectedIndex:n,value:i}=e.target;t&&t(i,n-(a?1:0))},this._handleBlur=e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()},this._handleFocus=e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()},this._id=`SELECTOR_${g}`,this._errorID=`${this._id}_ERROR`,this._helperID=`${this._id}_HELP`,this._labelID=`${this._id}_LABEL`,g+=1}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{accessibilityDescribedBy:e,disabled:t,errorText:a,hasError:n,helperText:s,options:g,style:b,testID:_,value:y,withEmptyOption:v}=this.props,{isFocused:w}=this.state,C=u.b.getLanguage(),x="ja"===C?h.a.theme.fontFamilies.japan:o.a.getConstants().isRTL||c.a.isLocaleRTL(C)?h.a.theme.fontFamilies.rtl:h.a.theme.fontFamilies.normal,E=void 0===n?!!a:n,T=new Set;a&&T.add(this._errorID),e&&T.add(e),s&&T.add(this._helperID);const S=T.size?[...T].join(" "):void 0;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{style:[d.a.border,f.container,t&&d.a.disabled,w&&d.a.focusedBorderValid,E&&d.a.invalidBorderColor,w&&E&&d.a.focusedBorderInvalid,b]},this._renderLabel(),i.a.createElement(p,{accessibilityDescribedBy:S,accessibilityInvalid:E,accessibilityLabelledBy:this._labelID,disabled:t,nativeID:this._id,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[f.select,{fontFamily:x},t&&d.a.disabled],testID:_||"",value:y},v?i.a.createElement(m,{disabled:!0,style:f.option,value:""}):null,g.map((e=>{const{disabled:t,label:a,value:n}=e;return i.a.createElement(m,{disabled:t,key:`${a}-${n}`,style:f.option,value:n},a)}))),i.a.createElement(l.a,{style:[f.dropdownCaret,w&&d.a.validColor,!(!n&&!a)&&d.a.invalidColor]})),s?this._renderHelperText():null,E&&a?this._renderErrorText():null)}_renderLabel(){const{errorText:e,hasError:t,label:a}=this.props,{isFocused:n}=this.state;return i.a.createElement(u.b,{accessibilityRole:"label",color:t||e?"red500":n?"primary":"gray700",nativeID:this._labelID,style:f.label},a)}_renderHelperText(){return i.a.createElement(r.a,{accessibilityLiveRegion:"polite"},i.a.createElement(u.b,{color:"gray700",nativeID:this._helperID,style:f.helperText},this.props.helperText))}_renderErrorText(){return i.a.createElement(r.a,{accessibilityLiveRegion:"polite"},i.a.createElement(u.b,{color:"red500",nativeID:this._errorID,style:f.helperText},this.props.errorText))}}b.defaultProps={disabled:!1,autofocus:!1,withEmptyOption:!1},b.propTypes={};const f=h.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},dropdownCaret:{color:e.colors.gray700,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:e.spaces.space12},label:{position:"absolute",fontSize:e.fontSizes.subtext2,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space8,pointerEvents:"none",lineHeight:e.lineHeights.subtext2},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.headline2,lineHeight:e.lineHeights.headline2,margin:0,marginTop:e.spaces.space16,outlineStyle:"none",padding:0,paddingTop:e.spaces.space12,paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8},helperText:{fontSize:e.fontSizes.subtext2,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space2}})));t.a=b},"6vad":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("7Mjr"),r=a("t62R"),l=a("I4+6"),c=a("cm6r"),d=a("rHpw"),u=a("EHV7");const h=d.a.create((e=>({icon:{color:e.colors.primary,height:e.fontSizes.title4,paddingRight:e.spaces.space12,width:e.fontSizes.title4}}))),p=Object.freeze({TopicFilled:"TOPIC_FILLED"});const m=d.a.create((e=>({root:{justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},mainContent:{flexDirection:"row"},subtext:{alignSelf:"flex-start"},withSubtext:{alignSelf:"center"},icon:{alignSelf:"flex-start",height:e.spaces.space20,justifyContent:"center"},iconArrow:{color:e.colors.text},rightControlGroup:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1,alignSelf:"center"}})));t.b=function({icon:e,landingUrl:t,nativeID:a,rightControl:n,style:g,subtext:b,testID:f,text:_}){const y=(e=>{switch(e){case p.TopicFilled:return i.a.createElement(u.a,{style:h.icon});default:return null}})(e),v=b?null:m.withSubtext,w=l.a.generate({backgroundColor:d.a.theme.colors.gray0,color:d.a.theme.colors.cellBackground,customFocusBackgroundColor:d.a.theme.colors.gray0,customHoverBackgroundColor:d.a.theme.colors.gray0,customPressedBackgroundColor:d.a.theme.colors.gray0});return i.a.createElement(c.a,{interactiveStyles:t?w:null,link:null==t?void 0:t.url,nativeID:a,style:[m.root,g],testID:f},i.a.createElement(s.a,{accessibilityLevel:2,accessibilityRole:"heading",style:m.mainContent},i.a.createElement(s.a,{style:m.icon},y),i.a.createElement(r.b,{numberOfLines:3,size:"headline1",style:v,weight:"heavy",withHashflags:!0},_),i.a.createElement(s.a,{style:m.rightControlGroup},t?i.a.createElement(s.a,{style:v},i.a.createElement(o.a,{style:m.iconArrow})):null,n?i.a.createElement(s.a,null,n):null)),b?i.a.createElement(r.b,{color:"gray700",numberOfLines:2,size:"subtext2",style:m.subtext,withHashflags:!0},b):null)}},"7Pat":function(e,t,a){var n=a("+7q0"),i=a("kG2z")(n);e.exports=i},"7myi":function(e,t,a){"use strict";a("kYxP"),a("849X");var n=a("ERkP"),i=a.n(n),s=a("2dXj"),o=a("oEoC"),r=a("GZwR"),l=a("dzqK"),c=a("4bHO");class d extends i.a.Component{constructor(...e){super(...e),this._genericWrapperRef=i.a.createRef(),this.state={queryContext:void 0,canShowTypeahead:!1},this.render=()=>{const{children:e,composeCommunityId:t,contextText:a,isInline:n,isInlineReply:o,onTypeaheadStateChange:l,source:c}=this.props,{canShowTypeahead:d,queryContext:u}=this.state,h=d&&u?{word:u.word,resultType:u.resultType}:void 0;return i.a.createElement(s.a,{composeCommunityId:t,contextText:a,isInline:n,isInlineReply:o,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:l,query:h,ref:this._genericWrapperRef,source:c||r.d.Compose},e(this._handleInputChange))},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(c.a)(e,a.resultType),{newCursor:i,newTweetText:s}=this._replaceToken(n,a);t({target:{value:s}}),this._updateDOMTextArea(i,s)}this._setQueryContext(void 0)},this._updateDOMTextArea=(e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())},this._handleInputChange=e=>{if(Object(l.a)(e))throw new Error("PlainTextTypeaheadComposeWrapper cannot handle rich text input changes");const t=e&&(e.currentTarget||e.target),{queryContext:a}=this.state;this._textAreaRef=t;const n=a&&a.word,i=t.value,{end:s,start:r,word:c}=o.c(t.selectionStart,i),d=o.e(c||"","compose");if((null==d?void 0:d.q)!==n)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===r)this._setQueryContext(void 0);else if(d){const{q:e,result_type:a}=d;this._setQueryContext({word:e,resultType:a,fullText:t.value,startIndex:r,endIndex:s})}else this._setQueryContext(void 0)},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{endIndex:a,fullText:n,startIndex:i}=t,s=n.slice(0,i);return{newTweetText:s+e+n.slice(a),newCursor:s.length+e.length}}}t.a=d},"8Zrg":function(e,t){e.exports=function(){this.__data__=[],this.size=0}},"9Jxp":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("MWbm"),l=a("rHpw"),c=a("CXUS");const d=l.a.create((()=>({hidden:{opacity:0}})));t.a=e=>{const{children:t,disableInteractiveElementBlocking:a,draggableId:n,fromVirtualList:s,index:l,isBeingDragged:u,isDragDisabled:h,lockYAxis:p}=e;return s&&u?o.a.createElement(r.a,{style:d.hidden},t):o.a.createElement(c.b,{disableInteractiveElementBlocking:a,draggableId:n,index:l,isDragDisabled:h},(e=>{const a=e.draggableProps.style,n=p?(e=>{if(e.transform){const t=`translate(0px${e.transform.slice(e.transform.indexOf(","),e.transform.length)}`;return{...e,transform:t}}return e})(a):a;return o.a.createElement("div",i()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:n}),t)}))}},"9Q4p":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("PbQQ"),r=a("6vad"),l=a("e0ey"),c=a("rHpw"),d=a("qqsb"),u=a.n(d),h=a("ZkMC"),p=a("GTeL");const m=u.a.j9cf5950,g=u.a.d69a782e,b=u.a.faf745fa,f=u.a.b96e6682,_=u.a.h2437f26;function y(e){const{currentWarnings:t,mediaItem:a,onWarningChange:n,orientedImage:c}=e,d=[{label:b,value:"adult_content"},{label:f,value:"graphic_violence"},{label:_,value:"other"}],u=o.b.useOpaqueIdentifier(),y=i.a.createElement(p.a,{mediaItem:a,orientedImage:c});return i.a.createElement(s.a,{style:v.root},i.a.createElement(s.a,{style:v.modalContainer},null!=t&&t.size?i.a.createElement(h.a,{revealableTombstoneConfig:h.c,sensitiveMediaWarnings:t,withRoundedCorners:!1},y):y,i.a.createElement(r.b,{nativeID:u,subtext:g,text:m}),i.a.createElement(s.a,{accessibilityLabelledBy:u,accessibilityRole:"group"},d.map((({label:e,value:a})=>i.a.createElement(l.a,{checked:t&&t.has(a),key:a,label:e,name:a,onChange:n}))))))}const v=c.a.create((e=>({modalContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}})))},"9SKQ":function(e,t,a){var n=a("JNqh");e.exports=function(e){return n(this,e).has(e)}},"9gvj":function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("shC7"),o=a("MWbm"),r=a("qqsb"),l=a.n(r),c=a("nb/L"),d=a("hOZg"),u=a("zTrU"),h=a("TIdA"),p=a("t62R"),m=a("A91F"),g=a("SV7d"),b=a("/yvb"),f=a("XurV"),_=a("rHpw");const y=_.a.create((e=>({root:{borderRadius:e.borderRadii.medium,display:"flex",flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},contentContainer:{display:"flex",flexDirection:"row",flex:1},contentTextContainer:{flex:1,alignItems:"flex-start",justifyContent:"center"},dismissButton:{paddingLeft:e.spaces.space12},icon:{color:e.colors.text,marginRight:e.spaces.space8},illustration:{marginRight:e.spaces.space8,height:e.spaces.space28,width:e.spaces.space28},arrow:{borderStyle:"none"},arrowContainer:{position:"absolute",display:"flex",width:"100%",alignItems:"center"},arrowDirectionUp:{top:`calc(-${e.spaces.space12})`},arrowDirectionDown:{bottom:`calc(${e.spaces.space8} - ${e.spaces.space2} )`},arrowDown:{transform:"rotate(180deg)",position:"absolute"},containerDown:{marginBottom:e.spaces.space16},containerUp:{marginTop:e.spaces.space16}}))),v=_.a.create((e=>({primary:{backgroundColor:e.colors.primary0},purple:{backgroundColor:e.colors.purple0},plum:{backgroundColor:e.colors.plum0}}))),w=_.a.create((e=>({primary:{color:e.colors.primary0},purple:{color:e.colors.purple0},plum:{color:e.colors.plum0}})));t.a=({backgroundColor:e="primary",behavioralEventContext:t,containerRef:a,icon:n,illustration:r,onClose:_,text:C})=>{var x;const E=l.a.af8fa2ae,T=Object(f.useOpaqueIdentifier)(),[S,I]=i.a.useState(void 0),R=s.a.getConstants().isRTL,D=i.a.useRef(0),P=i.a.useRef(0),M=null!=(x=null==t?void 0:t.viewType)?x:"inline_tooltip",k=Object(u.a)((e=>({viewType:e})))(M),O=(()=>{if(null!=a&&a.current&&S){const{left:e,top:t,width:n}=a.current.getBoundingClientRect();D.current=t;const i=e+n/2-S;return{left:R?void 0:i,right:R?i:void 0}}})(),A=P.current<D.current,L=A?[y.arrowDirectionDown]:[y.arrowDirectionUp],F=A?[y.containerDown]:[y.containerUp];return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{behavioralEventContext:k},i.a.createElement(o.a,{onLayout:e=>{const{nativeEvent:{layout:{left:t,top:a,width:n}}}=e;P.current=a;I(t+n/2)},style:[y.root,v[e],(null==a?void 0:a.current)&&F]},null!=a&&a.current?i.a.createElement(o.a,{style:[L,y.arrowContainer,O]},i.a.createElement(c.a,{style:[y.arrow,w[e],A&&y.arrowDown]})):null,i.a.createElement(o.a,{style:y.contentContainer},n&&!r?(N=n,i.a.createElement(N,{style:[y.icon,{alignItem:"flex-start"}]})):null,r&&!n?(B=r,i.a.createElement(o.a,{style:y.illustration},i.a.createElement(h.a,{accessibilityLabel:"",aspectMode:m.a.SQUARE,image:B}))):null,i.a.createElement(o.a,{style:y.contentTextContainer},i.a.createElement(p.b,{nativeID:T},C))),i.a.createElement(o.a,{style:y.dismissButton},i.a.createElement(b.a,{accessibilityDescribedBy:T,accessibilityLabel:E,icon:i.a.createElement(d.a,null),onPress:_,size:"xSmall",type:"primaryText"})))));var B,N}},"9vbJ":function(e,t,a){var n,i=a("3KBa"),s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!s&&s in e}},"9y2L":function(e,t,a){var n=a("2q8g"),i=a("t0L4");e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},CDB5:function(e,t,a){"use strict";a.d(t,"m",(function(){return _})),a.d(t,"l",(function(){return v})),a.d(t,"f",(function(){return C})),a.d(t,"d",(function(){return E})),a.d(t,"g",(function(){return T})),a.d(t,"e",(function(){return I})),a.d(t,"i",(function(){return D})),a.d(t,"j",(function(){return P})),a.d(t,"k",(function(){return M})),a.d(t,"h",(function(){return k})),a.d(t,"a",(function(){return A})),a.d(t,"b",(function(){return F})),a.d(t,"c",(function(){return j}));a("kYxP");var n=a("fEA7"),i=a.n(n),s=a("ude7"),o=a("lnti"),r=a("/NU0"),l=a("07FG"),c=a("Ssj5"),d=a("oEOe"),u=a("uKEd"),h=a("xPna"),p=a("xCUF"),m=a("AspN");const g="dmComposer",b={};const f=e=>{const{conversation_id:t,id:a,localMediaId:n,recipient_ids:i,sender_id:s,text:o,attachment:r={},error:l}=e,c=Date.now().toString();return{conversation_id:t,recipient_ids:i,error:l,id:a,is_draft:!0,message_data:{attachment:r,localMediaId:n,sender_id:s,text:o,time:c},type:"message",time:c}},_=e=>(t,a,{api:n})=>{const{senderId:c,cardUrl:g,conversationId:b,localMediaId:_,recipients:y=[],requestId:v=i.a.v1(),tweetAttachment:w,quickReply:C,text:x}=e||{};t(V(b));const T=a();let S=_||R(a(),b);null===S&&(S=[]);const[I]=m.k(T,S),{mediaFile:D,mediaMetadata:P}=I||{},M=y.length>0&&y.join(","),O={};D&&D.isGif?O.extraInitParams="&media_category=dm_gif":D&&D.isVideo&&(O.extraInitParams="&media_category=dm_video");const A=m.p(S,O),L=[t(A)],F=k(T,b),{found_media_origin:B}=F||{};return D&&D.isGif&&L.push(Object(s.a)(D)),Promise.all(L).then((([[a],i])=>{const s=(null==P?void 0:P.altText)||(null==P?void 0:P.defaultAltText)||"",_=!!s;return(a&&(B||_)?t(m.m({media_id:a.uploadId,found_media_origin:B,...!!_&&{alt_text:{text:s||""}}})):Promise.resolve()).then((()=>{const{id_str:s}=w||{},m={};if(a){const{mediaFile:e={}}=a,t={original_info:{width:e.width,height:e.height},sizes:[{h:e.height,w:e.width,resize:"fit"}]};e.isImage?m.photo={...t,media_url_https:e.url}:e.isGif?m.animated_gif={...t,media_url_https:i,type:"animated_gif"}:e.isVideo&&(m.video={...t,media_url_https:e.url,type:"video"})}else w&&(m.tweet={status:s});const{uploadId:_}=a||{},y=f({attachment:m,conversation_id:b,error:!1,id:v,localMediaId:null,recipient_ids:M,sender_id:c,text:x}),T={...Object(l.a)(g)&&{card_uri:g},conversation_id:b,...!s&&{media_id:_},recipient_ids:M,request_id:v,text:e.text,tweet_id:s};C&&(T["quick_reply_response[options][id]"]=C.id,T["quick_reply_response[options][selected_id]"]=C.selected_id);const I=Object(o.a)([U(b),{type:p.c.REQUEST},{type:"rweb/dmComposer/SEND_MESSAGE_REQUEST"},b&&Object(u.b)(b,v,y)]);return t(I),n.DirectMessages.sendMessage(T).then((a=>{const{cards:n,entries:i,tweets:s,users:l}=a.entities,{conversations:c}=a.result;Object(r.a)(S)&&t(j(b,S));const d=Object(o.a)([{type:p.c.SUCCESS},...Object(h.a)({conversations:c,entries:i,users:l,tweets:s,cards:n}),{type:"rweb/dmComposer/SEND_MESSAGE_SUCCESS"},b&&Object(u.j)(b,v,e),E(b)]);return t(d),Promise.resolve(Object.values(a.entities.entries)[0].conversation_id)}),(e=>{const a=f({attachment:m,conversation_id:b,error:!0,id:v,localMediaId:S,recipient_ids:M,sender_id:c,text:x}),n=Object(o.a)([{type:p.c.SUCCESS},{type:"rweb/dmComposer/SEND_MESSAGE_FAILURE"},b&&Object(u.b)(b,v,a)]);return t(n),Object(d.e)(t,e,"ACTION_SEND_DM")}))}),(e=>(t(q(b)),e.type="metadata",Promise.reject(e))))}),(e=>(t(Object(o.a)([Object(r.a)(S)&&j(b,S),q(b)])),Promise.reject(e))))},y=(e,t)=>e.dmComposer[t],v=(e,t)=>{const a=y(e,t);return a?a.text:null},w="rweb/dmComposer/SAVE_TEXT",C=(e,t)=>({type:w,conversationId:e,text:t}),x="rweb/dmComposer/REMOVE_TEXT",E=e=>({type:x,conversationId:e}),T=(e,t)=>{const a=y(e,t);return a?a.cardUrl:null},S="rweb/dmComposer/SAVE_CARD_URL",I=(e,t)=>({type:S,conversationId:e,cardUrl:t}),R=(e,t)=>{const a=y(e,t);return a&&void 0!==a.mediaId?a.mediaId:null},D=(e,t)=>{const a=m.k(e,R(e,t)||[]);return a.length>0?a[0]:null},P=(e,t)=>{const a=y(e,t);return!!a&&a.isUploading},M=(e,t)=>m.l(e,R(e,t)||0),k=(e,t)=>{const a=y(e,t);return a&&a.gifMetadata?a.gifMetadata:null},O="rweb/dmComposer/ADD_MEDIA",A=(e,[t],a)=>({payload:{isUploading:!1,mediaId:t,gifMetadata:a},type:O,conversationId:e}),L="rweb/dmComposer/CANCEL_UPLOAD",F=e=>({type:L,conversationId:e}),B="rweb/dmComposer/REMOVE_MEDIA",N=e=>({type:B,conversationId:e}),j=(e,t)=>a=>{a(m.i(t)),a([F(e),N(e)])},z="rweb/dmComposer/UPLOAD_REQUEST",V=e=>({type:z,conversationId:e}),H="rweb/dmComposer/UPLOAD_SUCCESS",U=e=>({type:H,conversationId:e}),W="rweb/dmComposer/UPLOAD_FAILURE",q=e=>({type:W,conversationId:e});c.a.register({[g]:function(e=b,t){const a=t.conversationId||"new_group",n=e[a]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};switch(t.type){case O:return{...e,[a]:{...n,...t.payload}};case z:return{...e,[a]:{...n,isUploading:!0}};case L:return{...e,[a]:{...n,isUploading:!1}};case W:case H:case B:return{...e,[a]:{...n,isUploading:!1,mediaId:null,gifMetadata:void 0}};case w:return{...e,[a]:{...n,text:t.text}};case S:return{...e,[a]:{...n,cardUrl:t.cardUrl}};case x:return{...e,[a]:{...n,text:null}};default:return e}}})},"Coc+":function(e,t,a){var n=a("6QIk");e.exports=function(e){return n(this.__data__,e)>-1}},DVtB:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return p}));a("kYxP");var n=a("Ssj5"),i=a("oEOe"),s=a("kGix");const o="trustedFriends",r=Object.freeze({REQUEST:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_REQUEST",SUCCESS:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_SUCCESS",FAILURE:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_FAILURE"}),l=Object.freeze({REQUEST:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_REQUEST",SUCCESS:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_SUCCESS",FAILURE:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_FAILURE"}),c="rweb/trustedFriendsLists/SET_TRUSTED_FRIENDS_LIST",d=e=>e.trustedFriends.lists,u=()=>(e,t,{api:a})=>i.b(e,{request:a.TrustedFriends.createTrustedFriendsList})({actionTypes:l,context:"CREATE_TRUSTED_FRIENDS_LIST"}),h=()=>(e,t)=>{const a=t(),n=d(a);(n.length?n[0]:void 0)||e(((e,t,{api:a})=>i.b(e,{request:a.TrustedFriends.fetchAuthenticatedUserTFLists})({actionTypes:r,context:"FETCH_TRUSTED_FRIENDS_LISTS"}))).then((t=>{!t.authenticated_user_trusted_friends_lists.length&&u&&e(u())}))},p=e=>(t,a)=>{const n=a(),[i]=d(n);if(i){const a={...i,member_count:e};t({payload:a,type:c})}},m=Object.freeze({lists:[],fetchStatus:s.a.NONE});n.a.register({[o]:function(e=m,t){switch(t.type){case r.REQUEST:return{...e,fetchStatus:s.a.LOADING};case r.FAILURE:return{...e,error:t.payload,fetchStatus:s.a.FAILED};case r.SUCCESS:if(t.payload)return{...e,lists:t.payload.authenticated_user_trusted_friends_lists,error:null,fetchStatus:s.a.LOADED};break;case l.REQUEST:return{...e,fetchStatus:s.a.LOADING};case l.FAILURE:return{...e,error:t.payload,fetchStatus:s.a.FAILED};case l.SUCCESS:if(t.payload)return{...e,lists:[t.payload.trusted_friends_list_create],error:null,fetchStatus:s.a.LOADED};break;case c:if(t.payload)return{...e,lists:[t.payload]};break;default:return e}return e}})},Dhk8:function(e,t,a){var n=a("Syyo"),i=a("KCLV"),s=a("kHoZ"),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):s(e)}},Drq4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("Lsrn");const r=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("circle",{cx:"12",cy:"6.674",r:"1.889"}),i.a.createElement("path",{d:"M9.828 14.817l-1.62 3.342c-.138.41.083.857.495.995s.858-.083.996-.495l1.602-3.176c.28-.557 1.076-.556 1.356 0l1.608 3.195c.138.41.584.632.996.494.412-.138.633-.584.495-.996l-1.62-3.342.032.07-.123-.262c-.483-1.027-.535-2.19-.16-3.24.106-.302.392-.505.712-.505h2.032c.434 0 .786-.353.786-.787 0-.434-.352-.786-.786-.786H7.37c-.435 0-.787.352-.787.786 0 .434.352.786.786.786h1.985c.32 0 .606.2.713.503.374 1.05.323 2.214-.158 3.24l-.125.263"}),i.a.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"})));r.metadata={width:24,height:24},t.a=r},DuXo:function(e,t){e.exports=function(e,t,a,n){for(var i=e.length,s=a+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},EeFI:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("MWbm"),l=a("Qwev"),c=a("21U8"),d=a("rHpw"),u=a("qqsb"),h=a.n(u),p=a("1auM"),m=a("eYns");const g=h.a.gff1f69e;class b extends o.a.Component{constructor(e){super(e),this.state={orientedImage:null}}componentDidMount(){const{media:e}=this.props,{originalMediaFile:t={}}=e||{};t&&t instanceof p.a&&Object(m.b)(t).then((e=>new p.a(e).withDimensionsAndOrientation().then((e=>{this.setState({orientedImage:e})}))))}render(){return this.state.orientedImage?this._renderCropper():o.a.createElement(l.a,{accessibilityLabel:g,style:f.activityIndicator})}_renderCropper(){const{cropperRef:e,defaultAspectRatio:t,defaultCropData:a,media:n,withAspectRatioOptions:i,withZoomControl:s}=this.props,{orientedImage:l}=this.state,{cropData:d,originalMediaFile:u={}}=n||{};return l?o.a.createElement(r.a,{style:f.cropper},o.a.createElement(c.a,{circle:this.props.circle,defaultAspectRatio:a&&a.aspectRatio||d&&d.aspectRatio||t,defaultCropData:a||d,image:{src:l.url,width:u.width,height:u.height},ref:e,withAspectRatioOptions:i,withZoomControl:s})):null}}const f=d.a.create((e=>({cropper:{backgroundColor:e.colors.navigationBackground,flexGrow:1},activityIndicator:{flexGrow:1}})));t.a=o.a.forwardRef(((e,t)=>o.a.createElement(b,i()({},e,{cropperRef:t}))))},G31s:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("rHpw"),r=a("ZvMt"),l=a("9Xij"),c=a("v6aA"),d=a("pKoL");class u extends i.a.Component{render(){const{media:e,style:t}=this.props;return i.a.createElement(s.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{height:a,width:n}=e&&!t&&e[0].externalMediaDetails||{};let c=o.a.theme.aspectRatios.landscape;if(t){var d,u;const t=o.a.theme.aspectRatios.minTimelineImage,a=o.a.theme.aspectRatios.maxTimelineImage;c=r.a.getImageAspectRatio(t,a,{width:null==(d=e[0].mediaFile)?void 0:d.width,height:null==(u=e[0].mediaFile)?void 0:u.height})}return i.a.createElement(l.a,{ratio:t?c:n/a},i.a.createElement(s.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return i.a.createElement(l.a,{ratio:o.a.theme.aspectRatios.landscape},i.a.createElement(s.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0,h.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return i.a.createElement(l.a,{ratio:o.a.theme.aspectRatios.landscape},i.a.createElement(s.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0,h.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return i.a.createElement(l.a,{ratio:o.a.theme.aspectRatios.landscape},i.a.createElement(s.a,{style:h.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],h.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return i.a.createElement(s.a,{style:[h.column,t]},this._renderMediaAtIndex(e[0],h.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){var a,n,s,o;const{editable:r,isActive:l,media:c,onClickMedia:u,onEditMedia:p,onEditSensitiveWarning:m,onRemoveMedia:g,onSetMediaPreviewRef:b}=this.props,f=c[e],_=null==(a=f.mediaMetadata)?void 0:a.altText,y=null==(n=f.mediaMetadata)?void 0:n.defaultAltText,v=!(null==(s=f.mediaMetadata)||null==(o=s.sensitiveMediaWarning)||!o.size),w=p&&r&&l,C=w&&v&&!!m;return i.a.createElement(d.a,{accessibilityLabel:_||y,accessibilityRole:"group",enableGif:l,key:f.id,mediaItem:f,onClick:u?u(f.id):void 0,onEdit:p?p(f.id):void 0,onEditSensitiveWarning:m&&C?m(f.id):void 0,onRemove:g(f.id),ref:b,style:[h.mediaContainer,t],withAltTextLabel:!!_,withCloseButton:r&&l,withEditButton:w,withEditSensitiveWarningButton:C})}}u.contextType=c.a;const h=o.a.create((e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.space12},gutterBottom:{marginBottom:e.spaces.space12},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%",width:"100%"}})))},GTeL:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("U+bB"),o=a("MWbm"),r=a("Qwev"),l=a("rHpw"),c=a("qqsb"),d=a.n(c),u=a("pKoL");const h=d.a.gff1f69e;const p=l.a.create((e=>({activityIndicator:{height:"100%",width:"100%"},image:{width:"100%",flexGrow:1},mediaContainer:{overflow:"hidden",flexGrow:1,flexBasis:0,width:"100%"},mediaPreviewWrapper:{flexDirection:"column",flexGrow:1,alignItems:"center",width:"100%",paddingVertical:25,paddingHorizontal:25,backgroundColor:e.colors.gray0}})));t.a=function({mediaItem:e,orientedImage:t}){return i.a.createElement(o.a,{style:p.mediaPreviewWrapper},void 0===t&&e?i.a.createElement(u.a,{imageResizeMode:"contain",mediaItem:e,style:p.mediaContainer,withCloseButton:!1}):t?i.a.createElement(s.a,{resizeMode:"contain",source:t.url,style:p.image}):i.a.createElement(r.a,{accessibilityLabel:h,style:p.activityIndicator}))}},H87J:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length,i=Array(n);++a<n;)i[a]=t(e[a],a,e);return i}},IBsm:function(e,t,a){var n=a("e93E"),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();e.exports=s},"JBn+":function(e,t,a){var n=a("hyzI"),i=a("qjF7"),s=a("cEmw");function o(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new n;++t<a;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,e.exports=o},JNqh:function(e,t,a){var n=a("6UKJ");e.exports=function(e,t){var a=e.__data__;return n(t)?a["string"==typeof t?"string":"hash"]:a.map}},KCLV:function(e,t,a){var n=a("Syyo"),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,r=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,r),a=e[r];try{e[r]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[r]=a:delete e[r]),i}},KqB4:function(e,t,a){"use strict";var n=a("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=[],n=(0,i.default)(e,t),s=0;s<n.length;s++)a.push(n[s].url);return a};var i=n(a("vwfs"));e.exports=t.default},LCtV:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("U+bB"),o=a("MWbm"),r=a("Qwev"),l=a("rHpw"),c=a("qqsb"),d=a.n(c),u=a("1auM"),h=a("ude7"),p=a("mN6z");const m=d.a.gff1f69e,g=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class b extends i.a.Component{constructor(...e){super(...e),this.state={imagePreviewUrl:null},this._getImageSrc=()=>{const{enableGif:e,mediaItem:t}=this.props,{imagePreviewUrl:a}=this.state;if(t&&t.mediaFile)return t.mediaFile.isGif&&!e?a:t.mediaFile.url}}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:a}=this.state;e||a||t instanceof u.a&&t.isGif&&Object(h.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(p.a)(e,this.props)||!Object(p.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:n,resizeMode:l}=this.props,{imagePreviewUrl:c}=this.state||{},d=a.mediaFile&&a.mediaFile.isGif&&!t&&!c,u=a.needsProcessing||d,h=[_.root,f[e],u&&_.loadingBorder],p=this._getImageSrc();return i.a.createElement(o.a,{onClick:n,style:h},u||!p?i.a.createElement(r.a,{accessibilityLabel:m,style:_.activityIndicator}):i.a.createElement(s.a,{resizeMode:l,source:p,style:_.image}))}}b.defaultProps={borderRadius:g.NONE,enableGif:!0,resizeMode:"cover"};const f=l.a.create((e=>({[g.INFINITE]:{borderRadius:e.borderRadii.infinite},[g.MEDIUM]:{borderRadius:e.borderRadii.small},[g.NONE]:{borderRadius:e.borderRadii.none}}))),_=l.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=b},LtQU:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("Lsrn");const r=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 10H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0 6H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"})));r.metadata={width:24,height:24},t.a=r},LzM7:function(e,t,a){var n=a("6QIk");e.exports=function(e,t){var a=this.__data__,i=n(a,e);return i<0?(++this.size,a.push([e,t])):a[i][1]=t,this}},M6MT:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=Object.freeze({granted:"granted",denied:"denied",prompt:"prompt"}),i=Object.freeze({PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})},MLl7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));const n=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),i=e=>Object.values(n).indexOf(e)>=0,s=(e,t)=>"boolean"==typeof e?e:t},"Mbn/":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("Lsrn");const r=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M3.5 5.25H2c-.414 0-.75.336-.75.75s.336.75.75.75h1.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm18.5 12H7.5c-.414 0-.75-.337-.75-.75V2c0-.414-.336-.75-.75-.75s-.75.336-.75.75v14.5c0 1.24 1.01 2.25 2.25 2.25H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4 2.5c-.414 0-.75.336-.75.75V22c0 .414.336.75.75.75s.75-.336.75-.75v-1.5c0-.414-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M8.5 6.75h8c.414 0 .75.337.75.75v8c0 .414.336.75.75.75s.75-.336.75-.75v-8c0-1.24-1.01-2.25-2.25-2.25h-8c-.414 0-.75.336-.75.75s.336.75.75.75z"})));r.metadata={width:24,height:24},t.a=r},Ndl3:function(e,t,a){var n=a("9y2L"),i=a("tLQN");e.exports=function(e){return i(e)&&n(e)}},Nsha:function(e,t,a){var n=a("H87J"),i=a("1sLo"),s=a("R3TX"),o=a("VZDm"),r=s((function(e){var t=n(e,o);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=r},ORQL:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("hHEM"),l=a("keCP"),c=a("RH6X"),d=a("rziq");const u={convertEmojiToEntities:r.a.convertEmojiToEntities,element:l.a,initEditorState:r.a.initEditorState,insertTextAtCursor:r.a.insertTextAtCursor,updateOverflowStyle:r.a.updateOverflowStyle,dismissComposerCommandName:d.a,sendTweetCommandName:d.b};t.a=e=>t=>o.a.createElement(e,i()({},t,{richTextInputContext:u,typeaheadWrapper:c.a}))},OfKG:function(e,t,a){var n=a("c7Qd");e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},PKbs:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("X00g"),r=a("t62R"),l=a("h0NW"),c=a("rHpw"),d=a("C6f5"),u=a("qqsb"),h=a.n(u);const p=i.a.createElement(h.a.I18NFormatMessage,{$i18n:"i5ba24f5"},i.a.createElement(r.b,{link:"https://help.twitter.com/en/rules-and-policies/twitter-rules",withInteractiveStyling:!1},h.a.g3631342));var m=({containerStyle:e,explanation:t,explanationStyle:a,heading:n})=>i.a.createElement(s.a,{style:e},n,i.a.createElement(r.b,{color:"gray700",style:a},t||p)),g=a("csss");var b=({getPivotLink:e,renderBadge:t,rules:a})=>i.a.createElement(i.a.Fragment,null,a.map(((a,n)=>{const{description:s,name:o,rest_id:l}=a,c=e(a),d=t(n+1),u=i.a.createElement(r.b,{weight:"bold"},o);return i.a.createElement(g.a,{description:s,key:l,label:u,link:c,thumbnail:d})}))),f=a("97Jx"),_=a.n(f),y=(a("kYxP"),a("9Jxp")),v=a("CXUS"),w=a("LtQU");const C="rules-container",x="rules-order-badge",E="rules-reorder-item",T=c.a.create((e=>({icon:{color:e.colors.gray300,flexShrink:0,paddingLeft:e.spaces.space12}})));var S=e=>{const{badge:t,rule:a}=e,{description:n,name:s}=a,o=i.a.createElement(r.b,{weight:"bold"},s);return i.a.createElement(g.a,{description:n,label:o,renderRightContent:()=>i.a.createElement(w.a,{style:T.icon}),testID:E,thumbnail:t})};const I=(e,t,a)=>{if(!e.destination)return;a(((e,t,a)=>{const n=Array.from(e),[i]=n.splice(t,1);return n.splice(a,0,i),n})(t,e.source.index,e.destination.index))};var R=e=>{const{onReorder:t,renderBadge:a,rules:n}=e,s=i.a.useCallback((e=>{I(e,n,t)}),[t,n]);return i.a.createElement(v.a,{onDragEnd:s},i.a.createElement(v.c,{droppableId:"droppable"},((e,t)=>i.a.createElement("div",_()({},e.droppableProps,{ref:e.innerRef}),n.map(((e,n)=>{const{rest_id:s}=e;return i.a.createElement(y.a,{draggableId:s,index:n,isBeingDragged:t.draggingFromThisWith===s,key:s},i.a.createElement(S,{badge:a(n+1),rule:e}))})),e.placeholder))))};const D=Object.freeze({Default:"Default",Pivot:"Pivot",Reorder:"Reorder"}),P=(e,t)=>{const{badgeStyle:a,theme:n}=t,l=o.a.getCommunityBackgroundColor(n);return i.a.createElement(s.a,{style:[M.badge,{backgroundColor:l},a],testID:x},i.a.createElement(r.b,{align:"center",color:"white",weight:"bold"},e))},M=c.a.create((e=>({badge:{backgroundColor:e.colors.primary,borderRadius:e.borderRadii.infinite,justifyContent:"center",overflow:"hidden",height:e.spaces.space32,width:e.spaces.space32},bottomMargin:{marginBottom:d.a}})));t.b=({badgeStyle:e,displayType:t=D.Default,explanation:a,getPivotLink:n,headerContainerStyle:o,headerExplanationStyle:r,heading:c,limit:d,onReorder:u,ruleContainerStyle:h,rules:p,theme:g,withBottomMargin:f=!1,withHeader:_=!0})=>{const y={theme:g,badgeStyle:e},v=((e,t,a)=>(t?e.slice(0,t):e).map(((e,t)=>({label:e.name,description:e.description,decoration:P(t+1,a)}))))(p,d,y),w=e=>P(e,y);return v.length>0?i.a.createElement(s.a,{style:f?M.bottomMargin:null,testID:C},_?i.a.createElement(m,{containerStyle:o,explanation:a,explanationStyle:r,heading:c}):null,t===D.Pivot&&n?i.a.createElement(b,{getPivotLink:n,renderBadge:w,rules:p}):t===D.Reorder&&u?i.a.createElement(R,{onReorder:u,renderBadge:w,rules:p}):i.a.createElement(l.a,{containerStyle:h,items:v})):null}},PrL8:function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({root:{flexGrow:1,flexShrink:1,paddingBottom:e.spaces.space12},rightControl:{display:"flex",flexDirection:"row"},prevButton:{marginEnd:e.spaces.space2},saveButton:{marginStart:e.spaces.space12},segmentedControlChildren:{flexGrow:1},leftRightButtons:{alignItems:"center"},videoTrimmerWrapper:{flexGrow:1,flexShrink:1,marginBottom:e.spaces.space20}})));t.a=n},"Pz+s":function(e,t,a){var n=a("vxC8"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},QMz8:function(e,t,a){var n=a("5pfJ"),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},R3TX:function(e,t,a){var n=a("zWgn"),i=a("UAs9"),s=a("7Pat");e.exports=function(e,t){return s(i(e,t,n),e+"")}},RH6X:function(e,t,a){"use strict";a("kYxP"),a("849X");var n=a("ERkP"),i=a.n(n),s=a("zpdM"),o=a("2dXj"),r=a("GZwR"),l=a("oEoC"),c=a("dzqK"),d=a("4bHO");class u extends i.a.Component{constructor(...e){super(...e),this.state={queryContext:void 0,canShowTypeahead:!1},this._genericWrapperRef=i.a.createRef(),this.render=()=>{const{children:e,composeCommunityId:t,contextText:a,isInline:n,isInlineReply:s,onTypeaheadStateChange:l,source:c}=this.props,{canShowTypeahead:d,queryContext:u}=this.state,h=d&&u?{word:u.word,resultType:u.resultType}:void 0;return i.a.createElement(o.a,{composeCommunityId:t,contextText:a,isInline:n,isInlineReply:s,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:l,query:h,ref:this._genericWrapperRef,source:c||r.d.Compose},e(this._handleInputChange))},this._getCaret=e=>e.getSelection().getStartOffset(),this._getPlaintextFromCurrentBlock=e=>{const t=e.getSelection().anchorKey;return e.getCurrentContent().getBlockForKey(t).getText()},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(d.a)(e,a.resultType);t(this._replaceToken(n,a))}this._setQueryContext(void 0)},this._handleInputChange=e=>{if(!Object(c.a)(e))throw new Error("RichTextTypeaheadComposeWrapper cannot handle plain text input changes");{const{queryContext:t}=this.state,a=t&&t.word,n=this._getPlaintextFromCurrentBlock(e),{end:i,start:s,word:o}=l.c(this._getCaret(e),n),r=l.e(o||"","compose");if((null==r?void 0:r.q)===a)return;if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===s)this._setQueryContext(void 0);else if(r){const{q:t,result_type:a}=r;this._setQueryContext({word:t,resultType:a,editorState:e,startIndex:s,endIndex:i})}else this._setQueryContext(void 0)}},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{editorState:a,endIndex:n,startIndex:i}=t,o=a.getSelection().merge({anchorKey:a.getSelection().getFocusKey(),anchorOffset:i,focusOffset:n}),r=s.Modifier.replaceText(a.getCurrentContent(),o,e),l=s.EditorState.push(a,r,"insert-characters"),c=i+e.length,d=l.getSelection().merge({anchorOffset:c,focusOffset:c});return s.EditorState.forceSelection(l,d)}}t.a=u},RrO2:function(e,t,a){"use strict";a.r(t);a("ERkP");var n=a("x8Sc"),i=a("ORQL");t.default=Object(i.a)(n.default)},S0iI:function(e,t){e.exports=function(e,t){return e.has(t)}},SU8Q:function(e,t){e.exports=function(e){return function(t){return e(t)}}},Syyo:function(e,t,a){var n=a("IBsm").Symbol;e.exports=n},Tv3l:function(e,t,a){var n=a("2Fbm"),i=a("VPai"),s=a("+fUG"),o=a("QMz8"),r=a("mUsV");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=r,e.exports=l},UAs9:function(e,t,a){var n=a("zaNA"),i=Math.max;e.exports=function(e,t,a){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=i(s.length-t,0),l=Array(r);++o<r;)l[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=a(l),n(e,this,c)}}},UgB4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("Lsrn");const r=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.13 11.358L3.614 2.108c-.29-.152-.64-.102-.873.126-.23.226-.293.577-.15.868l4.362 8.92-4.362 8.92c-.143.292-.08.643.15.868.145.14.333.212.523.212.12 0 .24-.028.35-.087l17.517-9.25c.245-.13.4-.386.4-.664s-.155-.532-.4-.662zM4.948 4.51l12.804 6.762H8.255l-3.307-6.76zm3.307 8.26h9.498L4.948 19.535l3.307-6.763z"})));r.metadata={width:24,height:24},t.a=r},VPai:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},VPdC:function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("/Imo"),l=a("rHpw"),c=a("qqsb"),d=a.n(c),u=a("cjZk"),h=a("9HgX"),p=a("sjK1"),m="fileInput";const g=d.a.b9960f32,b={viewType:"media_picker"},f=o.a.createElement(u.a,null),_=({acceptGifs:e,acceptImages:t=!0,acceptVideo:a})=>(t?h.b:[]).concat(e?[h.a]:[]).concat(a?p.a:[]);class y extends o.a.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:a,customMimeTypes:n,icon:s,style:l,withIcon:c,...d}=this.props,u=_({acceptGifs:e,acceptImages:t,acceptVideo:a}).concat(n).join(",");return o.a.createElement(r.a,i()({},d,{accept:u,behavioralEventContext:b,icon:c?s:void 0,style:[v.root,l],testID:m}))}}y.defaultProps={acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:g,icon:f,size:"medium",withIcon:!0};const v=l.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=y},VZDm:function(e,t,a){var n=a("Ndl3");e.exports=function(e){return n(e)?e:[]}},WOwf:function(e,t,a){"use strict";function n(e,t){return Math.min(1,1-e/t)}a.d(t,"a",(function(){return n}))},XpKj:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return b}));var n=a("Ssj5"),i=a("oEOe"),s=a("kGix");const o="scheduledTweets",r={fetchStatus:s.a.NONE,scheduledTweets:[]},l="FETCH_SCHEDULED_TWEETS",c=Object.freeze({REQUEST:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_REQUEST",SUCCESS:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_SUCCESS",FAILURE:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_FAILURE"}),d="DELETE_SCHEDULED_TWEET",u=Object.freeze({REQUEST:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_REQUEST",SUCCESS:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_SUCCESS",FAILURE:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_FAILURE"});function h(e=r,t){switch(t.type){case c.SUCCESS:if(t.payload)return{...e,fetchStatus:s.a.LOADED,scheduledTweets:t.payload};break;case c.FAILURE:return{...e,fetchStatus:s.a.FAILED};case c.REQUEST:return{...e,fetchStatus:s.a.LOADING};case u.SUCCESS:{const{meta:i}=t;return i&&i.deleteScheduledTweetId?{...e,scheduledTweets:(a=i.deleteScheduledTweetId,n=e.scheduledTweets,n.filter((e=>e.rest_id!==a)))}:e}default:return e}var a,n;return e}n.a.register({[o]:h});const p=e=>e.scheduledTweets.scheduledTweets,m=e=>e.scheduledTweets.fetchStatus,g=()=>(e,t,{api:a})=>Object(i.b)(e,{request:a.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:c,context:l}).then((()=>{})),b=e=>(t,a,{api:n})=>Object(i.b)(t,{request:n.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:u,context:d,meta:{deleteScheduledTweetId:e}})},"a/ea":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return p}));var n=a("Ssj5"),i=a("M6MT");const s="geoLocation",o=Object.freeze({permissionStatus:void 0,position:void 0});const r=e=>e.geoLocation.permissionStatus,l=e=>e.geoLocation.position,c="rweb/geoLocation/SET_PERMISSION_STATUS",d=e=>({payload:e,type:c}),u="rweb/geoLocation/SET_POSITION",h=()=>(e,t)=>m().then((t=>e({payload:t,type:u}))).catch((t=>(e(d(i.b.denied)),Promise.reject(t)))),p=()=>(e,t)=>l(t())?Promise.resolve():e(h()),m=()=>new Promise(((e,t)=>navigator.geolocation.getCurrentPosition((t=>{const a={timestamp:t.timestamp,coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,altitude:t.coords.altitude,accuracy:t.coords.accuracy,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed}};return e(a)}),t)));n.a.register({[s]:function(e=o,t){switch(t.type){case c:return{...e,permissionStatus:t.payload};case u:return{...e,position:t.payload};default:return e}}})},b5s6:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("nBUg"),l=a("uCxL"),c=a("YeIG"),d=a("x5Pi"),u=a("Irs7"),h=a("v6aA"),p=a("0KEI"),m=a("rxPX"),g=a("eSoz"),b=a("XOJV");const f=(e,t)=>t.tweetId,_=(e,t)=>{const a=t.tweetId,n=a&&b.a.select(e,a);return n?Object(g.g)(e,n):void 0};const y=Object(m.a)().propsFromState((()=>({community:_,hydratedTweet:b.a.createHydratedTweetSelector(f)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(p.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:g.c.fetchOneIfNeeded})))((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,hydratedTweet:n,onPress:s,tweetId:p,...m})=>{const{featureSwitches:g,loggedInUserId:b}=o.a.useContext(h.a),f=Object(u.b)(),_=null==n?void 0:n.community_id_str;o.a.useEffect((()=>{_&&Object(c.a)(e)&&a(_).catch(t())}),[e,_,t,a]);const y=o.a.useCallback((e=>{f.scribeAction("click"),s&&s(e)}),[s,f]),v=n&&Object(d.f)(n,b,e),w=v&&Object(d.e)(v),C=g.isTrue("responsive_web_reactions_enabled");return o.a.createElement(r.b.Provider,{value:{isCollaborativeTweetConsumptionEnabled:()=>g.isTrue("responsive_web_cotweet_consumption_enabled"),isEditTweetConsumptionEnabled:()=>g.isTrue("responsive_web_edit_tweet_enabled")||g.isTrue("subscriptions_feature_labs_1004"),isVibeTweetConsumptionEnabled:()=>g.isTrue("vibe_tweet_context_enabled"),mixedMediaEnabled:()=>g.isTrue("responsive_web_mixed_media_consumption_enabled")}},o.a.createElement(l.a,i()({},m,{loggedInUserId:b,onPress:y,shouldShowAltLabelAlways:!0,socialContextProps:w,tweet:n,withReactions:C})))}));t.a=y},c0ZR:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("849X");const n=e=>new Promise(((t,a)=>{const n=new window.XMLHttpRequest;n.responseType="blob",n.onreadystatechange=()=>{n.readyState===window.XMLHttpRequest.DONE&&(200===n.status?t(n.response):a(new Error("Unexpected status code")))},n.onerror=e=>a(e),n.ontimeout=e=>a(e),n.open("GET",e,!0),n.send()}))},c18h:function(e,t){var a=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},c7Qd:function(e,t,a){var n=a("DuXo"),i=a("z9Jh"),s=a("n1QJ");e.exports=function(e,t,a){return t==t?s(e,t,a):n(e,i,a)}},cEmw:function(e,t){e.exports=function(e){return this.__data__.has(e)}},cIoY:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("CaKu"),o=a("U+bB"),r=a("mjJ+"),l=a("t62R"),c=a("cm6r"),d=a("rHpw"),u=a("qqsb"),h=a.n(u),p=a("I/9y"),m=(a("kYxP"),a("k/Ka")),g=a("sgih"),b=a("/yvb");const f=h.a.cfd2f35e;class _ extends i.a.Component{constructor(...e){super(...e),this._handleOnFocus=e=>{e.currentTarget.select()}}render(){const{cancelButtonLabel:e,description:t,headerText:a,link:n,onCancel:s}=this.props,o=Object(m.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:y.linkInput,value:n});return i.a.createElement(g.a,{onMaskClick:s,style:y.container,type:"center",withMask:!0},a&&i.a.createElement(l.b,{align:"center",style:y.headerText,weight:"bold"},a),t&&i.a.createElement(l.b,{align:"center",color:"gray700",style:y.labelText},t),o,i.a.createElement(b.a,{onPress:s,size:"xLarge",style:y.cancelButton,type:"brandText"},e))}}_.defaultProps={cancelButtonLabel:f};const y=d.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var v=_;const w=h.a.e05c00b4,C=h.a.eabf2209,x=h.a.a613e720,E=h.a.f88553c8,T={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class S extends i.a.PureComponent{constructor(e){super(e),this._renderMenu=e=>i.a.createElement(r.a,{items:[{text:x,Icon:p.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}),this._handleCopyGifLinkButtonClick=e=>{const{addToast:t,gifUrl:a}=this.props;s.a.isAvailable()?(s.a.setString(a),t({text:E})):this.setState({showCopyLinkSheet:!0}),e&&e()},this._handleCopyLinkSheetCancel=()=>{this.setState({showCopyLinkSheet:!1})},this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{gifUrl:t,provider:a}=this.props,{display_name:n,name:s}=a,o=T[s];return o?i.a.createElement(i.a.Fragment,null,e?i.a.createElement(v,{description:C({providerName:n}),headerText:w,link:t,onCancel:this._handleCopyLinkSheetCancel}):null,i.a.createElement(l.b,{align:"center",color:"gray700",style:I.root},i.a.createElement(h.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(n,o)))):null}_renderAttribution(e,t){return i.a.createElement(c.a,{interactiveStyles:null,renderMenu:this._renderMenu},i.a.createElement(l.b,{weight:"bold",withInteractiveStyling:!0},i.a.createElement(o.a,{source:{uri:t},style:I.image}),i.a.createElement(l.b,null,e.toUpperCase())))}}const I=d.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var R=S,D=a("rxPX"),P=a("1YZw");const M=Object(D.a)().propsFromActions((()=>({addToast:P.b})))((({addToast:e,gifUrl:t,provider:a})=>i.a.createElement(R,{addToast:e,gifUrl:t,provider:a})));t.a=M},d0UJ:function(e,t,a){var n=a("JNqh");e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},dzqK:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("ERkP");var n=a("zpdM");function i(e){return e instanceof n.EditorState}},e63W:function(e,t,a){var n=a("JNqh");e.exports=function(e,t){var a=n(this,e),i=a.size;return a.set(e,t),this.size+=a.size==i?0:1,this}},e93E:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a("fRV1"))},eN33:function(e,t){e.exports=function(e){return function(){return e}}},eask:function(e,t,a){var n=a("JNqh");e.exports=function(e){return n(this,e).get(e)}},gk9V:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return o}));var n=a("rHpw");const i="singleline",s=`\n    .longform-header-one {\n        font-family: ${n.a.theme.fontFamilies.chirpExtended};\n        font-size: ${n.a.theme.fontSizes.title2};\n        line-height: ${n.a.theme.lineHeights.title1};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-header-one-narrow {\n        font-family: ${n.a.theme.fontFamilies.chirpExtended};\n        font-size: ${n.a.theme.fontSizes.headline1};\n        line-height: ${n.a.theme.lineHeights.title4};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-header-two {\n        font-size: ${n.a.theme.fontSizes.title3};\n        font-weight: ${n.a.theme.fontWeights.heavy};\n        line-height: ${n.a.theme.lineHeights.title2};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-header-two-narrow {\n        font-size: calc(${n.a.theme.fontSizes.headline2} + 1px);\n        font-weight: ${n.a.theme.fontWeights.heavy};\n        line-height: ${n.a.theme.lineHeights.headline1};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-unstyled {\n        font-size: ${n.a.theme.fontSizes.headline2};\n        line-height: ${n.a.theme.lineHeights.title4};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-unstyled-narrow {\n        font-size: ${n.a.theme.fontSizes.body};\n        line-height: ${n.a.theme.lineHeights.title4};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-unordered-list-item, .longform-ordered-list-item {\n        display: block;\n        font-size: ${n.a.theme.fontSizes.headline2};\n        line-height: ${n.a.theme.lineHeights.title4};   \n        margin-bottom: ${n.a.theme.spaces.space12};\n        margin-left: ${n.a.theme.spaces.space36};\n        margin-top: 0;\n    }\n\n    .longform-unordered-list-item-narrow, .longform-ordered-list-item-narrow {\n        display: block;\n        font-size: ${n.a.theme.fontSizes.body};\n        line-height: ${n.a.theme.lineHeights.title4};   \n        margin-bottom: calc(${n.a.theme.spaces.space12} / 2);\n        margin-left: ${n.a.theme.spaces.space36};\n        margin-top: 0;\n    }\n\n    .longform-header-one .public-DraftStyleDefault-block,\n    .longform-header-two .public-DraftStyleDefault-block,\n    .longform-unstyled .public-DraftStyleDefault-block,\n    .longform-unordered-list-item .public-DraftStyleDefault-block,\n    .longform-ordered-list-item .public-DraftStyleDefault-block,\n    .longform-header-one-narrow .public-DraftStyleDefault-block,\n    .longform-header-two-narrow .public-DraftStyleDefault-block,\n    .longform-unstyled-narrow .public-DraftStyleDefault-block,\n    .longform-unordered-list-item-narrow .public-DraftStyleDefault-block,\n    .longform-ordered-list-item-narrow .public-DraftStyleDefault-block {\n        padding-bottom: 0;\n        padding-top: 0;\n    }\n\n    .public-DraftStyleDefault-ul, .public-DraftStyleDefault-ol {\n        counter-reset: item;\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n        padding-left: 0;\n    }\n\n    .longform-unordered-list-item:before, .longform-ordered-list-item:before,\n    .longform-unordered-list-item-narrow:before, .longform-ordered-list-item-narrow:before {\n        position: absolute;\n        margin-left: -${n.a.theme.spaces.space36};\n    }\n\n    .longform-unordered-list-item:before {\n        content: counter(item, disc);\n        font-size: ${n.a.theme.fontSizes.title4}\n    }\n\n    .longform-unordered-list-item-narrow:before {\n        content: counter(item, disc);\n        font-size: ${n.a.theme.fontSizes.headline1}\n    }\n\n    .longform-ordered-list-item:before, .longform-ordered-list-item-narrow:before {\n        content: counter(item) ". ";\n        counter-increment: item;\n    }\n\n    .longform-ordered-list-item::marker, .longform-ordered-list-item-narrow::marker {\n        font-variant-numeric: normal;\n    }\n`,o=({placeholderTextColor:e=n.a.theme.colors.gray700})=>{const t=n.a.theme.spaces.space2;return`\n         .DraftEditor-editorContainer, .DraftEditor-root, .public-DraftEditor-content {\n            height: inherit;\n            max-height: inherit;\n            min-height: inherit;\n            overflow: auto;\n            text-align: initial;\n        }\n\n        .public-DraftEditor-content[contenteditable=true] {\n            -webkit-user-modify: read-write-plaintext-only\n        }\n\n        .DraftEditor-root {\n            width: 100%;\n            position: relative;\n            -webkit-user-select: none;\n        }\n\n        .DraftEditor-editorContainer {\n            background-color: rgba(255, 255, 255, 0);\n            border-left: .1px solid transparent;\n            position: relative;\n            z-index: 1;\n        }\n\n        .public-DraftEditor-block {\n            position: relative;\n        }\n\n        .DraftEditor-alignLeft .public-DraftStyleDefault-block {\n            text-align: left;\n        }\n\n        .DraftEditor-alignLeft .public-DraftEditorPlaceholder-root {\n            left: 0;\n            text-align: left;\n        }\n\n        .DraftEditor-alignCenter .public-DraftStyleDefault-block {\n            text-align: center\n        }\n\n        .DraftEditor-alignCenter .public-DraftEditorPlaceholder-root {\n            margin: 0 auto;\n            text-align: center;\n            width: 100%\n        }\n\n        .DraftEditor-alignRight .public-DraftStyleDefault-block {\n            text-align: right;\n        }\n\n        .DraftEditor-alignRight .public-DraftEditorPlaceholder-root {\n            right: 0;\n            text-align: right;\n        }\n\n        .public-DraftEditorPlaceholder-root {\n            color: ${e};\n            padding-bottom: ${t};\n            padding-top: ${t};\n            position: absolute;\n            z-index: 1;\n        }\n\n        .public-DraftEditorPlaceholder-inner {\n            user-select: none;\n            -webkit-user-select: none;\n        }\n\n        .public-DraftEditorPlaceholder-hasFocus {\n            color: ${e};\n        }\n\n        .DraftEditorPlaceholder-hidden {\n            display: none;\n        }\n\n        .public-DraftStyleDefault-block {\n            overflow:hidden;\n            padding-bottom: ${t};\n            padding-top: ${t};\n            position: relative;\n            white-space: pre-wrap;\n        }\n\n        /* Only a handful of CSS rules work on br tags and user-select isn't one */\n        div:only-child > .public-DraftStyleDefault-block br::selection {\n            background: transparent;\n        }\n\n        /*\n           Safari doesn't let you change ::selection on br elements,\n           but Chrome needs it here\n        */\n        div:only-child > .public-DraftStyleDefault-block::selection {\n            background: transparent;\n        }\n\n        .public-DraftStyleDefault-ltr {\n            direction: ltr;\n            text-align: left;\n        }\n\n        .public-DraftStyleDefault-rtl {\n            direction: rtl;\n            text-align: right;\n        }\n\n        .${i} .public-DraftStyleDefault-block {\n            overflow-x: auto;\n            scrollbar-width: none;\n            white-space: nowrap;\n            -ms-overflow-style: none;\n        }\n\n        .${i} .public-DraftStyleDefault-block::-webkit-scrollbar {\n            display: none;\n        }\n\n        ${s}\n    `}},gpVt:function(e,t,a){"use strict";a.d(t,"b",(function(){return I}));var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("/yvb"),r=a("rHpw"),l=a("qqsb"),c=a.n(l),d=a("hOZg"),u=a("VY6S"),h=a("mN6z"),p=a("KqB4"),m=a.n(p),g=a("cnVF"),b=a("v6aA"),f=a("aX4+"),_=(a("kYxP"),a("0KEI")),y=a("rxPX"),v=a("vjRr"),w=a("CDB5"),C=a("xVN5");const x=(e,t)=>{const{urls:a}=t,n=[...a];let i;for(const t of n.reverse())if(i=v.a.select(e,t),i)break;return i};var E=Object(y.a)().propsFromState((()=>({card:x}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(_.createLocalApiErrorHandlerWithContextFactory)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:v.a.fetchCardPreviewIfNeeded,updateDMComposer:w.e,updateTweetComposer:C.w})));const T=c.a.f6fec9f6,S=/^https?:\/\//i,I=e=>{const t=m()(e);if(t.length)return t.map((e=>!S.test(e)&&`http://${e}`||e))};class R extends i.a.Component{constructor(e,t){super(e,t),this._fetchCardPreviewIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchCardPreviewIfNeeded:t,urls:a}=this.props;a.forEach((a=>{t(a).catch(e())}))},this._handleCardPreviewDismissal=e=>this._updateSingleComposer({cardUrl:g.C}),this._updateSingleComposer=e=>{const{conversationId:t,index:a,updateDMComposer:n,updateTweetComposer:i}=this.props,{cardUrl:s}=e||{};this._isDMComposer?t&&n(t,s):i({updates:{cardUrl:s},index:a})},this._debouncedFetchCardPreview=Object(u.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(h.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:a}=this.props,{loggedInUserId:n}=this.context;return e&&!t&&n?i.a.createElement(s.a,{style:a},i.a.createElement(f.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:n},isInteractive:!1,preventVideoPlayback:!0}),i.a.createElement(o.a,{accessibilityLabel:T,icon:i.a.createElement(d.a,null),onPress:this._handleCardPreviewDismissal,size:"xSmall",style:D.closeButton,type:"onMediaDominantColorFilled"})):null}}R.contextType=b.a;const D=r.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),P=E(R);t.a=P},h5NW:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("MvUL"),a("urw/"),a("ERkP")),o=a.n(s),r=a("6/RC"),l=a("7nmT"),c=a.n(l),d=a("MWbm"),u=a("eb3s"),h=a("JYMr"),p=a("rHpw"),m=a("sCk0"),g=a("4zmP"),b=a("/yvb"),f=a("qqsb"),_=a.n(f),y=a("Drq4"),v=a("9HgX"),w=a("zTrU"),C=a("3A2y"),x=a("zrOZ"),E=a("s1N3"),T=a("4FGy"),S=a("+d3d"),I=a("mN6z"),R=a("I8M8"),D=a("aITJ"),P=a("pXBW"),M=a("Nsha"),k=a.n(M),O=a("6OUF"),A=a("tZIO"),L=a("5mJL"),F=a("DNho"),B=a("oSwX"),N=a("rFBM"),j=a("zfvc"),z=a("t62R"),V=a("Ujvi"),H=a("yTN1"),U=a("hOZg"),W=a("iY63"),q=a("ll3R"),G=a("J0mu"),$=a("EfHu"),K=a("KrGU"),Q=a("boUI"),X=a("6ZHn"),J=a("/WPq"),Y=a("wpLu"),Z=a("pHub"),ee=a("8A5z"),te=a("1auM"),ae=a("S1qy"),ne=a.n(ae),ie=a("cjAp"),se=a.n(ie),oe=a("X00g"),re=a("Sp5X"),le=a("efqG"),ce=a("FG+G"),de=a("FGLp"),ue=a("+Kfv"),he=a("hqKg"),pe=a("0KEI"),me=a("rxPX"),ge=a("eSoz"),be=a("wa7Z"),fe=a("li/m"),_e=a("xZGM"),ye=a("RqPI"),ve=a("DVtB"),we=a("xVN5");const Ce=(e,t)=>{const a=t.audienceControlsValue.communityIdValue||void 0;return a?ge.c.select(e,a):void 0},xe=(e,t)=>Object(_e.I)(e,_e.f),Ee=(e,t)=>Object(_e.I)(e,_e.B),Te=e=>{const t=Object(ve.b)(e);return t.length?t[0]:void 0};var Se=Object(me.a)().propsFromState((()=>({communities:ge.f,educationalVisibilityFlag:xe,trustedFriendsEducationVisibilityFlag:Ee,hasMemberships:fe.d,selectedCommunity:Ce,sliceModule:Object(he.createSelector)(ye.s,(e=>e?Object(be.b)(e):void 0)),selectTrustedFriendsList:Te}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(pe.createLocalApiErrorHandlerWithContextFactory)("COMMUNITIES_CONTROLS"),addEducationFlag:()=>Object(_e.E)(_e.f),addTrustedFriendsEducationFlag:()=>Object(_e.E)(_e.B),updateSingleComposer:we.w,fetchOrCreateTrustedFriendsList:ve.a}))),Ie=a("MtXG"),Re=a("CKsB"),De=a("+Eiw"),Pe=a("Zg3A"),Me=a("EyD/"),ke=a("5wO0"),Oe=a("0zXz"),Ae=a("yw4N"),Le=a("FS1z"),Fe=a("Irs7");const Be=(e,{communityId:t})=>t?ge.c.select(e,t):void 0;var Ne=Object(me.a)().propsFromState((()=>({community:Be})));const je=_.a.d58baa7f;var ze=Ne(o.a.memo((e=>{const{clickHandler:t,community:a,communityId:n,selectedCommunityId:i}=e;if(!a)return null;const{member_count:s}=a;return o.a.createElement(Re.a,{actionSubText:(()=>{const e=je(s);return o.a.createElement(Ie.a.Group,null,o.a.createElement(Ie.a,null,o.a.createElement(_.a.I18NFormatMessage,{$i18n:"b38e130b"},o.a.createElement(Ie.a.Value,null,_.a.ibd0106e({formattedCount:e})),o.a.createElement(Ie.a.Label,null,_.a.cface2d1({count:s})))))})(),actionText:a.name,isSelected:i===n,key:n,media:a.media,onClick:t({_type:"community_members",communityIdValue:n,conversationControlsValue:"community_members"}),selectable:!0,style:Ve.menuItem})})));const Ve=p.a.create((e=>({menuItem:{alignItems:"center"}}))),He=_.a.e815fc34,Ue=_.a.c63602d4,We=_.a.aa4209e8,qe=_.a.d0748dae,Ge=_.a.abd845fe,$e={viewType:"audience_control"},Ke=_.a.d58baa7f,Qe=p.a.create((e=>({hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flex:1,flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"},superFollowsIcon:{backgroundImage:De.a.getBackgroundImage()},viewport:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge,flexGrow:1,flexShrink:1,overflow:"auto",zIndex:void 0}})));var Xe=e=>{var t,a,n;const{audienceControlsValue:i,dismiss:s,everyoneLabel:r,hasMemberships:l,history:c,isC9sParticipationEnabled:u,isSuperFollowsCreator:h,isTrustedFriendsEnabled:p,onAudienceControlsValueChange:m,sliceModule:g,updateSingleComposer:f}=e,y=i.communityIdValue||void 0,v=i.exclusivityControlValue||void 0,w=i.trustedFriendsValue||void 0,C=null==(t=e.trustedFriendsList)?void 0:t.rest_id,x=null!=(a=null==(n=e.trustedFriendsList)?void 0:n.member_count)?a:0,E=Object(Fe.b)(),T=o.a.useCallback((e=>()=>{m(e),["super_followers_exclusive","community_members","trusted_friends_tweet"].indexOf(e._type)>-1&&f({updates:{scheduledFor:void 0,scheduledTweetId:void 0}}),s()}),[m,f,s]),S=o.a.useCallback((()=>{if(C)return E.scribe({section:"audience_selector",component:"trusted_friends",element:"edit_list_button",action:"click"}),c.push(`/i/circles/${C}/members`)}),[E,c,C]);return o.a.createElement(d.a,{style:Qe.root},o.a.createElement(ue.a,{behavioralEventContext:$e},o.a.createElement(Ae.a,{style:Qe.viewport},o.a.createElement(o.a.Fragment,null,o.a.createElement(z.b,{size:"headline1",style:Qe.title,weight:"bold"},He),o.a.createElement(Re.a,{Icon:Pe.a,actionText:r,isSelected:!v&&!y&&!w,onClick:T({_type:"conversation_controls",conversationControlsValue:"all"}),selectable:!0,style:Qe.menuItem,withIconAsThumbnail:!0}),h?o.a.createElement(Re.a,{Icon:Me.a,actionText:We,iconThumbnailColor:"exclusive",isSelected:!!v,onClick:T({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}),selectable:!0,style:Qe.menuItem,withIconAsThumbnail:!0}):null,p&&e.trustedFriendsList&&C?o.a.createElement(Re.a,{Icon:ke.a,actionSubText:(e=>{const t=Ke(e);return o.a.createElement(Ie.a.Group,null,o.a.createElement(Ie.a,null,o.a.createElement(_.a.I18NFormatMessage,{$i18n:"g8ffaf17"},o.a.createElement(Ie.a.Value,null,_.a.a5f7b700({formattedCount:t})),o.a.createElement(Ie.a.Label,null,_.a.a7daec1e({count:e}))),o.a.createElement(b.a,{onPress:S,size:"xSmall",type:"primaryText"},Ge)))})(x),actionText:qe,iconThumbnailColor:"success",isSelected:!!w,onClick:T({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:x,trustedFriendsValue:{trusted_friends_list_id:C}}),selectable:!0,style:Qe.menuItem,withIconAsThumbnail:!0}):null),l&&g&&u?o.a.createElement(d.a,null,o.a.createElement(z.b,{style:Qe.title,weight:"bold"},Ue),o.a.createElement(Le.a,{module:g,noItemsRenderer:Oe.a,renderer:e=>o.a.createElement(ze,{clickHandler:T,communityId:e,dismiss:s,key:e,selectedCommunityId:y}),withoutHeadroom:!0})):null)))},Je=a("TIdA"),Ye=a("A91F"),Ze=a.p+"twitter-circle.b1a74a98.svg";const et=_.a.f0598964,tt=_.a.ceec051c,at=_.a.fc5bfd96,nt=_.a.f5b3dc1e,it=p.a.create((e=>({root:{flexDirection:"column",paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,paddingTop:e.spaces.space12},createButton:{marginTop:e.spaces.space16,marginHorizontal:e.spaces.space16},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16},coverContainer:{height:"170px",width:"100%"}})));var st=e=>{const{onAction:t,setShowTrustedFriendsModal:a}=e;return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{accessibilityDescribedBy:"trusted-friends-education-popover",accessibilityLabelledBy:"trustd-friends-education-title",accessibilityRole:"dialog",style:it.root},o.a.createElement(d.a,{style:it.coverContainer},o.a.createElement(Je.a,{accessibilityLabel:"",aspectMode:Ye.a.COVER,image:Ze})),o.a.createElement(d.a,{style:it.title},o.a.createElement(z.b,{nativeID:"conversation-controls-title",size:"title3",style:it.title,weight:"bold"},et),o.a.createElement(z.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body",style:it.createButton},tt),o.a.createElement(b.a,{onPress:()=>{t(),a(!0)},size:"xLarge",style:it.createButton,type:"primaryFilled"},at),o.a.createElement(b.a,{key:"button_cancel",onPress:()=>{t()},size:"xLarge",style:it.cancelButton,type:"primaryOutlined"},nt))))},ot=a("feu+"),rt=a("cOhU"),lt=a("a5gf"),ct=a("k/Ka"),dt=a("Lsrn");const ut=(e={})=>Object(ct.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[dt.a.root,e.style],viewBox:"0 0 24 24"},o.a.createElement("g",null,o.a.createElement("path",{d:"M1 7c0-.552.448-1 1-1h9.38c.545-2.275 2.83-3.678 5.104-3.135 1.552.37 2.764 1.583 3.135 3.135H22c.552 0 1 .448 1 1s-.448 1-1 1h-2.38c-.545 2.275-2.83 3.678-5.104 3.135-1.552-.37-2.764-1.583-3.135-3.135H2c-.552 0-1-.448-1-1zm21 9h-9.38c-.545-2.275-2.83-3.678-5.104-3.135-1.552.37-2.764 1.583-3.135 3.135H2c-.552 0-1 .448-1 1s.448 1 1 1h2.38c.545 2.275 2.83 3.678 5.104 3.135 1.552-.37 2.764-1.583 3.135-3.135H22c.552 0 1-.448 1-1s-.448-1-1-1z"})));ut.metadata={width:24,height:24};var ht=ut,pt=a("7JQg");const mt=_.a.e76b4486,gt=_.a.j24c37b2,bt=_.a.bb55e8ee,ft=_.a.h3fad86e,_t=_.a.g31872be,yt=_.a.b28ec850,vt=_.a.h031847a;function wt(e){const{changeAudienceToTrustedFriends:t,history:a,setShowModal:n,trustedFriendsListId:i}=e,s=o.a.useCallback((()=>{t(),i&&(n(!1),a.push(`/i/circles/${i}/members/suggested`))}),[a,n,i,t]),r=o.a.useCallback((()=>{n(!1),t()}),[n,t]),l=o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{style:Ct.contentWrapper},o.a.createElement(d.a,null,o.a.createElement(rt.a,{style:Ct.icon})),o.a.createElement(d.a,{style:Ct.subtextContainer},o.a.createElement(z.b,{align:"left",color:"text",style:Ct.subtextContainer,weight:"bold"},bt),o.a.createElement(z.b,{align:"left",color:"gray700"},ft))),o.a.createElement(d.a,{style:Ct.contentWrapper},o.a.createElement(d.a,null,o.a.createElement(lt.a,{style:Ct.icon})),o.a.createElement(d.a,{style:Ct.subtextContainer},o.a.createElement(z.b,{color:"text",weight:"bold"},_t),o.a.createElement(z.b,{color:"gray700"},yt))),o.a.createElement(d.a,{style:Ct.contentWrapper},o.a.createElement(d.a,null,o.a.createElement(ht,{style:Ct.icon})),o.a.createElement(d.a,{style:Ct.subtextContainer},o.a.createElement(z.b,{color:"text",weight:"bold"},vt),o.a.createElement(z.b,{color:"gray700"},o.a.createElement(_.a.I18NFormatMessage,{$i18n:"c97dfde5"},o.a.createElement(z.b,{color:"text",link:"https://help.twitter.com/using-twitter/twitter-circle",style:Ct.learnMore,weight:"bold",withUnderline:!0},_.a.i08a2509))))));return o.a.createElement(pt.c,null,o.a.createElement(ot.a,{actionLabel:gt,headline:mt,onAction:s,onClose:r,subtext:l,withCloseButton:!0}))}const Ct=p.a.create((e=>({subtextContainer:{display:"flex",flexDirection:"column",width:"100%"},icon:{color:e.colors.green500,paddingTop:e.spaces.space4,paddingRight:e.spaces.space24},learnMore:{whiteSpace:"nowrap"},contentWrapper:{display:"flex",flexDirection:"row",paddingTop:e.spaces.space32}})));let xt=_.a.baffe39a;const Et=_.a.e815fc34,Tt=_.a.aa4209e8,St=_.a.d0748dae,It=_.a.c33a97d6,Rt=_.a.a68885de,Dt={viewType:"communities_controls"};const Pt=p.a.create((e=>({button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},icon:{marginLeft:e.spaces.space4,width:e.spaces.space16,height:e.spaces.space16},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}})));var Mt=Se((function(e){const[t,a]=o.a.useState(!1),[n,s]=o.a.useState(!1),{addEducationFlag:r,addTrustedFriendsEducationFlag:l,audienceControlsValue:c,disabled:u,educationalVisibilityFlag:h,experiments:p,hasMemberships:m,isAccountProtected:g,isSuperFollowsCreator:f,onAudienceControlsValueChange:y,selectTrustedFriendsList:v,selectedCommunity:w,sliceModule:C,trustedFriendsEducationVisibilityFlag:x,updateSingleComposer:E}=e,{isC9sParticipationEnabled:T,isTrustedFriendsEnabled:S,trustedFriendsAudienceControlExp:I}=p,R="default_everyone"===I,D="public_followers_copy"===I&&!f&&!m&&!S,P=c.communityIdValue||!1,M=c.exclusivityControlValue||!1,k=c.trustedFriendsValue||!1,O=null==v?void 0:v.rest_id,A=S&&x,L=h&&!w||A;xt=!D||S||f||m||g?!D||!g||S||f||m?_.a.baffe39a:Rt:It;let F,B=xt;if(P&&null!=w&&w.name?B=w.name:M?B=Tt:k&&(B=St),M)F={color:"plum500",borderColor:"plum500",backgroundColor:"transparent"};else if(k)F={color:"green500",borderColor:"green500",backgroundColor:"transparent"};else if(P&&null!=w&&w.theme){const e=oe.a.getCommunityUIColorName(w.theme);F={color:e,borderColor:e,backgroundColor:"transparent"}}else F={type:"brandOutlined"};Object(de.a)((()=>{const{fetchOrCreateTrustedFriendsList:t}=e;S&&(null==t||t())}));const N=o.a.useCallback((()=>{s(!1),r(),l()}),[r,l]),j=o.a.useCallback((e=>A&&!P?o.a.createElement(st,{history:re.a,onAction:e,setShowTrustedFriendsModal:a}):o.a.createElement(Xe,{audienceControlsValue:c,dismiss:e,everyoneLabel:xt,hasMemberships:m,history:re.a,isC9sParticipationEnabled:T,isSuperFollowsCreator:f,isTrustedFriendsEnabled:S,onAudienceControlsValueChange:e=>{N(),y(e)},sliceModule:C,trustedFriendsList:v,updateSingleComposer:E})),[N,C,E,c,m,T,f,v,y,P,A,S]),z=o.a.useCallback((()=>{O&&y({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:null==v?void 0:v.member_count,trustedFriendsValue:{trusted_friends_list_id:O}})}),[y,O,v]);return R||D||f||m||S&&e.selectTrustedFriendsList?o.a.createElement(ue.a,{behavioralEventContext:Dt},o.a.createElement(d.a,{style:Pt.container},t?o.a.createElement(wt,{changeAudienceToTrustedFriends:z,history:re.a,setShowModal:a,trustedFriendsListId:O}):null,o.a.createElement(le.a,{onDismiss:N,onOpen:()=>{s(!0)},renderContent:j,visibilityBehavior:L&&!t?"forceVisible":"interactive"},o.a.createElement(b.a,i()({accessibilityExpanded:n,accessibilityHasPopup:"menu",accessibilityLabel:Et,accessibilityRole:"button",disabled:u,size:"xSmall"},F),B,o.a.createElement(ce.a,{style:Pt.icon}))))):null})),kt=a("21zW"),Ot=a("YeIG"),At=a("PKbs");const Lt=(e,t)=>{const a=t.selectedCommunityId;return a?ge.c.select(e,a):void 0};var Ft=Object(me.a)().propsFromState((()=>({community:Lt}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(pe.createLocalApiErrorHandlerWithContextFactory)("COMMUNITY_RULES"),fetchCommunityIfNeeded:ge.c.fetchOneIfNeeded})));const Bt=_.a.gfca5254,Nt=_.a.f510c8b2,jt=o.a.createElement(z.b,{weight:"bold"},Nt),zt=p.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},badgeStyle:{marginRight:e.spaces.space12},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12,alignItems:"baseline"},rulesHeader:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space12},ruleContainerStyle:{paddingHorizontal:e.spaces.space16,fontWeight:"normal"}})));var Vt=Ft((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,selectedCommunityId:n,showMiddot:s})=>{o.a.useEffect((()=>{n&&Object(Ot.a)(e)&&a(n).catch(t())}),[e,n,t,a]);const[r,l]=o.a.useState(!1),c=o.a.useCallback((t=>{if(null!=e&&e.rules){const{rules:t,theme:a}=e;return o.a.createElement(At.b,{badgeStyle:zt.badgeStyle,headerContainerStyle:zt.rulesHeader,heading:jt,ruleContainerStyle:zt.ruleContainerStyle,rules:t,theme:a})}return null}),[e]);if(null!=e&&e.rules&&e.rules.length>0){const{theme:t}=e,a={color:oe.a.getCommunityUIColorName(t),borderColor:"transparent",backgroundColor:"transparent"};return o.a.createElement(d.a,{style:zt.container},s?o.a.createElement(kt.a,null):null,o.a.createElement(le.a,{onDismiss:()=>l(!1),onOpen:()=>l(!0),renderContent:c},o.a.createElement(b.a,i()({accessibilityExpanded:r,accessibilityHasPopup:"dialog",accessibilityRole:"button",size:"xSmall",style:zt.button},a),Bt)))}return null})),Ht=a("ii+P");const Ut=_.a.g46f363e,Wt={viewType:"rule_education"},qt=()=>{const[e,t]=Object(Ht.b)(_e.g);return o.a.useEffect((()=>t),[t]),e?o.a.createElement(d.a,{style:Gt.container},o.a.createElement(g.a,{behavioralEventContext:Wt,onClose:t,text:Ut,withCloseButton:!0})):null},Gt=p.a.create((e=>({container:{marginBottom:e.spaces.space8}})));var $t=o.a.memo(qt),Kt=a("gpVt"),Qt=a("07FG"),Xt=a("v6aA"),Jt=a("cIoY"),Yt=a("b5s6"),Zt=a("rcen"),ea=a("xM7j"),ta=a("wpu3"),aa=a("Q8CU"),na=a("MLl7"),ia=a("QbaN"),sa=a("DlMI"),oa=a("gBde"),ra=a("gUPl"),la=a("9gvj");const ca=(e,t)=>Object(_e.I)(e,_e.t);var da=Object(me.a)().propsFromState((()=>({shouldShowEducation:ca}))).propsFromActions((()=>({addEducationFlag:()=>Object(_e.E)(_e.t)})));const ua=_.a.aa65a44a,ha={viewType:"persistent_conversation_controls_education"};const pa=p.a.create((e=>({container:{width:"100%"}})));var ma=da((function({addEducationFlag:e,buttonRef:t,shouldShowEducation:a}){const{featureSwitches:n}=o.a.useContext(Xt.a),i=()=>{e()};return o.a.useEffect((()=>i),[]),!0===n.getValueWithoutScribeImpression("conversation_controls_persistence_enabled")&&a?o.a.createElement(d.a,{style:pa.container},o.a.createElement(la.a,{behavioralEventContext:ha,containerRef:t,onClose:i,text:ua})):null})),ga=a("yZqq"),ba=a("H7Rt");const fa=o.a.createElement(sa.a,null),_a=o.a.createElement(oa.a,null),ya=o.a.createElement(ra.a,null),va=o.a.createElement(rt.a,null),wa=o.a.createElement(lt.a,null),Ca="conversation_control",xa={viewType:Ca};Object.freeze(["community","by_invitation"]);var Ea=Object(Fe.a)((e=>{const{analytics:t,...a}=e,{disabled:n,isReply:i,trustedFriendsTweetAuthorScreenName:s,value:r}=e,l=_.a.bea21405;let c=_.a.c0857cce;i&&r===ba.a.trusted_friends_tweet&&(c=s?l({screenName:s}):_.a.d3922d78);const u=Object.freeze({all:{icon:fa,label:_.a.i8ea6d4e},community:{icon:ya,label:_.a.ec5a4a26},by_invitation:{icon:_a,label:_.a.b454300a},community_members:{icon:va,label:_.a.i13be5a0},super_followers_exclusive:{icon:fa,label:_.a.f8393bda},trusted_friends_tweet:{icon:wa,label:c}}),{icon:h,label:p}=u[r],[m,g]=o.a.useState(!1),f=o.a.useRef(null);Object(de.a)((()=>{r!==ba.a.all&&r!==ba.a.community_members&&g(!0)}));const y=o.a.useCallback((e=>{t.scribe({element:Ca,action:"click"})}),[t]);return o.a.createElement(ue.a,{behavioralEventContext:xa},o.a.createElement(d.a,{style:Ta.educationContainer},m?o.a.createElement(ma,{buttonRef:f}):null,o.a.createElement(d.a,{style:Ta.controlsContainer},o.a.createElement(ga.a,a,o.a.createElement(b.a,{disabled:n,icon:h,onPress:y,ref:f,size:"xSmall",style:Ta.button,type:"brandText"},p)))))}));const Ta=p.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},educationContainer:{display:"inline-flex",flexDirection:"column"},controlsContainer:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12}})));var Sa=a("krmn"),Ia=a("w3n3"),Ra=a("G31s"),Da=a("zmS9"),Pa=a("VPdC"),Ma=a("WPfJ");var ka=p.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},controlsContainer:{marginLeft:-e.spacesPx.space8,borderBottomColor:e.colors.borderColor,borderBottomWidth:e.spaces.space1,flexWrap:"wrap",width:"100%"},mobileControlsLayout:{flexDirection:"column"},controlsLayout:{flexDirection:"row",alignItems:"center"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:Ma.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.title4,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:Ma.e},iconEmojiPicker:{zIndex:Ma.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:Ma.a},firstToolBarButton:{marginLeft:`-${e.spaces.space8}`},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.title2,marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space12} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:`-${e.spaces.space4}`},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},mediaPreview:{marginTop:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginHorizontal:e.spaces.space4},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingLeft:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4},taggedLocationButton:{paddingLeft:e.spacesPx.space8+e.spacesPx.space2,paddingRight:e.spacesPx.space8+e.spacesPx.space2,maxWidth:"100%"},taggedLocationContainer:{display:"inline-flex",flexDirection:"row",minWidth:0,flexShrink:1,paddingBottom:e.spaces.space12}})));const Oa=_.a.bdbcdd94;var Aa=({media:e,mediaAttachDisabled:t,onFilesAdded:a,setActiveParentKey:n})=>{const i=t||e.length>=4,s=e.length<3;return o.a.createElement(Pa.a,{acceptGifs:0===e.length,acceptVideo:0===e.length,accessibilityLabel:e.length>0?Oa:void 0,disabled:i,multiple:s,onChange:a,onPress:n,style:[ka.toolBarButton,ka.firstToolBarButton],type:"brandText"})},La=a("jtO7"),Fa=a("p+r5"),Ba=a("GWvE");class Na extends o.a.Component{constructor(...e){super(...e),this._setInputRef=e=>{this._inputRef=e}}render(){const{autoFocus:e,defaultValue:t,editable:a,label:n,name:i,onBlur:s,onChange:r}=this.props;return o.a.createElement(d.a,{style:ja.root},o.a.createElement(Fa.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:n,maxLength:25,name:i,onBlur:s,onChange:r,ref:this._setInputRef,spellCheck:"false",style:ja.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object(Ba.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}Na.defaultProps={autoFocus:!1,editable:!0,optional:!1};const ja=p.a.create((e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}})));var za=Na,Va="addPollChoice",Ha="selectPollDays",Ua="selectPollHours",Wa="selectPollMinutes",qa="removePollButton",Ga=a("6XNv"),$a=a("mtvn");class Ka extends o.a.PureComponent{render(){const{editable:e,label:t,last:a,max:n,min:i,onChange:s,testID:r,value:l}=this.props,c=!e||i===n,d=l.toString(),u=Object($a.a)(i,n+1).map((e=>({label:`${_.a.ia24dc8d(e)}`,value:`${e}`})));return o.a.createElement(Ga.a,{disabled:c,label:t,onChange:s,options:u,style:[Qa.selector,!a&&Qa.rightMargin],testID:r,value:d})}}Ka.defaultProps={last:!1};const Qa=p.a.create((e=>({rightMargin:{marginRight:e.spaces.space20},selector:{flexGrow:1}})));var Xa=Ka;const Ja=_.a.caf8edc4,Ya=_.a.g93586be,Za=_.a.d073b644,en=_.a.a2f0728e;class tn extends o.a.Component{constructor(e,t){super(e,t),this._handleDaysChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{hours:n,minutes:i}=e.duration,s=0===a&&0===n&&0===i?1:7===a?0:n,o={days:a,hours:s,minutes:7===a?0:0===a&&0===s&&i<5?5:i};return t&&t(o),{duration:o}}))},this._handleHoursChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:n,minutes:i}=e.duration,s={days:n,hours:a,minutes:0===n&&0===a&&i<5?5:i};return t&&t(s),{duration:s}}))},this._handleMinutesChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:n,hours:i}=e.duration,s={days:n,hours:i,minutes:a};return t&&t(s),{duration:s}}))},this.state={duration:e.initialDuration}}render(){const{isActive:e,style:t}=this.props;return o.a.createElement(d.a,{style:t},o.a.createElement(z.b,{style:an.durationLabel},e?Ja:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:n,minutes:i}}=this.state;return o.a.createElement(d.a,{style:an.durationControls},o.a.createElement(Xa,{editable:e&&t,label:Ya,max:7,min:0,onChange:this._handleDaysChange,testID:Ha,value:a}),o.a.createElement(Xa,{editable:e&&t,label:Za,max:7===a?0:23,min:0,onChange:this._handleHoursChange,testID:Ua,value:n}),o.a.createElement(Xa,{editable:e&&t,label:en,last:!0,max:7===a?0:59,min:0===a&&0===n?5:0,onChange:this._handleMinutesChange,testID:Wa,value:i}))}get duration(){return this.state.duration}}tn.defaultProps={editable:!0,initialDuration:{days:1,hours:0,minutes:0}};const an=p.a.create((e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}})));var nn=tn;const sn=_.a.g589c2e2,on=_.a.a1e6c3a2,rn=_.a.a739e006,ln=_.a.d89a5b92,cn=_.a.c2a8118e,dn=_.a.a8ede1de,un=_.a.af40a8e0;class hn extends o.a.Component{constructor(e,t){super(e,t),this._setChoice1Ref=e=>{this._choice1=e},this._setChoice2Ref=e=>{this._choice2=e},this._setChoice3Ref=e=>{this._choice3=e},this._setChoice4Ref=e=>{this._choice4=e},this._setDurationPickerRef=e=>{this._durationPicker=e},this._handleValidation=()=>{const{onChange:e,onInvalid:t,onValid:a}=this.props,n=this.choices,{_choice1:i,_choice2:s,_choice3:o,_choice4:r}=this,l=[i,s,o,r].filter(Boolean).every((e=>e.isValid));n&&n.length>=2&&l?a():t(),e&&e({choices:n,duration:this.duration})},this._handleAdd=()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState((({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1})))},this._handleDurationChange=e=>{const{onChange:t}=this.props;t&&t({choices:this.choices,duration:e})},this._handleBlur=()=>{const{onBlur:e}=this.props;null==e||e()};const{initialChoices:a}=e,n=void 0===a,i=(a||[]).length,s=i>2?i:2;this.state={autoFocus:n,choiceCount:s}}_renderChoices(){const{editable:e,initialChoices:t=[],isActive:a}=this.props,{autoFocus:n,choiceCount:i}=this.state,s=o.a.createElement(d.a,{style:pn.rightColumn},i<4?o.a.createElement(b.a,{accessibilityLabel:dn,disabled:!(e&&a),hoverLabel:{label:un},icon:o.a.createElement(W.a,null),onPress:this._handleAdd,size:"medium",style:pn.addButton,testID:Va,type:"brandText"}):null);return o.a.createElement(d.a,{style:pn.choicesAndAddButton},o.a.createElement(d.a,{style:pn.choices},o.a.createElement(za,{autoFocus:n,defaultValue:t[0],editable:e&&a,label:sn,name:"Choice1",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice1Ref}),o.a.createElement(za,{defaultValue:t[1],editable:e&&a,label:on,name:"Choice2",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice2Ref}),i>=3?o.a.createElement(za,{autoFocus:n,defaultValue:t[2],editable:e&&a,label:rn,name:"Choice3",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===i?o.a.createElement(za,{autoFocus:n,defaultValue:t[3],editable:e&&a,label:ln,name:"Choice4",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),s)}render(){const{editable:e,initialDuration:t,isActive:a,onRemove:n}=this.props;return o.a.createElement(d.a,{style:pn.root},this._renderChoices(),o.a.createElement(nn,{editable:e,initialDuration:t,isActive:a,onChange:this._handleDurationChange,ref:this._setDurationPickerRef,style:pn.durationPicker}),o.a.createElement(d.a,{style:pn.removePollButton},o.a.createElement(La.a,{color:"red500",label:cn,onPress:n,testID:qa})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:n}=this;return[e&&e.value,t&&t.value,a&&a.value,n&&n.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const pn=p.a.create((e=>({root:{backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,flexDirection:"column",overflow:"hidden",paddingTop:e.spaces.space12},choicesAndAddButton:{paddingHorizontal:e.spaces.space12,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse"},addButton:{marginBottom:e.spaces.space24,marginLeft:e.spaces.space4},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:e.borderWidths.small,padding:e.spaces.space12}})));var mn=Object(Fe.a)(hn);var gn=({composerIndex:e,editable:t,initialChoices:a,initialDuration:n,isActive:s,isPollValid:r,updateComposer:l})=>{const c=Object(Fe.b)(),{onChange:d,...u}=o.a.useMemo((()=>({onChange(t){l({pollChoices:null==t?void 0:t.choices,pollDuration:null==t?void 0:t.duration},e)},onValid(){!r&&l({pollValid:!0},e)},onInvalid(){r&&l({pollValid:!1},e)},onRemove(){c.scribe({element:"remove_poll",action:"click"}),l({pollActive:!1},e)}})),[c,r,l,e]),h=o.a.useMemo((()=>Object(S.a)((({choices:e,duration:t})=>{d({choices:e,duration:t})}),200,{leading:!0,trailing:!0})),[d]),p=o.a.useCallback((()=>{h.flush()}),[h]);return o.a.createElement(mn,i()({editable:t,initialChoices:a,initialDuration:n,isActive:s,onBlur:p,onChange:h},u))};const bn=p.a.create((e=>({container:{marginBottom:e.spaces.space4},link:{color:"black"}}))),fn=_.a.i859676c,_n=o.a.createElement(_.a.I18NFormatMessage,{$i18n:"a02c8d75"},o.a.createElement(z.b,{link:"/settings/audience_and_tagging",style:bn.link,withInteractiveStyling:!0,withUnderline:!0},_.a.i3a8d60a));function yn(){return o.a.createElement(d.a,{style:bn.container},o.a.createElement(g.a,{headline:fn,text:_n}))}var vn="addButton",wn="addSubtitlesLabel",Cn="altTextLabel",xn="altTextWrapper",En="tagPeopleLabel",Tn="attachments",Sn="createPollButton",In="geoButton",Rn="gifSearchButton",Dn="scheduleOption",Pn="taggedUsersLabel",Mn="tweetTextarea_",kn="toolBar",On="scheduledTweetIndicator";const An=_.a.f0afcc0e,Ln=_.a.ha5e2e7a,Fn=_.a.a3de3b68,Bn=_.a.cc2b28fc,Nn=_.a.g45af04e,jn=_.a.j1d5791c,zn=_.a.ee9c4014,Vn=_.a.af40a8e0,Hn=_.a.e68b09b4,Un=_.a.ec10ee02,Wn=_.a.h735a98e,qn=_.a.c4ccfbe2,Gn=_.a.j499fbcb,$n=_.a.b7d8e3f1,Kn=_.a.d1175c78,Qn=_.a.bf4e9d7a,Xn=_.a.e0342f98,Jn=_.a.e349147c,Yn=_.a.e3a24e4c,Zn=_.a.fbd24526,ei=_.a.de4669e2,ti=_.a.d2c7a41c,ai=_.a.f7364fa2,ni=["ja","zh-cn","zh-tw","ko"],ii=_.a.ia24dc8d,si=o.a.createElement(U.a,null),oi=o.a.createElement(W.a,null),ri=o.a.createElement(q.a,null),li=o.a.createElement(G.a,null),ci={viewType:"schedule_tweet"},di={viewType:"add_poll"},ui={viewType:"add_composer"},hi={viewType:"tag_location"};class pi extends o.a.Component{constructor(e,t){super(e,t),this._handleConversationControlsValueChange=e=>{this._handleAudienceControlsValueChange({_type:"conversation_controls",conversationControlsValue:e})},this._handleAudienceControlsValueChange=e=>{this.props.updateAudienceControlsValue(e)},this._triggerConversationControlsImpression=Object(w.a)((()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled"))),this._shouldRenderControls=(e,t)=>{const{isFocused:a}=this.state,{audienceControlsValue:n,isActive:i,isInline:s,isReply:o}=this.props;if("conversation"===t&&(n.conversationControlsValue===ba.a.community_members||n.conversationControlsValue===ba.a.super_followers_exclusive||n.conversationControlsValue===ba.a.trusted_friends_tweet)&&o)return!0;return i&&!o&&(!s||(a||e))},this._renderConversationControls=e=>{const{isFocused:t}=this.state,{audienceControlsValue:a,isEdit:n,isInline:i,isReply:s,trustedFriendsTweetAuthorScreenName:r}=this.props;if(s||!t&&i||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const l=a.conversationControlsValue,c=this._shouldRenderControls(e,"conversation"),d=!(l!==ba.a.community_members&&l!==ba.a.super_followers_exclusive&&l!==ba.a.trusted_friends_tweet&&!n)||this._isScheduled();return c?o.a.createElement(Ea,{disabled:d,isReply:s,onChange:this._handleConversationControlsValueChange,trustedFriendsTweetAuthorScreenName:r,value:l}):null},this._renderTaggedLocation=e=>o.a.createElement(d.a,{style:ka.taggedLocationContainer},o.a.createElement(b.a,{icon:o.a.createElement($.a,null),onPress:this._handleGeoButtonClick,size:"xSmall",style:ka.taggedLocationButton,type:"brandText"},e.place.full_name)),this._renderMainContent=()=>{const{additionalToolbarContent:e,audienceControlsValue:t,data:a,index:n,isExpanded:i,isInline:s,isInlineReply:r,onTypeaheadStateChange:l,richTextInputContext:c}=this.props,{cardUrl:u,media:h,pollActive:p,quotedStatus:m,text:g}=a,b=Object(Kt.b)(g)||u&&!Object(Qt.a)(u)&&[u],f=!!h.length||p||!!m,_=this.props.typeaheadWrapper,y=!this._isEmpty(),v=this.context.featureSwitches.isTrue("c9s_community_composer_hashtag_suggestions_enabled")&&t.communityIdValue||void 0;return o.a.createElement(d.a,{style:ka.textInputArea},o.a.createElement(d.a,{style:i?ka.inputStyle:ka.collapsedInputStyle},this._renderAudienceControls(y),o.a.createElement(_,{composeCommunityId:v,contextText:g,isInline:s,isInlineReply:r,onTextUpdated:c?this._handleRichTextChange:this._handlePlainTextChange,onTypeaheadStateChange:l},this._renderFieldTextInput),b&&!f?o.a.createElement(Kt.a,{index:n,isCardPreviewTombstoned:Object(Qt.a)(u),urls:b}):null),i?null:e)},this._renderFieldTextInput=e=>{const{autoFocus:t,data:a,editable:n,index:s,isActive:r,isExpanded:l,isInline:c,isInlineReply:d,isLast:u,keyCommandHandlers:h,onTextInputBlur:p,positionCursorAtBeginning:m,richTextInputContext:g}=this.props,{isFocused:b}=this.state,{text:f}=a,_=0===s&&u,y=!!g,{dismissComposerCommandName:v,element:w,sendTweetCommandName:C}=g||{},x=d&&!g&&!l,E=g?{onChange:this._getHandleRichTextChange(e),richTextInputContext:{dismissComposerCommandName:v,editorState:this.state.editorState,element:w,sendTweetCommandName:C}}:{onChange:this._getHandlePlainTextChange(e)};return o.a.createElement(O.a,i()({appTextSize:"headline1",ariaLabel:Fn,autoFocus:t||r&&!c,closeButton:r&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!_?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:n,inputStyle:[ka.textInputStyle,x&&ka.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:y?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:p,onFilesAdded:this._handleFilesAdded,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:m,positionCursorAtEnd:!m,ref:this._setTextInputRef,styleType:"selection",testID:`${Mn}${s}`,useCacheForDOMMeasurements:b,value:f},E))},this._getHandleRichTextChange=Object(w.a)((e=>t=>{e(t),this._handleRichTextChange(t)})),this._getHandlePlainTextChange=Object(w.a)((e=>t=>{e(t),this._handlePlainTextChange(t)})),this._renderCommunityTweetFromProtectedUserCallout=()=>{const{index:e,isCommunityTweetFromProtectedUser:t}=this.props;return 0===e&&t?o.a.createElement(yn,null):null},this._renderAudienceControls=e=>{const{audienceControlsValue:t,index:a,isAccountProtected:n,isEdit:i,isSuperFollowsCreator:s}=this.props,r=this.context.featureSwitches.isTrue("c9s_participation_enabled"),l=this.context.featureSwitches.isTrue("super_follow_exclusive_tweet_creation_api_enabled"),c=this.context.featureSwitches.isTrue("trusted_friends_tweet_creation_enabled"),d={isC9sParticipationEnabled:r,isTrustedFriendsEnabled:c,trustedFriendsAudienceControlExp:this.context.featureSwitches.getStringValue("trusted_friends_audience_control_exp_variant")};return this._shouldRenderControls(e,"audience")&&0===a&&(r||l||c)?o.a.createElement(Mt,{audienceControlsValue:t,disabled:i,experiments:d,isAccountProtected:n,isSuperFollowsCreator:s&&l,onAudienceControlsValueChange:this._handleAudienceControlsValueChange}):null},this._renderCommunitiesRulesEducation=()=>this.shouldRenderCommunitiesRules?o.a.createElement($t,null):null,this._renderCommunitiesRules=e=>{const{audienceControlsValue:t}=this.props,a=t.communityIdValue||void 0;return this.shouldRenderCommunitiesRules&&a?o.a.createElement(Vt,{selectedCommunityId:a,showMiddot:!e}):null},this._calcNumberOfLines=()=>{const{data:e,isActive:t,isInline:a,richTextInputContext:n}=this.props,i=!!n,{media:s,pollActive:o,quotedStatus:r}=e,l=!!s.length||!!o||!!r;return i&&(a||l)||!t?1:4},this._renderScheduledTweetLegend=()=>{const{scheduledFor:e}=this.props;return o.a.createElement(Da.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e,testID:On})},this._handlePressScheduledTweetLegend=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"tweet_legend",action:"click"}),a()},this._renderEmojiPicker=()=>o.a.createElement(Sa.a,{onEmojiSelect:this._handleInsertEmoji,size:"medium",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0}),this._getEmojiPickerButtonStyles=Object(w.a)((()=>[ka.iconEmojiPicker,ka.toolBarButton])),this._isSchedulingDisabled=()=>{const{audienceControlsValue:e,data:{media:t,mediaTags:a,pollActive:n,quotedStatus:i,text:s},index:o,isEdit:r,isLast:l}=this.props,c=0===o&&l,d=e.conversationControlsValue!==ba.a.all;return Boolean(n||r||!c||i&&""===s&&!t.length||d||a.length>0)},this._renderSchedulingButton=()=>o.a.createElement(b.a,{accessibilityLabel:Ln,behavioralEventContext:ci,disabled:this._isSchedulingDisabled(),hoverLabel:{label:Wn},icon:li,onClick:this._handleClickScheduler,size:"medium",style:ka.toolBarButton,testID:Dn,type:"brandText"}),this._handleClickScheduler=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()},this._renderCloseButton=()=>{const{onRemoveComposer:e}=this.props;return o.a.createElement(b.a,{accessibilityLabel:zn,hoverLabel:{label:Hn},icon:si,onPress:e,size:"xSmall",type:"brandText"})},this._renderTweetAttachment=()=>{const{data:e,editable:t,index:a,isActive:n,updateSingleComposer:i}=this.props,{media:s,pollActive:r,pollChoices:l,pollDuration:c,quotedStatus:u}=e;if(0===s.length&&!r&&!u)return null;const h=this.hasAttachedVideo&&(this._videoTrimmerEnabled?"trimmer":"subtitles"),p=this.hasAttachedImage?this._handleClickMediaDetail("crop"):void 0,m=this.hasAttachedImage||this.hasAttachedVideo?this._handleClickMediaDetail("sensitive_media"):void 0,g=this.hasAttachedImage?this._handleClickMediaDetail("crop"):h?this._handleClickMediaDetail(h):void 0;return o.a.createElement(d.a,{onClick:this._handleFocus,style:[ka.attachmentContainer,ka.tweetAttachmentArea],testID:Tn},s.length>0?o.a.createElement(Ra.a,{editable:t,isActive:n,media:s,onClickMedia:this.isEditMediaEnabled?p:void 0,onEditMedia:this.isEditMediaEnabled?g:void 0,onEditSensitiveWarning:this.isEditMediaEnabled?m:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:ka.mediaPreview}):null,n?this._renderMediaActions():null,r?o.a.createElement(gn,{composerIndex:a,editable:t,initialChoices:l,initialDuration:c,isActive:n,isPollValid:e.pollValid,updateComposer:i}):null,u?this._renderQuoteTweet(u):null)},this._renderQuoteTweet=e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?o.a.createElement(ea.a,null,o.a.createElement(Zt.a,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):o.a.createElement(Yt.a,{isCondensed:t.length>0,style:ka.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})},this._renderToolbar=e=>{const{additionalToolbarContent:t,data:{media:a},hidePoll:n,hideScheduling:i,isInlineReply:s,isReply:r,isSelfThreadReply:l,richTextInputContext:c,setActiveParentKey:u}=this.props,h=!!c,p=!s&&!n,m=!s&&!i,g=this.context.featureSwitches.isTrue("responsive_web_reply_storm_enabled"),b=e&&(!r||l||g);return o.a.createElement(d.a,{style:ka.toolBar,testID:kn},o.a.createElement(d.a,{style:ka.toolBarIconsContainer},o.a.createElement(Aa,{media:a,mediaAttachDisabled:this.mediaAttachDisabled,onFilesAdded:this._handleFilesAdded,setActiveParentKey:u}),this._renderGifButton(),p?this._renderPollButton():null,h?this._renderEmojiPicker():null,m?this._renderSchedulingButton():null,this._renderGeoButton()),o.a.createElement(d.a,{style:ka.toolBarIconsContainer},e?this._renderCountdownCircle():null,b&&o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{style:ka.separator}),this._renderAddComposerButton()),t))},this._addOverflowStyle=e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),n=a.length,i=this._getParsedTweet(a).validRangeEnd,s=i+1<n;if(this.state.hasOverflowStyle||s){const a=s?i+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:s}}return{editorState:e,hasOverflowStyle:s}},this._handleRichTextChange=e=>{const{richTextInputContext:t}=this.props,a=e.getCurrentContent().getPlainText();if(t){const a=t.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(a))}this._handleTextValueChange(a)},this._handlePlainTextChange=e=>{const t=A.a.replaceCarriageReturns(e.target.value);this._handleTextValueChange(t)},this._handleTextValueChange=e=>{const{data:{key:t,text:a},onTextChange:n}=this.props;a!==e&&n(e,t)},this._handleClickAltTextShortcut=()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})},this._handleClickSubtitlesShortcut=()=>{const{analytics:e}=this.props;e.scribe({element:"subtitles_button",action:"click"})},this._handleClickMediaDetail=e=>t=>()=>{const{analytics:a,history:n}=this.props;a.scribe({element:"media_detail_button",action:"click"}),(this.hasAttachedImage||this.hasAttachedVideo)&&n.push("/compose/tweet/media",{mediaId:t,tab:e})},this._handleFilesAdded=e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:n}=this.props;a?t({text:Bn}):this.isEditMediaEnabled&&n(e)},this._handleMediaRemoveFactory=e=>()=>{this.props.onRemoveMedia(this.props.index,e)},this._handleInsertEmoji=e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a||!t)return;const n=a.insertTextAtCursor(t,e.text);this._handleRichTextChange(n)},this._validateMedia=e=>{const{data:{media:t}}=this.props;return ta.c(t.concat(e))},this._handlePollAdd=()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)},this._handleGeoButtonClick=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/place_picker"),e.scribe({element:"tag_location",action:"click"}),a()},this._handleWrapperClick=e=>{e.target instanceof Element&&e.target.closest('[role="button"],a,input,textarea,select')||this.focus()},this._handleFocus=()=>{const{index:e,isActive:t,onFocus:a,setActiveParentKey:n}=this.props;n(),t||(window.requestAnimationFrame((()=>{this._mediaPreviewRef&&this._mediaPreviewRef.playVideo()})),a(e))},this._handleEditorFocus=()=>this.setState({isFocused:!0}),this._formatCountdownNumber=e=>ii(Math.ceil(e/this._userLanguageWeight)),this._getPlaceHolderText=()=>{const{data:{pollActive:e,quotedStatus:t},index:a,isReply:n,isSelfThreadReply:i}=this.props;return t?ei:e?ai:this.isReplyOrReplyThread&&0===a?ti:n&&!i&&a>0?Zn:i||a>0?Yn:Jn},this._getNumberOfAltTextEntries=()=>{const{data:{media:e}}=this.props;return e.reduce(((e,t)=>{var a;return null!=(a=t.mediaMetadata)&&a.altText?e+1:e}),0)},this._getParsedTweet=Object(w.a)((e=>{const t=se.a[this.props.twitterTextConfigurationVersion];return ne()(e,t)})),this._isEmpty=()=>{const{data:e}=this.props;return Object(aa.c)(e)},this._isScheduled=()=>{const{data:{scheduledFor:e}}=this.props;return Object(ia.h)(e)},this._autotagLocationIfNeeded=()=>{const{data:{taggedLocation:e},fetchAutotaggedLocationIfNeeded:t,index:a,updateSingleComposer:n}=this.props;t().then((t=>{void 0===e&&n({taggedLocation:null!=t?t:null},a)}))},this._handleSetMediaPreviewRef=e=>{this._mediaPreviewRef=e},this._setTextInputRef=e=>{this._textInputRef=e};const{data:{text:a},richTextInputContext:n,userLanguage:s}=e,{initEditorState:r}=n||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=s&&ni.indexOf(s)>-1?2:1,this._autotagLocationIfNeeded(),this.state={editorState:r?r(a):null,hasOverflowStyle:!1,isFocused:!1}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some((e=>e.mediaFile&&!(e.mediaFile instanceof te.a)&&e.mediaFile.isVideo)))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef.pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{data:{taggedLocation:e},isActive:t,isExpanded:a,isInline:n,isLast:i,loggedInUser:s,windowWidth:r,withAvatar:l}=this.props,c=!this._isEmpty(),u=this._shouldRenderControls(c),h=r<p.a.theme.breakpoints.small;return o.a.createElement(d.a,{onClick:this._handleWrapperClick,onFocus:this._handleFocus,style:[ka.root,!t&&ka.blurStyle]},this._renderCommunityTweetFromProtectedUserCallout(),o.a.createElement(L.a,{avatarCell:o.a.createElement(o.a.Fragment,null,l?o.a.createElement(F.a.Consumer,null,(({avatarSize:e})=>o.a.createElement(B.default,{accessibilityLabel:s?s.name:void 0,screenName:s?s.screen_name:void 0,size:e,style:ka.avatar,uri:s?s.profile_image_url_https:void 0,withLink:n}))):null,i?null:o.a.createElement(d.a,{style:[ka.conversationLine,!l&&ka.conversationLineWithOverflow]})),avatarCellStyle:a?ka.avatarContainerExpanded:ka.avatarContainer,cellStyle:ka.rightColumn},this._renderScheduledTweetLegend(),o.a.createElement(d.a,{onFocus:this._handleEditorFocus,style:ka.inputArea},o.a.createElement(N.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleFilesAdded,style:ka.dragDrop},(e=>o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{style:ka.composeBoxContainer},this._renderMainContent()))))),this._renderCommunitiesRulesEducation(),o.a.createElement(d.a,{style:[(u||e)&&ka.controlsContainer,h?ka.mobileControlsLayout:ka.controlsLayout]},this._renderConversationControls(c),this._renderCommunitiesRules(h),e?this._renderTaggedLocation(e):null),o.a.createElement(j.a,{show:t&&a},this._renderToolbar(c))))}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:n,setActiveParentKey:i}=this.props,s=t||e.length||!n||!this.isEditMediaEnabled;return o.a.createElement(Ia.a,{enabled:!s,gifSearchKeySource:na.a.Composition,history:a,onPress:i,testID:Rn})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},isEdit:n,loggedInUser:i}=this.props,s=this._isScheduled(),r=!!(t||e.length||a||s||!i||n);return o.a.createElement(b.a,{accessibilityLabel:An,behavioralEventContext:di,disabled:r,hoverLabel:{label:Un},icon:ri,onPress:this._handlePollAdd,size:"medium",style:ka.toolBarButton,testID:Sn,type:"brandText"})}_renderGeoButton(){const{data:{taggedLocation:e},geoEnabled:t,loggedInUser:a}=this.props,n=!(t&&a),i=e?o.a.createElement($.a,null):o.a.createElement(K.a,null);return o.a.createElement(b.a,{accessibilityLabel:qn,behavioralEventContext:hi,disabled:n,hoverLabel:{label:qn},icon:i,onPress:this._handleGeoButtonClick,size:"medium",style:ka.toolBarButton,testID:In,type:"brandText"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,n=0!==a.length,i=t.some((e=>e.mediaFile&&e.mediaFile.isGif))||this.hasExternalMedia;if(!(this.hasAttachedImage||this.hasAttachedVideo||e||i))return null;const s=this.context.featureSwitches.isTrue("rweb_video_tagging_enabled");return o.a.createElement(d.a,{style:ka.imageActions},e&&e.url&&e.provider?o.a.createElement(d.a,{style:ka.addImageTextPadding},o.a.createElement(Jt.a,{gifUrl:e.url,provider:e.provider})):null,!this.hasAttachedImage&&!s||this._isScheduled()?null:o.a.createElement(z.b,{accessibilityLabel:Kn,color:"gray700",link:"/compose/tweet/tags",style:[ka.addImageTextContainer,ka.addImageTextPadding]},n?this._renderTaggedUsers():this._renderTagPeopleLabel()),this.hasAttachedImage||i?o.a.createElement(z.b,{accessibilityLabel:Gn({numberOfImages:t.length}),color:"gray700",link:this.isEditMediaEnabled?{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}}:void 0,onPress:this.isEditMediaEnabled?this._handleClickAltTextShortcut:void 0,style:ka.addImageTextContainer,testID:xn},this._renderAltTextLabel()):null,this.hasAttachedVideo?this._renderSubtitlesLabel():null)}_renderTagPeopleLabel(){return o.a.createElement(z.b,{color:"gray700",size:"subtext2",testID:En},o.a.createElement(Q.a,{style:ka.addImageActionIcon}),Kn)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,a=e.map((e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str})));return o.a.createElement(z.b,{color:"gray700",size:"subtext2",testID:Pn},o.a.createElement(X.a,{style:ka.addImageActionIcon}),o.a.createElement(V.a,{loggedInUserId:null==t?void 0:t.id_str,users:a}))}_renderAltTextLabel(){const{data:{media:e}}=this.props,t=e[0].mediaMetadata;return this.hasAttachedAltText?e.length>1?o.a.createElement(z.b,{size:"subtext2",testID:Cn},o.a.createElement(Y.a,{style:ka.addImageActionIcon}),$n({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):o.a.createElement(z.b,{numberOfLines:1,size:"subtext2",testID:Cn},o.a.createElement(Y.a,{style:ka.addImageActionIcon}),null==t?void 0:t.altText):o.a.createElement(z.b,{size:"subtext2",testID:Cn},o.a.createElement(J.a,{style:ka.addImageActionIcon}),Gn({numberOfImages:e.length}))}_renderSubtitlesLabel(){const{data:{media:e}}=this.props,t=this.attachedSubtitles?Z.a:ee.a;return o.a.createElement(z.b,{accessibilityRole:"button",color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:e[0].id,tab:"subtitles"}},onPress:this._handleClickSubtitlesShortcut,size:"subtext2",style:ka.addImageTextContainer,testID:wn},o.a.createElement(t,{accessibilityLabel:this.attachedSubtitles?Xn:void 0,style:ka.addImageActionIcon}),this.attachedSubtitles?this.attachedSubtitles.displayName:Qn)}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=se.a[t],n=this._getParsedTweet(e).weightedLength;return o.a.createElement(H.a,{count:n,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{addComposerLink:e,disableAddTweet:t,isCommunityTweetFromProtectedUser:a,isEdit:n,loggedInUser:i,onAddComposer:s}=this.props,r=this._isEmpty(),l=this._isScheduled(),c=n||t||r||l||!i||a;return o.a.createElement(b.a,{accessibilityLabel:this.isReplyOrReplyThread?jn:Nn,behavioralEventContext:ui,disabled:c,hoverLabel:{label:Vn},icon:oi,link:c?void 0:e,onPress:s,size:"xSmall",testID:vn,type:"brandOutlined"})}get isEditMediaEnabled(){const{data:{media:e},isEdit:t,previousMedia:a}=this.props;if(t){const t=null==a?void 0:a.map((e=>e.uploadId)),n=e.map((e=>e.uploadId));return!(k()(t,n).length>0)}return!0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,n=e.length,i=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif})),s=e.some((e=>e.mediaFile&&!(e.mediaFile instanceof te.a)&&e.mediaFile.isVideo)),o=4===n,r=i||s||this.hasExternalMedia;return o||r||t||!a||!this.isEditMediaEnabled}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage}))}get hasAttachedVideo(){const{data:{media:e}}=this.props,t=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isVideo}));return t&&(this._videoTrimmerEnabled=this.context.featureSwitches.isTrue("responsive_web_video_trimmer_enabled")),t}get attachedSubtitles(){var e;const{data:{media:t}}=this.props;if(!this.hasAttachedVideo)return;const a=t.find((e=>e.mediaFile&&!(e.mediaFile instanceof te.a)&&e.mediaFile.isVideo));return null==a||null==(e=a.mediaMetadata)?void 0:e.subtitles}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some((e=>!!e.externalMediaDetails))}get shouldRenderCommunitiesRules(){const{audienceControlsValue:e}=this.props,t=this.context.featureSwitches.isTrue("c9s_enabled"),a=e.communityIdValue||void 0,n=t&&a,i=this._shouldRenderControls(!1,"conversation");return Boolean(i&&n)}get isReplyOrReplyThread(){const{isReply:e,isSelfThreadReply:t}=this.props;return e&&!t}}pi.contextType=Xt.a,pi.defaultProps={twitterTextConfigurationVersion:"defaults",withAvatar:!0};var mi=Object(Fe.a)(pi),gi=a("7myi"),bi=a("dDSG"),fi=a("W5XZ"),_i=a("vbWy"),yi=a("Q5Mu"),vi=a("45mF"),wi=a("N5qz"),Ci=a("pidX"),xi=a("rziq"),Ei=a("c0ZR"),Ti=a("eyty"),Si=a("jTgF"),Ii=a("Rp9C"),Ri=a("JYYi"),Di=a("kY28"),Pi=a("fs1G"),Mi=a("BLtI"),ki=a("SrIh");const Oi=o.a.createElement(z.b,{weight:"bold"}),Ai=o.a.createElement(z.b,{color:"link",dir:"ltr"}),Li=e=>`@${e}`,Fi=e=>(null==e?void 0:e.screen_name)||"",Bi=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n})=>{var i;const s={replyToOne:({userName:e})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"e34022a7"},o.a.cloneElement(Ai,null,_.a.b50e199a({userName:Li(e)}))),replyToTwo:({userOneName:e,userTwoName:t})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"bfd9c99b"},o.a.cloneElement(Ai,null,_.a.c3033e8a({replyUserName:Li(e),otherUserName:Li(t)}))),replyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"g7a1000f"},o.a.cloneElement(Ai,null,_.a.e50dae2a({userOneName:Li(e),userTwoName:Li(a),userThreeName:Li(t)}))),replyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"i558c201"},o.a.cloneElement(Ai,null,_.a.h758cd23({userOneName:Li(t),userTwoName:Li(a),othersCount:e}))),communityReplyToOne:({communityName:e,userName:t})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"j935bcdf",communityName:e},o.a.cloneElement(Ai,null,_.a.fba61ad6({userName:Li(t)}))),communityReplyToTwo:({communityName:e,userOneName:t,userTwoName:a})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"i7bd9c8f",communityName:e},o.a.cloneElement(Ai,null,_.a.ce87c872({replyUserName:Li(t),otherUserName:Li(a)}))),communityReplyToThree:({communityName:e,userOneName:t,userThreeName:a,userTwoName:n})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"cfa0049d",communityName:e},o.a.cloneElement(Ai,null,_.a.b45fa506({userOneName:Li(t),userTwoName:Li(n),userThreeName:Li(a)}))),communityReplyToMany:({communityName:e,othersCount:t,userOneName:a,userTwoName:n})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"jfc8e4b5",communityName:e},o.a.cloneElement(Ai,null,_.a.b8168f25({userOneName:Li(a),userTwoName:Li(n),othersCount:t}))),exclusiveReplyToOne:({userName:e})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"a4e11011"},o.a.cloneElement(Ai,null,_.a.c7f99090({userName:Li(e)})),o.a.cloneElement(Oi,null,_.a.b977ae10)),exclusiveReplyToTwo:({userOneName:e,userTwoName:t})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"cf1b3321"},o.a.cloneElement(Ai,null,_.a.g7d5e986({replyUserName:Li(e),otherUserName:Li(t)})),o.a.cloneElement(Oi,null,_.a.af82725c)),exclusiveReplyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"c83d647f"},o.a.cloneElement(Ai,null,_.a.af4c2858({userOneName:Li(e),userTwoName:Li(a),userThreeName:Li(t)})),o.a.cloneElement(Oi,null,_.a.h2949686)),exclusiveReplyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"fec57cab"},o.a.cloneElement(Ai,null,_.a.bc9dd515({userOneName:Li(t),userTwoName:Li(a),othersCount:e})),o.a.cloneElement(Oi,null,_.a.de5071ba)),trustedFriendsReplyToOne:({trustedFriendsTweetOwner:e,userName:t})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"b392dda9",trustedFriendsTweetOwner:Li(e)},o.a.cloneElement(Ai,null,_.a.e39e1360({userName:Li(t)}))),trustedFriendsReplyToTwo:({trustedFriendsTweetOwner:e,userOneName:t,userTwoName:a})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"c1378cbb"},o.a.cloneElement(Ai,null,_.a.b1bf4831({userOneName:Li(t),userTwoName:Li(a)})),o.a.cloneElement(Ai,null,_.a.ba60bdab({trustedFriendsTweetOwner:Li(e)}))),trustedFriendsReplyToThree:({trustedFriendsTweetOwner:e,userOneName:t,userThreeName:a,userTwoName:n})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"g390bde1"},o.a.cloneElement(Ai,null,_.a.i17c4d36({userOneName:Li(t),userTwoName:Li(n),userThreeName:Li(a)})),o.a.cloneElement(Ai,null,_.a.bfa3b3d3({trustedFriendsTweetOwner:Li(e)}))),trustedFriendsReplyToMany:({othersCount:e,trustedFriendsTweetOwner:t,userOneName:a,userTwoName:n})=>o.a.createElement(_.a.I18NFormatMessage,{$i18n:"d1b80c9d"},o.a.cloneElement(Ai,null,_.a.e4625c2b({userOneName:Li(a),userTwoName:Li(n),othersCount:e})),o.a.cloneElement(Ai,null,_.a.b6c63977({trustedFriendsTweetOwner:Li(t)})))},r=ta.a({inReplyToStatus:a,loggedInUserId:n}).filter((({id_str:e})=>t.indexOf(e)<0)),{exclusivity_info:l,trusted_friends_info:c,user:d}=a.retweeted_status||a,[u,h]=r.filter((({id_str:e})=>e!==d.id_str)),[p,m,g]=[d,u,h].map(Fi),b=r.length-2,f=null==a||null==(i=a.trusted_friends_info)?void 0:i.screen_name;switch(r.length){case 0:return Object(ki.a)("Compose reply context should not have 0 recipients"),null;case 1:return e?s.communityReplyToOne({communityName:e,userName:p}):l?s.exclusiveReplyToOne({userName:p}):c&&f?s.trustedFriendsReplyToOne({userName:p,trustedFriendsTweetOwner:f}):s.replyToOne({userName:p});case 2:return e?s.communityReplyToTwo({communityName:e,userOneName:p,userTwoName:m}):l?s.exclusiveReplyToTwo({userOneName:p,userTwoName:m}):c&&f?s.trustedFriendsReplyToTwo({userOneName:p,userTwoName:m,trustedFriendsTweetOwner:f}):s.replyToTwo({userOneName:p,userTwoName:m});case 3:return e?s.communityReplyToThree({communityName:e,userOneName:p,userTwoName:m,userThreeName:g}):l?s.exclusiveReplyToThree({userOneName:p,userTwoName:m,userThreeName:g}):c&&f?s.trustedFriendsReplyToThree({userOneName:p,userTwoName:m,userThreeName:g,trustedFriendsTweetOwner:f}):s.replyToThree({userOneName:p,userTwoName:m,userThreeName:g});default:return e?s.communityReplyToMany({communityName:e,userOneName:p,userTwoName:m,othersCount:b}):l?s.exclusiveReplyToMany({userOneName:p,userTwoName:m,othersCount:b}):c&&f?s.trustedFriendsReplyToMany({userOneName:p,userTwoName:m,othersCount:b,trustedFriendsTweetOwner:f}):s.replyToMany({userOneName:p,userTwoName:m,othersCount:b})}};var Ni=o.a.memo(Bi);function ji(e){null==e||e.preventDefault()}const zi=p.a.create((e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}})));var Vi=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n,onPress:i,shouldDisplayRepliesText:s,showParentTweet:r=!0})=>o.a.createElement(d.a,null,r?o.a.createElement(Mi.b,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:Pi.a,onAvatarClick:ji,onEntityClick:ji,onMediaClick:ji,onReplyContextClick:ji,replyContext:Di.a.ReplyContextTypes.None,tweet:a,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,o.a.createElement(d.a,{style:zi.replyUsersContainer},o.a.createElement(L.a,{avatarCell:r?o.a.createElement(d.a,{style:zi.conversationLine}):null,avatarCellStyle:zi.conversationLineContainer,cellStyle:zi.repliesTextContainer,style:zi.grid},s?o.a.createElement(z.b,{accessibilityRole:"button",color:"gray700",onPress:i,style:r&&zi.repliesMessage},o.a.createElement(Ni,{communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n})):null))),Hi=a("0uGn"),Ui=a("cHvH"),Wi=a("sgih"),qi=a("xKuM"),Gi=a("5Vk4");const $i=p.a.create((e=>({mainCard:{marginHorizontal:"auto",paddingVertical:e.spaces.space16,textAlign:"center",alignItems:"center"},largeScreenCard:{width:"70%"},smallScreenCard:{width:"85%"},sheetStyle:{justifyContent:"center"}})));var Ki=({actionButtonType:e,children:t,onActionButtonClick:a,onMaskClick:n,sheetType:i,showActionButton:s})=>o.a.createElement(Ui.a,null,(({windowWidth:r})=>{const l=r>p.a.theme.breakpoints.small;return o.a.createElement(Wi.a,{onMaskClick:n,style:$i.sheetStyle,type:i,withMask:!0},s&&o.a.createElement(qi.a,{leftControl:o.a.createElement(Gi.a,{backButtonType:e,onClick:a}),position:"absolute"}),o.a.createElement(d.a,{style:[$i.mainCard,l?$i.largeScreenCard:$i.smallScreenCard]},t))}));const Qi=_.a.cb7c0988,Xi=_.a.de3bcf28,Ji=_.a.e710ce76,Yi=_.a.h11e5910,Zi=_.a.b7ec04f4,es=_.a.i62a03aa,ts=p.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"}})));var as=({onBack:e,onNo:t,onYes:a})=>o.a.createElement(Ki,{actionButtonType:"back",onActionButtonClick:e,onMaskClick:e,sheetType:"full",showActionButton:!0},o.a.createElement(z.b,{size:"title4",style:ts.itemPadding,weight:"heavy"},Qi),o.a.createElement(z.b,{color:"gray700",style:ts.itemPadding},Xi),o.a.createElement(z.b,{color:"gray700",style:ts.itemPadding},Ji),o.a.createElement(d.a,{style:ts.buttonContainer},o.a.createElement(z.b,{size:"title4",style:ts.itemPadding,weight:"heavy"},Yi),o.a.createElement(b.a,{onPress:a,style:ts.itemPadding,type:"brandOutlined"},Zi),o.a.createElement(b.a,{onPress:t,style:ts.itemPadding,type:"brandOutlined"},es))),ns=a("FDY4"),is=a("tevE"),ss=a("jV+4"),os=a("UgB4"),rs=a("TW8A"),ls=a("hiGS"),cs=a("WtWS");const ds=(e={})=>Object(ct.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[dt.a.root,e.style],viewBox:"0 0 24 24"},o.a.createElement("g",null,o.a.createElement("path",{d:"M17.928 9.026l.095 3.545H19l.1-3.544h-1.172zm.586 5.394c.414 0 .667-.238.667-.623 0-.388-.252-.626-.666-.626-.41 0-.667.24-.667.627 0 .385.257.623.667.623zm-4.57-.11h.813l.278-1.384h.89l.15-.813h-.883l.198-.96h.875l.15-.805h-.864l.268-1.326h-.813l-.27 1.326h-.946l.263-1.326h-.81l-.27 1.326h-.846l-.154.806h.846l-.2.96h-.83l-.15.812h.824l-.278 1.384h.81l.277-1.384h.952l-.28 1.384zm-.578-2.124l.227-1.102h1.055l-.23 1.102h-1.052zm-5.889-.941c.388 0 .634.32.634.835s-.244.835-.636.835c-.385 0-.615-.315-.615-.835-.002-.524.23-.835.617-.835zM7.595 9C5.763 9 4.5 10.245 4.5 12.054c0 1.838 1.25 3.05 3.157 3.05.388 0 .765-.047 1.05-.13v-.598c-.204.073-.603.12-.995.12-1.556 0-2.542-.937-2.542-2.423 0-1.46.985-2.48 2.402-2.48 1.392 0 2.307.865 2.307 2.19 0 .744-.24 1.213-.61 1.213-.222 0-.35-.15-.35-.41v-1.94h-.74v.435h-.065c-.147-.325-.465-.515-.857-.515-.732 0-1.23.604-1.23 1.494 0 .93.505 1.544 1.267 1.544.425 0 .725-.19.88-.56h.065c.08.352.414.57.872.57.886 0 1.44-.728 1.44-1.892C10.55 10.106 9.348 9 7.594 9z"})));ds.metadata={width:24,height:24};var us=ds,hs=a("sjK1"),ps=a("cm6r");const ms=p.a.create((e=>({button:{width:e.spaces.space72,height:e.spaces.space72,marginBottom:e.spaces.space12}})));var gs=({icon:e,label:t,onPress:a})=>o.a.createElement(ps.a,{interactiveStyles:null,onPress:a},(a=>o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{icon:e,interactivityState:a,size:"xLarge",style:ms.button,type:"primaryOutlined"}),o.a.createElement(z.b,{color:"gray700"},t))));const bs=[{headlineText:_.a.f3a7a80c,subTextLine1:_.a.ge52d1de,subTextLine2:null},{headlineText:_.a.d1a92642,subTextLine1:_.a.ae42ebf0,subTextLine2:_.a.aa350ab2},{headlineText:_.a.j18b2956,subTextLine1:_.a.f6bee896,subTextLine2:_.a.dddd0996},{headlineText:_.a.d02a94fa,subTextLine1:_.a.dddd0996,subTextLine2:null},{headlineText:_.a.i018b746,subTextLine1:_.a.b8d85dfa,subTextLine2:_.a.d5ca11f0}],fs=_.a.h11e5910,_s=_.a.abd845fe,ys=_.a.bea869b4,vs=_.a.d96cf7ce,ws=_.a.d3145da8,Cs=p.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"},profanityIcon:{backgroundColor:e.colors.primary,color:e.colors.whiteOnColor,width:e.spaces.space48,height:e.spaces.space48,borderRadius:e.borderRadii.infinite},tweetContainer:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,width:"100%",textAlign:"left"},tweetContent:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},tweetBody:{flexDirection:"row"},userName:{paddingBottom:e.spaces.space4},mobileButtonContainer:{justifyContent:"space-around",flexDirection:"row",width:"100%",marginTop:e.spaces.space72},thanksContainer:{flexDirection:"row",alignItems:"center"},thanksCheckMark:{color:p.a.theme.colors.primary,marginRight:e.spaces.space8},photos:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",marginRight:e.spaces.space12,flex:"3 1 0%"},textStyle:{flex:"8 1 0%"}})));var xs=({hasSentFeedback:e,media:t,onDeleteTweet:a,onDismiss:n,onEditTweet:i,onSendTweet:s,onWeGotItWrong:r,tweetText:l,userName:c,userProfileImageUrl:u,userScreenName:h})=>{const{featureSwitches:m}=o.a.useContext(Xt.a);let g=m.getNumberValue("responsive_web_reply_nudge_copy_version");g=g>=0&&g<=4?g:0;const f=bs[g];return o.a.createElement(Ui.a,null,(({windowWidth:m})=>o.a.createElement(Ki,{actionButtonType:"close",onActionButtonClick:n,onMaskClick:n,sheetType:"full",showActionButton:m>p.a.theme.breakpoints.medium},o.a.createElement(us,{style:[Cs.profanityIcon,Cs.itemPadding]}),o.a.createElement(is.a,{size:"title4",style:Cs.itemPadding,weight:"heavy"},f.headlineText),o.a.createElement(z.b,{color:"gray700",style:Cs.itemPadding},f.subTextLine1),o.a.createElement(z.b,{color:"gray700",style:Cs.itemPadding},f.subTextLine2),o.a.createElement(d.a,{style:[Cs.tweetContainer,Cs.itemPadding]},o.a.createElement(d.a,{style:Cs.tweetContent},o.a.createElement(ss.a,{name:c,profileImageUrl:u,screenName:h,style:Cs.userName}),o.a.createElement(d.a,{style:Cs.tweetBody},(()=>{if(0===t.length)return null;const e=t.map((e=>{var t,a,n;let i="";if(e.externalMediaDetails)i=e.externalMediaDetails.stillMediaUrl;else if(e.mediaFile instanceof hs.c)i=e.mediaFile.thumbnail;else if(null!=(t=e.mediaFile)&&t.url){var s;i=null==(s=e.mediaFile)?void 0:s.url}return{accessibilityLabel:"",url:i,width:(null==(a=e.mediaFile)?void 0:a.width)||100,height:(null==(n=e.mediaFile)?void 0:n.height)||100,expandedUrl:"",shouldShowAltLabel:!1}}));return o.a.createElement(d.a,{style:Cs.photos},o.a.createElement(ns.a,{containerAspectRatio:1,images:e,previewMode:!1,singleImageMaxAspectRatio:1,singleImageMinAspectRatio:1,withCenterCrop:!0,withLink:!1}))})(),o.a.createElement(z.b,{style:Cs.textStyle},l)))),e?o.a.createElement(d.a,{style:Cs.thanksContainer},o.a.createElement(cs.a,{style:Cs.thanksCheckMark}),o.a.createElement(z.b,{align:"center",style:Cs.itemPadding},ws)):o.a.createElement(z.b,{align:"center",onPress:r,style:Cs.itemPadding,withUnderline:!0},fs),m>p.a.theme.breakpoints.small?o.a.createElement(d.a,{style:Cs.buttonContainer},o.a.createElement(b.a,{onPress:i,style:Cs.itemPadding,type:"brandFilled"},_s),o.a.createElement(b.a,{onPress:s,style:Cs.itemPadding,type:"brandOutlined"},ys),o.a.createElement(b.a,{onPress:a,style:Cs.itemPadding,type:"destructiveText"},vs)):(()=>{const e=o.a.createElement(os.a,{style:{color:p.a.theme.colors.text}}),t=o.a.createElement(rs.a,{style:{color:p.a.theme.colors.primary}}),n=o.a.createElement(ls.a,{style:{color:p.a.theme.colors.red500}});return o.a.createElement(d.a,{style:Cs.mobileButtonContainer},o.a.createElement(gs,{icon:e,label:ys,onPress:s}),o.a.createElement(gs,{icon:t,label:_s,onPress:i}),o.a.createElement(gs,{icon:n,label:vs,onPress:a}))})())))},Es=a("G6rE");var Ts=Object(me.a)().propsFromState((()=>({loggedInUser:Es.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userName:e&&e.name,userProfileImageUrl:e&&e.profile_image_url_https,userScreenName:e&&e.screen_name}))).withAnalytics()((({analytics:e,media:t,nudgeId:a,onDeleteTweet:n,onDismiss:i,onEditTweet:s,onSendTweet:r,tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})=>{const[h,p]=o.a.useState(!1),[m,g]=o.a.useState(!1),b=({action:t,element:n,page:i})=>{const s=[{nudge_id:a}];e.scribe({action:t,data:{items:s},element:n,page:i,section:"dialog"})};return h?o.a.createElement(as,{onBack:()=>{b({action:"back",element:"action",page:"nudge_more_info"}),p(!1)},onNo:()=>{b({action:"got_it_wrong_no",element:"action",page:"nudge_more_info"}),g(!0),p(!1)},onYes:()=>{b({action:"got_it_wrong_yes",element:"action",page:"nudge_more_info"}),g(!0),p(!1)}}):o.a.createElement(xs,{hasSentFeedback:m,media:t,onDeleteTweet:()=>{b({action:"cancel",element:"action",page:"nudge"}),n()},onDismiss:()=>{b({action:"dismiss",element:"action",page:"nudge"}),i()},onEditTweet:()=>{b({action:"revise",element:"action",page:"nudge"}),s()},onSendTweet:()=>{b({action:"send",element:"action",page:"nudge"}),r()},onWeGotItWrong:()=>{b({action:"more_info",element:"action",page:"nudge"}),b({action:"impression",page:"nudge_more_info"}),p(!0)},tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})})),Ss=a("oEGd"),Is=a("Tb0w"),Rs=a("AspN"),Ds=a("/Rsk"),Ps=a("5oBF"),Ms=a("P1r1"),ks=a("2iUg"),Os=a("u7LJ"),As=a("1YZw"),Ls=a("XOJV"),Fs=a("lsKC");const Bs=e=>e.parentTweetId||(e.isInline?Ri.a.homeTimeline:Ri.a.modal),Ns=(e,t)=>{const a=Bs(t);return we.k(e,a)},js=(e,t)=>{const a=Bs(t);return we.l(e,a)},zs=(e,t)=>{const a=Ks(e,t),n=ho(e,t).communityIdValue||void 0,i=(null==a?void 0:a.community_id_str)||n,s=i?ge.c.select(e,i):void 0;return s?s.name:void 0},Vs=(e,t)=>{const a=Bs(t);return we.m(e,a)},Hs=(e,t)=>{const a=Bs(t);return we.i(e,a)},Us=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},Ws=Object(he.createSelector)(((e,t)=>t.activeUser),Es.e.selectLoggedInUser,((e,t)=>e||t)),qs=(e,t)=>t.parentTweetId||Gs(e,t)||$s(e,t),Gs=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},$s=Us((e=>e.inReplyToStatusId)),Ks=(e,t)=>{const a=qs(e,t);return a?Ls.a.selectHydrated(e,a):void 0},Qs=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,Xs=Us((e=>e.hasArticleNudge)),Js=Us((e=>e.convoCardData)),Ys=Us((e=>e.externalMedia)),Zs=Us((e=>e.externalMediaFiles)),eo=Us((e=>e.previewTweetId)),to=Us((e=>e.defaultText)),ao=(e,t)=>{const a=to(e,t),n=Object(Ci.a)(t.location);return(Qs(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&n?n:a},no=Us((e=>e.quotedStatusId)),io=Us((e=>e.quotedStatus)),so=(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:io(e,t))(e,t)||((e,t)=>{const a=no(e,t);return a?Ls.a.selectHydratedMemoized(e,a):void 0})(e,t),oo=Us((e=>e.isSelfThreadReply)),ro=Us((e=>e.positionCursorAtBeginning)),lo=Us((e=>e.previousTweetId)),co=(e,t)=>{const a=lo(e,t);return a?Ls.a.selectHydratedMemoized(e,a):null},uo=Object(he.createSelector)(co,(e=>{var t;const a=null==e||null==(t=e.extended_entities)?void 0:t.media;return a?a.map((({ext_alt_text:e,id_str:t,media_url_https:a})=>({url:a,uploadId:t,altText:null!=e?e:""}))):[]})),ho=Object(he.createSelector)(co,((e,t)=>we.j(e,Bs(t))),ve.b,((e,t,a)=>e?Object(Fs.a)(e,a):t)),po=Us((e=>e.promotedContent)),mo=({mediaIds:e,...t})=>t,go={addComposer:we.a,addToast:As.b,createLocalApiErrorHandler:Object(pe.createLocalApiErrorHandlerWithContextFactory)("SCREEN_COMPOSE_V2"),checkTweetForNudge:we.b,deletePreviewTweet:Ps.c,fetchAltTextPromptPreferenceIfNeeded:ks.a,fetchAutotaggedLocationIfNeeded:Ds.a,fetchTweetIfNeeded:Ls.a.fetchOneIfNeeded,removeComposer:we.e,resetDraft:we.f,retweet:Ls.a.retweet,schedule:we.h,draftTweet:we.d,send:we.q,updateActiveComposerIndex:we.s,updateAudienceControlsValue:we.t,updateConvoCardState:Is.b,preUploadMedia:Rs.e,addMedia:Rs.b,processMultipleMedia:Rs.g,removeMediaUpload:Rs.i,removeToast:As.c,updateSingleComposer:we.w,setActiveParentKey:we.r,copyDataFromInlineComposerToModalComposer:we.c};var bo=Object(Ss.e)((()=>Object(he.createStructuredSelector)({activeComposerIndex:Hs,activeUser:Ws,altTextNudgeType:ks.b,audienceControlsValue:ho,composerData:Object(he.createSelector)(Ns,ao,so,Rs.j,((e,t,a,n)=>e.map(((e,i)=>({...mo(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===i?a:void 0,text:0===i&&t?t:e.text}))))),dataSaverMode:Ms.j,excludedRecipients:js,externalMedia:Ys,externalMediaFiles:Zs,geoEnabled:Ms.o,hasArticleNudge:Xs,inReplyToStatus:Ks,inReplyToStatusId:qs,isIntentRoute:Qs,isSelfThreadReply:oo,isSending:Vs,isSuperFollowsCreator:ye.m,positionCursorAtBeginning:ro,loggedInUser:Es.e.selectLoggedInUser,prepopulatedText:ao,previewTweetId:eo,previousTweetId:lo,previousTweetMedia:uo,promotedContent:po,scheduledFor:we.n,selectedCommunityName:zs,sendingProgress:we.o,convoCardData:Js,undoTweetSettings:Os.d,userLanguage:ye.q,quotedStatusId:no})),go),fo="tweetButton",_o="tweetButtonInline";const yo=_.a.d28215f0,vo=_.a.ec909a55,wo=_.a.c7152355,Co=_.a.ffa5562a,xo=_.a.dd4a14a1,Eo=_.a.cc6d0a48,To=_.a.j499fbcb,So=_.a.bb8170da,Io=_.a.dad5a4b8,Ro=_.a.e65aed64,Do=_.a.bc2ceaf2,Po=_.a.d8222374,Mo=_.a.j890123a,ko=_.a.bb01231c,Oo=_.a.d4ab68e2,Ao=_.a.d8af8a4c,Lo=_.a.d09d4c06,Fo=_.a.i2209530,Bo=_.a.bf9b89e4,No=_.a.gb1ac3be,jo=_.a.e5ace470,zo=_.a.e839db3a,Vo=_.a.f277e94a,Ho=_.a.b551cd23,Uo=_.a.f026a7fa,Wo=_.a.a5d4fda0,qo=_.a.ib067d6a,Go=r.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,$o={element:"alt_text_prompt"},Ko={component:"article_nudge"},Qo={viewType:"send_tweet"},Xo=Object.freeze({Original:"original",Reply:"reply",Quote:"quote",Thread:"thread"});class Jo extends o.a.Component{constructor(e,t){var a;super(e,t),this._getParentKey=()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?Ri.a.homeTimeline:Ri.a.modal)},this._updateSingleComposer=(e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})},this._resetDraft=()=>{const{resetDraft:e}=this.props;e({parentKey:this._getParentKey(),isPreview:this.isPreview})},this._fetchAutotaggedLocationIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchAutotaggedLocationIfNeeded:t}=this.props;return t().catch(e())},this._syncTexts=()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach(((e,a)=>{const n=t[e.key];"string"==typeof n&&n!==e.text&&this._updateSingleComposer({text:n},a)}))},this._hasGif=e=>e.gifMetadata||e.media.some((e=>e.mediaFile&&e.mediaFile.isGif)),this._hasPhoto=e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isImage)),this._hasVideo=e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)),this._handleDeletePreviewTweet=()=>{const{deletePreviewTweet:e,previewTweetId:t,removeToast:a}=this.props;t&&(a(),e(t))},this._handleAnimateComplete=()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=c.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{bottom:e,top:n}=a.getBoundingClientRect(),i=Math.max(n,window.scrollY);if(i<window.pageYOffset||e>window.innerHeight){const e=t?i-t()-14:i-14,a=Math.max(e,0);window.requestAnimationFrame((()=>{Go?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)}))}}},this._handleFetchTweetIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,inReplyToStatus:a,inReplyToStatusId:n,quotedStatus:i,quotedStatusId:s}=this.props;!a&&n&&t(n).catch(e(fi.a)),!i&&s&&t(s).catch(e(fi.a))},this._blockHistory=(e,t)=>{const{audienceControlsValue:a,isInline:n}=this.props,i=!n&&/unsent/.test(e.pathname),s=!n&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&s?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&i&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:i}),!1):(this._resetDraft(),!0):this.shouldShowBackgroundSendConfirmation&&"POP"===t&&s?(this._cancelAllMediaUploads(),!1):!("POP"===t&&s&&this._areComposersEmptyOrUnchanged&&!Object(aa.a)(a))||(this._resetDraft(),!0)},this._getKeyCommandHandlers=()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers},this.handleTweetOrRetweet=()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.shouldShowAltTextPrompt?(this.setState({showAltTextPrompt:!0}),void this._scribe({...$o,action:"show"})):this._handleTweetOrRetweet()},this._handleTweetOrRetweet=()=>this.isRetweet?this._handleRetweet():this._handleTweet(),this._renderReplyContext=()=>{const{activeUser:e,excludedRecipients:t,inReplyToStatus:a,isInline:n,isSelfThreadReply:i,selectedCommunityName:s}=this.props;if(a&&this._shouldBeExpanded())return o.a.createElement(Vi,{communityName:s,excludedRecipients:t,inReplyToStatus:a,key:t.join(),loggedInUserId:e?e.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!i,showParentTweet:!n})},this._renderAltTextPrompt=()=>{const{numberOfImages:e}=this._getAltTextMetadata(),t=o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,null,Co),o.a.createElement(d.a,{style:Yo.altTextPromptParagraph},xo({numberOfImages:e})),o.a.createElement(d.a,{style:Yo.altTextPromptParagraph},Eo));return o.a.createElement(u.a,{Icon:y.a,cancelButtonLabel:So,confirmButtonLabel:To({numberOfImages:e}),headline:wo({numberOfImages:e}),onCancel:this._handleIgnoreAltTextPrompt,onConfirm:this._handleAcceptAltTextPrompt,onMaskClick:this._handleCancelAltTextPrompt,text:t})},this._renderToxicReplyNudge=()=>{const e=this._getSingleComposerDataWithLatestText(this.props.composerData[0]),t=e.text,a=e.media;return o.a.createElement(Ts,{media:a,nudgeId:this.state.nudgeId,onDeleteTweet:this._handleReplyNudgeDeleteTweet,onDismiss:this._handleReplyNudgeDismiss,onEditTweet:this._handleReplyNudgeEditTweet,onSendTweet:this._handleReplyNudgeSendTweet,tweetText:t})},this._handleAddComposer=()=>{const{addComposer:e,copyDataFromInlineComposerToModalComposer:t,isInline:a,parentTweetId:n}=this.props;this.isInlineReply?t(n):a&&t(Ri.a.homeTimeline),e()},this._makeAddComposerLink=Object(w.a)(((e,t,a)=>Object(Fs.d)({isInline:e,isSelfThreadReply:t,parentTweetId:a}))),this._handleReplyNudgeDeleteTweet=()=>{this._hideToxicReplyNudge(),this._handleConfirmDiscardTweet()},this._handleReplyNudgeDismiss=()=>{this._hideToxicReplyNudge()},this._handleReplyNudgeEditTweet=()=>{this._hideToxicReplyNudge()},this._handleReplyNudgeSendTweet=()=>{this._hideToxicReplyNudge(),this._handleSendTweet()},this._setRootRef=e=>{e&&(this._root=e)},this._handleTweet=()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(ia.h)(t)&&this._handleScheduleTweet():this._checkToxicityAndSendTweet()},this._handleTweetError=(e,t)=>a=>{const{analytics:n,createLocalApiErrorHandler:i}=this.props;if(Object(Si.d)(a)&&a.code===R.b.CANCELED)return n.scribeAction(e),Promise.resolve();const s=Object(Si.b)(a);if(s)return this.setState({errorMessage:s}),Promise.resolve();i({...t||Object(vi.a)(void 0,!1)})(a);const o=a instanceof P.a&&(null==t?void 0:t[a.errors[0].code]);this.setState({errorMessage:{text:o?o.toast.text:Wo}})},this._handleScheduleTweet=()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:n,schedule:i}=this.props,s=this._getSingleComposerDataWithLatestText(t[0]);i({excludedRecipients:a,inReplyToStatus:n,scheduleData:s}).then((a=>{this.setState({tweetsSentOrScheduled:!0});const n=Object(ia.c)(s.scheduledFor);if(n){const i=Object(ia.b)(n),s=Object(ia.i)(n),o=Ho({scheduleDate:i,scheduleTime:s});e({text:o,action:{label:Vo,link:{pathname:"/compose/tweet/unsent/scheduled"}}}),this._scribeTweetSent(t[0],{...a,id_str:a.scheduled_id_str},{isScheduled:!0})}this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("schedule_tweet_cancel"))},this._handleDraftTweet=()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:n,inReplyToStatus:i}=this.props;a({excludedRecipients:n,inReplyToStatus:i,draftData:this._getSingleComposerDataWithLatestText(t[0])}).then((a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:Bo,action:{label:Vo,link:{pathname:"/compose/tweet/unsent/drafts"}}}),this._scribeTweetSent(t[0],{...a,id_str:a.draft_id_str},{isDraftTweet:!0}),this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("draft_tweet_cancel",yi.a))},this._tweetTypeToNudgeTweetTypeMap=Object.freeze({[Xo.Original]:"OriginalTweet",[Xo.Quote]:"QuoteTweet",[Xo.Reply]:"Reply",[Xo.Thread]:"Retweet"}),this._checkToxicTweet=()=>{const{checkTweetForNudge:e,composerData:t,inReplyToStatus:a,inReplyToStatusId:n,parentTweetId:i}=this.props,s=this._tweetTypeToNudgeTweetTypeMap[this.tweetType],o=e({text:this._getSingleComposerDataWithLatestText(t[0]).text,tweetType:s,parentTweetId:i||n,conversationId:null==a?void 0:a.conversation_id_str}).then((e=>{var t,a,n,i,s,o,r;const l=null==(t=e.create_nudge)||null==(a=t.nudge)?void 0:a.proposed_tweet_language;if(!l||!this._checkSupportedNudgeLanguage(l))return!1;const c=null==e||null==(n=e.create_nudge)||null==(i=n.nudge)||null==(s=i.nudge_type)?void 0:s.__typename,d=null==e||null==(o=e.create_nudge)||null==(r=o.nudge)?void 0:r.id;return d&&this.setState({nudgeId:d}),!!c})),r=new Promise(((e,t)=>setTimeout(e,1e3,!1)));return Promise.race([o,r])},this._checkSupportedNudgeLanguage=e=>{let t=[];switch(this.tweetType){case Xo.Reply:t=this.context.featureSwitches.getArrayValue("responsive_web_reply_nudge_supported_languages");break;case Xo.Original:t=this.context.featureSwitches.getArrayValue("responsive_web_original_tweet_nudge_supported_languages");break;case Xo.Quote:case Xo.Thread:}return t.includes(e)},this._showToxicReplyNudge=()=>{this._scribe({page:"nudge",section:"dialog",action:"impression"},{items:[{nudge_id:this.state.nudgeId}]}),this.setState({showToxicReplyNudge:!0})},this._hideToxicReplyNudge=()=>this.setState({showToxicReplyNudge:!1}),this._shouldCheckForToxicity=()=>{const{nudgeId:e}=this.state,{composerData:t}=this.props,a=this._getSingleComposerDataWithLatestText(t[0]);if(e||0===a.text.length)return!1;switch(this.tweetType){case Xo.Reply:{const{isSelfThreadReply:e}=this.props;return!a.scheduledFor&&this.isReply&&!e&&this.context.featureSwitches.isTrue("responsive_web_reply_nudge_enabled")}case Xo.Original:return Object(ta.d)(a.text)&&this.context.featureSwitches.isTrue("responsive_web_original_tweet_nudge_enabled");case Xo.Quote:case Xo.Thread:default:return!1}},this._checkToxicityAndSendTweet=()=>{if(!this._shouldCheckForToxicity())return this._handleSendTweet();this._checkToxicTweet().then((e=>{if(!e)return this._handleSendTweet();let t=!1;switch(this.tweetType){case Xo.Reply:t=this.context.featureSwitches.isTrue("responsive_web_reply_nudge_show_nudge");break;case Xo.Original:t=this.context.featureSwitches.isTrue("responsive_web_original_tweet_nudge_show_nudge");break;case Xo.Quote:case Xo.Thread:}return t?this._showToxicReplyNudge():this._handleSendTweet()}))},this._handleSendTweet=()=>{const{activeUser:e,addToast:t,analytics:a,audienceControlsValue:n,composeSemanticCoreId:i,excludedRecipients:s,hasArticleNudge:o,history:r,inReplyToStatus:l,isSelfThreadReply:c,location:d,previousTweetId:u,promotedContent:h,selectedCommunityName:p,send:m}=this.props,{conversationControlsValue:g,exclusivityControlValue:b,trustedFriendsValue:f,trustedFriendsMemberCount:_}=n,y=this.isPreview,v=this.props.composerData.map((e=>this._getSingleComposerDataWithLatestText(e))),w=Object(ia.c)(v[0].scheduledFor);if(w){const e=Object(ia.b)(w),a=Object(ia.i)(w),n=Ho({scheduleDate:e,scheduleTime:a});return t({text:n,action:{label:Vo,link:""}}),void this._close()}if(s.length>0&&a.scribe({element:"mentions",action:"edited"}),f&&a.scribe({action:"send_trusted_friends_tweet",data:{trusted_friends_control_details:{list_member_count:_}}}),this._conversationControlsCreationEnabled)if("community"===g)a.scribe({action:"send_community_tweet"});else if("by_invitation"===g){const e=this._getSingleComposerDataWithLatestText(v[0]).text,t=Object(ta.d)(e);a.scribe({action:t?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"})}else"followers"===g&&a.scribe({action:"send_my_followers_tweet"});const x=(null==l?void 0:l.community_id_str)||n.communityIdValue||void 0,E=x?`8.31.${x}`:"",T=i?x?[i,E].join(","):i:E;m({sendData:v,communityIdValue:x,conversationControlsValue:g,excludedRecipients:s,exclusivityControlValue:b,inReplyToStatus:l,isSelfThreadReply:c,previousTweetId:u,promotedContent:h,composeSemanticCoreId:T,isPreview:y,trustedFriendsValue:f,tweetType:this.tweetType}).then((a=>{y||this.setState({tweetsSentOrScheduled:!0}),a.map(((e,t)=>this._scribeTweetSent(v[t],e,{hasArticleNudge:o}))),a.length>1&&this._scribeThreadSent(v,a,"thread_send_success");let n=a.length>1?Ro:Io;if(x&&p){const e=p,t=a.length;n=vo({numOfTweets:t,communityName:e})}const i=y&&this.isReply,s={label:Vo,link:void 0,onAction:void 0};if(i||!y){const t=i?a[0].in_reply_to_status_id_str:a[0].id_str;s.link={pathname:`/${e?e.screen_name:"i"}/status/${t||""}`}}else s.onAction=Object(Fs.b)(r,d,x);t({text:y?Do:n,action:s}),this.isInlineReply&&this.setState({focused:!1}),this._updateConvoCardState(),this._close()})).catch((e=>{var t;const{sentTweets:n=[]}=e,i=Array.isArray(e.errors)&&(null==(t=e.errors[0])?void 0:t.code),s=null==e?void 0:e.url,l=null==e?void 0:e.status,c={message:e.type,event_info:i?`${i}`:void 0,status_code:l,url:s};throw n.map(((e,t)=>this._scribeTweetSent(v[t],e)),{hasArticleNudge:o}),Object(Si.d)(e)&&e.code===R.b.CANCELED||a.scribe({action:"send_tweet_failure",data:c}),v.length>1&&this._scribeThreadSent(v,n,"thread_send_failure"),n.length&&r.replace({pathname:d.pathname,state:{...Object(C.a)(d.state||{},"quotedStatus"),inReplyToStatusId:n[n.length-1].id_str,isSelfThreadReply:!0}}),e})).catch(this._handleTweetError("send_tweet_cancel",yi.a))},this._setActiveParentKey=()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())},this._scribeSoftNudgeWithQuoteTweet=(e,t,a)=>{"soft_nudge_with_quote_tweet"===(null==e?void 0:e.limited_actions)&&this._scribe({action:t},a)},this._scribeTweetSent=(e,t,{hasArticleNudge:a=!1,isDraftTweet:n=!1,isScheduled:i=!1}={})=>{var s,o;const{nudgeId:r}=this.state,l=e.scheduledTweetId?"schedule_edit_":"schedule_",c=e.draftTweetId?"draft_edit_":"draft_",d=n?c:i?l:"send_",u={items:[Ii.a.getTweetItem(t)]},h=e.pollActive&&e.pollValid,p=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.altText)})),m=e.mediaTags.length,g=Object(x.a)(e.media.map((e=>{var t;const a=null==(t=e.mediaMetadata)?void 0:t.sensitiveMediaWarning;return a?Array.from(a):void 0})).filter(Boolean).flat()),b=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:`${d}tweet`},u),n||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:`${d}draft_tweet`},u),e&&(null==(s=this._getSingleComposerDataWithLatestText(e))||null==(o=s.text)?void 0:o.length)>0&&this._scribeSoftNudgeWithQuoteTweet(e.quotedStatus,"soft_nudge_with_qt_retweet_with_comment",u),this.isQuoteTweet&&(this._scribe({action:"retweet_with_comment"},u),a&&this._scribe({...Ko,element:"result",action:"retweet_with_comment"},u)),this.isReply&&this._scribe({component:b,action:`${d}reply`},u),h&&this._scribe({action:`${d}poll_tweet`},u),this._hasPhoto(e)&&(this._scribe({action:`${d}photo_tweet`},u),p&&this._scribe({action:`${d}photo_tweet_with_alt_text`},u),m&&this._scribe({action:`${d}photo_tweet_with_tags`},u)),this._hasVideo(e)&&(this._scribe({action:`${d}video_tweet`},u),m&&this._scribe({action:`${d}video_tweet_with_tags`},u)),g.size){const t=this._hasPhoto(e)?"photo":"video";g.forEach((e=>{this._scribe({action:`${d}${t}_tweet_with_${e}_warning`},u)}))}const f={page:"nudge",section:"dialog",element:"result"};if(r&&this.isReply&&!i&&(n?this._scribe({...f,action:"save"},{items:[{nudge_id:r}]}):this._scribe({...f,action:"sent"},{items:[{nudge_id:r}]})),r||n||!this.isReply||i||this._scribe({...f,action:"sent_no_nudge"}),e.gifMetadata){const a=t.id_str&&Ii.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:`${d}gif_tweet`},{items:a?[a]:[]});const n=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.defaultAltText)}));(p||n)&&this._scribe({element:"remote",action:`${d}gif_tweet_with_alt_text`},{event_info:p?"user_entered":"from_provider",items:a?[a]:[]}),m&&this._scribe({action:`${d}gif_tweet_with_tags`},u)}else this._hasGif(e)&&(this._scribe({element:"local",action:`${d}gif_tweet`},u),p&&this._scribe({element:"local",action:`${d}gif_tweet_with_alt_text`},u))},this._scribeThreadSent=(e,t,a)=>{const{inReplyToStatus:n}=this.props,i={items:[Ii.a.getSendThreadItem(e,t.length,!!n)]};this._scribe({action:a},i)},this._scribeRetweet=e=>{const{hasArticleNudge:t}=this.props,a={items:[Ii.a.getTweetItem(e)]};this._scribeSoftNudgeWithQuoteTweet(e,"soft_nudge_with_qt_retweet",a),this._scribe({action:"retweet"},a),t&&this._scribe({...Ko,element:"result",action:"retweet"},a)},this._handleRetweet=()=>{const{composerData:e,createLocalApiErrorHandler:t,retweet:a}=this.props,n=e[0].quotedStatus;n&&(this._scribeRetweet(n),a(n.id_str,{}).then((e=>{this.setState({tweetsSentOrScheduled:!0}),this._close()}),t(_i.a)))},this.handleDismissComposer=()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()},this.handleEditTimeLimitExceeded=()=>{this.setState({showEditTimeLimitExceededConfirmation:!0})},this._cancelAllMediaUploads=()=>{this.props.composerData.forEach((e=>e.media.forEach((e=>e.uploading&&e.uploader&&e.uploader.cancel()))))},this._handleConfirmDiscardTweet=()=>{const{analytics:e,hasArticleNudge:t}=this.props,a=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._close(),e.scribeAction(`${a}_tweet_discard`),t&&this._scribe({...Ko,element:"result",action:"cancel"}),this.state.nudgeId&&this._scribe({page:"nudge",section:"dialog",element:"result",action:"cancel"},{items:[{nudge_id:this.state.nudgeId}]})},this._handleCancelDiscardTweet=()=>{this.setState({showDiscardTweetConfirmation:!1},(()=>{this._restoreFocusToActiveComposer()}))},this._handleAcceptAltTextPrompt=()=>{this.setState({showAltTextPrompt:!1});const{history:e}=this.props,{noDescriptionImageIDs:t}=this._getAltTextMetadata();t[0]&&(this._scribe({...$o,action:"accepted"}),e.push("/compose/tweet/media",{mediaId:t[0],tab:Hi.a.altText,hideTabs:!0,showAllMedia:!0}))},this._handleIgnoreAltTextPrompt=()=>{this._scribe({...$o,action:"declined"}),this.setState({showAltTextPrompt:!1}),this._handleTweetOrRetweet()},this._handleCancelAltTextPrompt=()=>{this._scribe({...$o,action:"cancel"}),this.setState({showAltTextPrompt:!1},(()=>{this._restoreFocusToActiveComposer()}))},this._restoreFocusToActiveComposer=()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()},this._close=()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||this._resetDraft(),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()},this._handleComposerFocus=e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout((()=>{this._restoreFocusToActiveComposer()}),0)},this._handleFocus=()=>{const{focused:e}=this.state;e||(this.isInlineReply&&this._scribe({element:"inline_reply",action:"reply"}),this.setState({focused:!0}))},this._handleTypeaheadStateChange=e=>{this.setState({typeaheadActive:e})},this._handleRemoveComposer=()=>{const{activeComposerIndex:e,composerData:t,history:a,location:n,removeComposer:i}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:n.pathname,state:Object(C.a)(n.state||{},"quotedStatus")}),i(),setTimeout(this._restoreFocusToActiveComposer)},this._handleViewRecipients=()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})},this._handleTextChange=(e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:n,isInline:i,setValidity:s}=this.props;if(this.setState({textMap:{...a,[t]:e}},(()=>{s&&s(this._areComposersValid())})),this.setState({errorMessage:void 0}),D.b.isIOS()){const t=i?0:n;this._updateSingleComposer({text:e},t)}},this._handleTextOnBlur=Object(w.a)(((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:n}=this.state,{composerData:i}=this.props,s=a[e],o=i.some((t=>t.key===e));"string"==typeof s&&!n&&o&&this._updateSingleComposer({text:s},t)})),this._updateAudienceControlsValue=e=>{const{composerData:t,updateAudienceControlsValue:a}=this.props,{errorMessage:n}=this.state;switch(e._type){case"conversation_controls":if(!this._conversationControlsCreationEnabled)return;break;case"community_members":if(!this._isCommunitiesEnabled)return;t[0].pollActive&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled")&&(this._updateSingleComposer({pollActive:!1},0),this.setState({errorMessage:{text:yo}})),(null==n?void 0:n.text)===yo&&this.setState({errorMessage:void 0})}a(e,this._getParentKey())},this._renderProgressBar=()=>{const{isSending:e,sendingProgress:t}=this.props,a=e?Math.max(t,.02):0;return o.a.createElement(h.a,{progress:a,style:[Yo.progressBar,{visibility:a?"visible":"hidden"}]})},this._updateConvoCardState=()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:n}=e;n&&a&&t(a,{cardState:n})}},this._attachExternalMedia=e=>(t,a=[],n)=>Promise.all(t.map((e=>Object(Ei.a)(e)))).then((t=>this._handleAddMediaFiles(e)(t,a,n))),this._handleAddMediaFiles=e=>(t,a=[],n=[])=>{var i,s;const{addMedia:o,addToast:r,composerData:l,dataSaverMode:c,preUploadMedia:d,processMultipleMedia:u,removeMediaUpload:h}=this.props,p=l[e],m=p.pollActive,g=Object(Ti.e)(null==this||null==(i=this.context)?void 0:i.userClaims,null==this||null==(s=this.context)?void 0:s.featureSwitches);m||o(t,{location:Ti.d.Tweet,canUploadLongVideo:g,uploadIds:a,altTexts:n}).then((t=>{const a=t.map((e=>e.id));if(Jo._validateMedia(p,t)){const n=p.media.map((e=>e.id));this._updateSingleComposer({mediaIds:Object(E.a)(n.concat(a))},e),u(t,{onFailure:this._handleMediaRemoveFactory(e)}).then((e=>{c||d(e.map((e=>e.id)))}))}else r({text:qo}),h(a)}))},this._handleMediaRemoveFactory=e=>t=>this._handleMediaRemove(e,t),this._handleMediaRemove=(e,t)=>{const{composerData:a,removeMediaUpload:n}=this.props,{media:i,mediaTags:s}=a[e],o=((e,...t)=>Object(T.a)(e,t))(i.map((e=>e.id)),t),r=o.length>0?s:[];this._updateSingleComposer({mediaIds:o,gifMetadata:void 0,mediaTags:r},e),n(t),this.setState({errorMessage:void 0})},this._setComposerRef=e=>t=>{this._composerRefs[e]=t},this._shouldBeExpanded=()=>{const{composerData:e,parentTweetId:t}=this.props,{focused:a}=this.state;if(a)return!0;const n=!Object(aa.c)(this._getSingleComposerDataWithLatestText(e[0]));return!t||n},this._areComposersValid=()=>{const{audienceControlsValue:{_type:e},composerData:t}=this.props,a=t[0].quotedStatus,n=null==a?void 0:a.community_id_str,i="community_members"===e,s="trusted_friends_tweet"===e;return this.isRetweet&&!n&&!i&&!s||t.every((e=>Object(aa.e)(this._getSingleComposerDataWithLatestText(e))))},this._areComposersEmptyOrUnchanged=()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every((e=>Object(aa.d)(this._getSingleComposerDataWithLatestText(e),t)))},this._getAltTextMetadata=()=>{const{composerData:e}=this.props,t={numberOfDescriptionsMissing:0,numberOfImages:0,noDescriptionImageIDs:[]};return e.forEach((e=>{const a=(e.media||[]).filter((({externalMediaDetails:e,mediaFile:t})=>(null==t?void 0:t.isImage)||(null==t?void 0:t.isGif)||(null==e?void 0:e.mediaType)===v.a)),n=a.filter((({mediaMetadata:e})=>!(null!=e&&e.altText))).map((e=>e.id));t.numberOfImages+=a.length,t.noDescriptionImageIDs.push(...n)})),t.numberOfDescriptionsMissing=t.noDescriptionImageIDs.length,t},this._getSingleComposerDataWithLatestText=e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?{...e,text:t[e.key]}:e};const n=!(null==(a=e.location.state)||!a.focusComposer);this.state={focused:n,showAltTextPrompt:!1,showDiscardTweetConfirmation:!1,showEditTimeLimitExceededConfirmation:!1,showToxicReplyNudge:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._throttledSyncTexts=Object(S.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[xi.b]:this.handleTweetOrRetweet,[xi.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[xi.b]:this.handleTweetOrRetweet},this._isAltTextNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_alt_text_nudges_enabled"),this._isCommunitiesEnabled=this.context.featureSwitches.isTrue("c9s_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){var e;const{composerData:t,convoCardData:a,externalMedia:n,externalMediaFiles:i,fetchAltTextPromptPreferenceIfNeeded:s,history:o,isInline:r,isIntentRoute:l,location:c,prepopulatedText:d,previousTweetMedia:u,setValidity:h}=this.props,m=(null==(e=t[0].media)?void 0:e.length)>0;if(this._unblockHistory=this.props.history.block(this._blockHistory),n.length>0&&this._attachExternalMedia(0)(n),i.length>0&&this._handleAddMediaFiles(0)(i),!m&&null!=u&&u.length&&this._attachExternalMedia(0)(u.map((({url:e})=>e)),u.map((({uploadId:e})=>e)),u.map((({altText:e})=>e))),this._handleFetchTweetIfNeeded(),this._handleDeletePreviewTweet(),s(),d||a&&a.cardUrl){const e={};d&&(e.text=d),a&&a.cardUrl&&(e.cardUrl=a.cardUrl),this._updateSingleComposer(e)}(d||a&&a.cardUrl||n.length>0||i.length>0)&&!l&&o.replace({query:Object(Ci.b)(c.query),search:"",pathname:c.pathname,state:Object(C.a)(Object(Ci.b)(c.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),h&&h(this._areComposersValid()),r||this._setActiveParentKey(),this.isInlineReply&&this.state.focused&&(setTimeout((()=>{this._root&&this._root.scrollIntoView(),window.scrollBy(0,-p.a.theme.componentDimensions.appBarHeightPx)}),0),this._scribe({element:"inline_reply",action:"reply"}))}componentDidUpdate(e,t){const{addToast:a,composerData:n,copyDataFromInlineComposerToModalComposer:i,externalMedia:s,externalMediaFiles:o,onRef:r,parentTweetId:l,replyPressToggle:c,setValidity:d,windowWidth:u}=this.props;u!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this),n.length>=25&&e.composerData.length<25&&a({text:Uo}),s.length>0&&s!==e.externalMedia?this._attachExternalMedia(0)(s):o.length>0&&o!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(o),d&&!Object(I.a)(n,e.composerData)&&d&&d(this._areComposersValid()),c!==e.replyPressToggle&&i(l)}componentWillUnmount(){const{onRef:e}=this.props;this._unblockHistory&&this._unblockHistory(),e&&e(void 0),this._syncTexts()}render(){var e,t,a;const{activeUser:n,addToast:s,audienceControlsValue:r,composeHeader:l,composerData:c,customizePropsForSingleComposerItem:h,geoEnabled:p,history:f,inReplyToStatus:_,isInline:y,isModal:v,isSelfThreadReply:w,isSending:C,isSuperFollowsCreator:x,parentTweetId:E,positionCursorAtBeginning:T,previousTweetMedia:S,richTextInputContext:I,scheduledFor:R,typeaheadWrapper:D,userLanguage:P,windowWidth:M}=this.props,{errorMessage:k,focused:O,shouldDisableButton:A,showAltTextPrompt:L,showDiscardTweetConfirmation:F,showEditTimeLimitExceededConfirmation:B,showToxicReplyNudge:N,typeaheadActive:j}=this.state,z=!v&&j,V=y?0:this.props.activeComposerIndex,H=z||y?[c[V]]:c,U=this._areComposersValid(),W=this.hasNonCompliantQuote&&this.isRetweet,q=y?d.a:m.a,G=y?{}:{onAnimateComplete:v?void 0:this._handleAnimateComplete},$=A||!U||W||this.isCommunityTweetFromProtectedUser,K=y&&wi.a.isOneColumnSquishedLayout(M),Q=this.isCommunityTweet&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled"),X=K||Q,J=K||this.isCommunityTweet||this.isExclusiveTweet,Y=null==_||null==(e=_.trusted_friends_info)?void 0:e.screen_name;return o.a.createElement(d.a,{ref:this._setRootRef,style:!E&&Yo.root},y?this._renderProgressBar():null,k&&o.a.createElement(d.a,{style:Yo.inlineCallout},o.a.createElement(g.a,{action:null!=(t=k.action)&&t.label&&null!=(a=k.action)&&a.link?{label:k.action.label,link:k.action.link}:void 0,text:k.text,type:"danger"})),o.a.createElement(d.a,{onFocus:this._handleFocus,style:[Yo.content,E&&Yo.contentInlineReply,v&&Yo.contentModal]},_?this._renderReplyContext():null,l,o.a.createElement(q,G,H.map(((e,t)=>{var a;const l=Object(ia.h)(e.scheduledFor),u=c.indexOf(e),m=h(e,t,H),g=v||y?o.a.createElement(b.a,{behavioralEventContext:Qo,disabled:$,onPress:this.handleTweetOrRetweet,size:"medium",style:Yo.inlineSendButton,testID:v?fo:_o,type:"brandFilled"},Object(Fs.c)({inReplyToStatus:!!_,isSelfThreadReply:!!w,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!l,isThread:this.isThread,isEdit:!!this.isEdit})):null,k=this._getSingleComposerDataWithLatestText(e);return o.a.createElement(d.a,{key:e.key},o.a.createElement(mi,i()({addComposerLink:this._makeAddComposerLink(y,w,E),addToast:s,additionalToolbarContent:g,audienceControlsValue:r,autoFocus:this.isInlineReply&&O,data:k,disableAddTweet:c.length>=25,editable:!C&&!!n,fetchAutotaggedLocationIfNeeded:this._fetchAutotaggedLocationIfNeeded,geoEnabled:p,hidePoll:X,hideScheduling:J,history:f,index:u,isAccountProtected:null==(a=this.props.activeUser)?void 0:a.protected,isActive:u===V&&!C,isCommunityTweetFromProtectedUser:this.isCommunityTweetFromProtectedUser,isEdit:!!this.isEdit,isExpanded:0!==t||this._shouldBeExpanded(),isInline:y,isInlineReply:this.isInlineReply,isLast:y||u===c.length-1,isReply:!!_||this.isInlineReply,isSelfThreadReply:!!w,isSuperFollowsCreator:x,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:n,onAddComposer:this._handleAddComposer,onFilesAdded:this._handleAddMediaFiles(u),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(k.key,t),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!T,previousMedia:S,ref:this._setComposerRef(u),richTextInputContext:I,scheduledFor:R,setActiveParentKey:this._setActiveParentKey,trustedFriendsTweetAuthorScreenName:Y,twitterTextConfigurationVersion:"version3",typeaheadActive:j,typeaheadWrapper:D,updateAudienceControlsValue:this._updateAudienceControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:P,windowWidth:M},m)))}))),F?this._canSaveDraft?o.a.createElement(u.a,{cancelButtonLabel:Oo,confirmButtonLabel:Fo,headline:Ao,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:Lo}):o.a.createElement(u.a,{confirmButtonLabel:Oo,confirmButtonType:"destructiveFilled",headline:this.isThread?Mo:Po,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:ko}):null,B?o.a.createElement(u.a,{confirmButtonLabel:zo,headline:No,onConfirm:this._handleConfirmDiscardTweet,text:jo,withCancelButton:!1}):null,L?this._renderAltTextPrompt():null,N?this._renderToxicReplyNudge():null,o.a.createElement(d.a,{style:C&&Yo.mask})))}_scribe(e,t){const{analytics:a}=this.props;a.scribe({...e,data:t})}get isEdit(){const{previousTweetId:e}=this.props;return!!e}get isInlineReply(){const{parentTweetId:e}=this.props;return!!e}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{composerData:e,isSending:t}=this.props,{scheduledTweetId:a}=e[0],{showDiscardTweetConfirmation:n}=this.state,i=this._areComposersEmptyOrUnchanged();return!(t||i||n||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some((e=>e.media.some((e=>e.uploading))));return t&&a}get shouldShowAltTextPrompt(){const{altTextNudgeType:e}=this.props,{numberOfDescriptionsMissing:t}=this._getAltTextMetadata();return!(0===t||!this.context.featureSwitches.isTrue("responsive_web_alt_text_nudges_enabled")||e!==bi.a.prompt)}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!(this.isCommunityTweet||this.isExclusiveTweet||this.isThread||e[0].pollActive||0!==e[0].mediaTags.length||t||this.isEdit)}get isCommunityTweet(){const{audienceControlsValue:e,inReplyToStatus:t}=this.props;return!!(null!=t&&t.community_id_str||"community_members"===e._type)}get isCommunityTweetFromProtectedUser(){var e;return!(!this.isCommunityTweet||null==(e=this.props.activeUser)||!e.protected)}get isReply(){return!(!this.props.inReplyToStatus&&!this.props.inReplyToStatusId)}get isExclusiveTweet(){const{audienceControlsValue:e}=this.props;return!!e.exclusivityControlValue}get isTrustedFriendsTweet(){const{audienceControlsValue:e}=this.props;return!!e.trustedFriendsValue}get tweetType(){return this.isQuoteTweet?Xo.Quote:this.isThread?Xo.Thread:this.isReply?Xo.Reply:Xo.Original}_undoEnabledForTweetType(e){const{undoTweetSettings:t}=this.props;return!t||void 0===t[this.tweetType]||t[e]}get isPreview(){var e,t;const{composerData:a}=this.props,n=null==this||null==(e=this.context)||null==(t=e.userClaims)?void 0:t.isTrueAndEnabled("subscriptions_feature_1003"),i=a[0].pollActive&&a[0].pollValid;return!(!n||this.isEdit)&&(i?this._undoEnabledForTweetType("poll"):this._undoEnabledForTweetType(this.tweetType))}}Jo.defaultProps={customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:gi.a},Jo.contextType=Xt.a,Jo._validateMedia=(e,t)=>{const{media:a}=e;return Object(ta.c)(a.concat(t))};const Yo=p.a.create((e=>({root:{paddingBottom:e.spaces.space4},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:{...p.a.absoluteFillObject},inlineSendButton:{marginLeft:e.spaces.space12},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},altTextPromptParagraph:{marginTop:e.spaces.space8},hidden:{position:"absolute",visibility:"hidden",width:"100%"}})));t.a=Object(Fe.a)(bo(Jo))},hyzI:function(e,t,a){var n=a("m5o6"),i=a("d0UJ"),s=a("eask"),o=a("9SKQ"),r=a("e63W");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=r,e.exports=l},"ii+P":function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var n=a("ERkP"),i=a.n(n),s=a("wtru");function o(e){const t=Object(s.b)();return[!!t&&!t.flags[e],i.a.useCallback((()=>{null==t||t.addFlag(e)}),[t,e])]}t.a=o},jtO7:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("MWbm"),l=a("t62R"),c=a("I4+6"),d=a("cm6r"),u=a("rHpw");const h=u.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.space48,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16}})));t.a=({align:e="center",color:t,label:a,...n})=>{const s=c.a.generate({backgroundColor:u.a.theme.colors.transparent,color:u.a.theme.colors[t],insetFocusRing:!0});return o.a.createElement(r.a,{style:h.container},o.a.createElement(d.a,i()({},n,{interactiveStyles:s,style:h.root}),o.a.createElement(l.b,{align:e,color:t},a)))}},kG2z:function(e,t){var a=Date.now;e.exports=function(e){var t=0,n=0;return function(){var i=a(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},kHoZ:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},kIAd:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a("0vv5");const i=500,s={scoper:[{type:"dmUserSearch",regexp:/^[@]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.n(n).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},keCP:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("MvUL"),a("ERkP")),o=a.n(s),r=a("zpdM"),l=a("k/Ka"),c=a("fs1G"),d=a("SV7d"),u=a("PxJJ"),h=a("w9LO"),p=a("rHpw"),m=a("gk9V");const g=e=>Object(l.a)("div",e);let b=!1;t.a=o.a.forwardRef(((e,t)=>{const a=d.d();return o.a.createElement(f,i()({},e,{onFocus:t=>{e.onFocus&&e.onFocus(t),a("focus")},ref:t}))}));class f extends o.a.Component{constructor(...e){super(...e),this._setSelectionToStart=()=>{const{editorState:e}=this.props,t=e.getCurrentContent().getFirstBlock().getKey();return r.EditorState.acceptSelection(e,new r.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:!1}))},this._setFocusToStart=()=>{const e=this._setSelectionToStart();return r.EditorState.forceSelection(e,e.getSelection())},this._setFocusToEnd=()=>{const{autoFocus:e,editorState:t,onChange:a}=this.props;e?null==a||a(r.EditorState.moveFocusToEnd(t)):null==a||a(r.EditorState.moveSelectionToEnd(t))},this._setDraftJsStyle=()=>{const{placeholderTextColor:e}=this.props,t=document.createElement("style");t.innerHTML=m.b({placeholderTextColor:e});const a=document.head;a&&a.insertBefore(t,a.firstChild)},this.focus=()=>{this._editor&&this._editor.focus()},this.blur=()=>{this._editor&&this._editor.blur()},this.getValue=()=>this.props.editorState.getCurrentContent().getPlainText(),this.getOffsetHeight=()=>{const{editor:e}=this._editor||{};return e&&e.offsetHeight||0},this.clear=()=>{},this._setEditorRef=e=>{this._editor=e},this._handleViewClick=()=>this.focus(),this._onPastedFiles=e=>{const{onFilesAdded:t}=this.props,a=[];if(e.forEach((e=>{e instanceof File&&a.push(e)})),a.length){return(null==t?void 0:t(a))?"handled":"not-handled"}return"not-handled"},this._removeNewLines=(e,t)=>r.EditorState.push(t,r.Modifier.replaceText(t.getCurrentContent(),t.getSelection(),e.replace(/[\r\n]+/g," ")),"insert-characters"),this._onPastedText=(e,t,a)=>{const{multiline:n,onChange:i}=this.props;return i&&!n?(i(this._removeNewLines(e,a)),"handled"):"not-handled"},this._myKeyBindingFn=e=>{const{dismissComposerCommandName:t,keyBindingFn:a,sendTweetCommandName:n}=this.props,{hasCommandModifier:i}=r.KeyBindingUtil;return 13===e.keyCode&&i(e)?n:27===e.keyCode?t:(null==a?void 0:a(e))||Object(r.getDefaultKeyBinding)(e)},this._onKeyCommand=e=>{const{keyCommandHandlers:t}=this.props,a=t&&t[e];return a?(a(),"handled"):"not-handled"},this._onSingleLineReturn=(e,t)=>{const{handleReturn:a}=this.props;return null==a||a(e,t),"handled"},this._getContainerStyle=()=>{const{appTextSize:e,maxNumberOfLines:t,multiline:a,numberOfLines:n,withMaxHeight:i}=this.props,s=p.a.theme.lineHeightsPx[{small:"subtext2",normal:"body",large:"headline1",subtext2:"subtext2",body:"body",headline1:"headline1"}[e]],o=(a&&n?n:1)*s;return i?{minHeight:o,maxHeight:(a&&t?t:1)*s}:{minHeight:o,height:"100%"}}}componentDidMount(){const{onChange:e,positionCursorAtBeginning:t,positionCursorAtEnd:a}=this.props;a?this._setFocusToEnd():t?null==e||e(this._setFocusToStart()):this.props.autoFocus&&this.focus(),b||(this._setDraftJsStyle(),b=!0)}static getDerivedStateFromError(){return{}}componentDidCatch(e){u.a.report(e,{tags:{userVisible:!0,draftJs:!0}})}render(){const{ariaActiveDescendant:e,ariaAutocomplete:t,ariaControls:a,ariaLabel:n,blockRenderMap:i,blockRendererFn:s,blockStyleFn:l,dragPlaceholder:c,editorState:d,handleReturn:u,multiline:b,onChange:f,onFocus:y,onKeyDown:v,onKeyPress:w,onKeyUp:C,placeholder:x,spellCheck:E,stripPastedStyles:T,style:S,testID:I}=this.props;return o.a.createElement(g,{className:b?void 0:m.a,onClick:this._handleViewClick,style:[this._getContainerStyle(),S],testID:I?`${I}RichTextInputContainer`:void 0},o.a.createElement(r.Editor,{ariaActiveDescendantID:e,ariaAutoComplete:t,ariaControls:a,ariaLabel:n,ariaMultiline:b,blockRenderMap:i,blockRendererFn:s,blockStyleFn:l,customAttrs:{[h.a.NO_REFOCUS_ATTRIBUTE]:"true",onKeyPress:w,onKeyUp:C},customStyleMap:_(p.a.theme),editorState:d,handleKeyCommand:this._onKeyCommand,handlePastedFiles:this._onPastedFiles,handlePastedText:this._onPastedText,handleReturn:b?u:this._onSingleLineReturn,keyBindingFn:this._myKeyBindingFn,onChange:f,onFocus:y,onKeyDown:v,placeholder:x,ref:this._setEditorRef,spellCheck:"false"!==E,stripPastedStyles:T,tabIndex:0,webDriverTestID:I}),c)}}f.defaultProps={appTextSize:"body",autoFocus:!1,keyCommandHandlers:{},maxNumberOfLines:30,multiline:!0,numberOfLines:6,onFocus:c.a,positionCursorAtEnd:!1,spellCheck:"true",stripPastedStyles:!0,withMaxHeight:!0},f.propTypes={};const _=({colors:e})=>({overflow:{backgroundColor:e.red200}})},krmn:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("2ZFc"),o=a("OiMc"),r=a("/yvb"),l=a("qqsb"),c=a.n(l),d=a("pNJr"),u=a("zb92"),h=a("RuTB");var p=Object(u.a)({loader:()=>c.a.emoji.then((()=>Promise.all([a.e(14),a.e(218)]).then(a.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>i.a.createElement(h.a,{hasError:e,onRetry:t})}),m=a("U+bB"),g=a("kLqS"),b=a("MWbm"),f=a("rHpw"),_=a.p+"twemoji_sprite.6d90d9d8.png",y=a.p+"twemoji_sprite_high_res.0b0faef8.png";const v=f.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var w=e=>{const{onSelect:t,partialRender:a}=e,n=g.a.get()>1?y:_;return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{style:[v.content,v.dimensions]},i.a.createElement(p,{onSelect:t,partialRender:a,rowSize:9,spriteUrl:n})),i.a.createElement(m.a,{source:n,style:v.hidden}))};const C=c.a.d4a4842e,x=i.a.createElement(d.a,null),E=c.a.fec16c1c,T={viewType:"emoji_picker"},S=e=>{const{disabled:t,onEmojiSelect:a,onPress:n,size:l,style:c,textInputRef:d}=e,[u,h]=i.a.useState(!0);i.a.useEffect((()=>{const e=setTimeout((()=>{p.preload(),s.a.get("emojiPicker2")}),5e3);return()=>{clearTimeout(e)}}),[]);return i.a.createElement(o.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>h(!1),onDismiss:()=>h(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>d&&d.focus()))},renderContent:()=>i.a.createElement(w,{onSelect:a,partialRender:u}),withArrow:!0},i.a.createElement(r.a,{accessibilityHasPopup:"menu",accessibilityLabel:C,behavioralEventContext:T,disabled:t,hoverLabel:{label:E},icon:x,onPress:e=>n&&n(e),size:l,style:c,type:"brandText"}))};S.defaultProps={disabled:!1,size:"xSmall"};t.a=S},kwr2:function(e,t,a){var n=a("6QIk"),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,a=n(t,e);return!(a<0)&&(a==t.length-1?t.pop():i.call(t,a,1),--this.size,!0)}},lsKC:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a("qqsb"),i=a.n(n),s=a("H7Rt");const o=i.a.g34f2c63,r=i.a.f70a36d0,l=i.a.d17df548,c=i.a.h735a98e,d=i.a.h3701ffe,u=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?c:e.isEdit?d:t?l:e.isThread?r:o({verb:""})},h=(e,t,a)=>()=>{if(a){var n,i;(null==(n=t.state)||null==(i=n.previousPath)?void 0:i.includes(a))&&"/compose/tweet"===t.pathname?window.scrollTo(0,0):e.push(`/i/communities/${a}`,{lockScroll:!0})}else{var s,o;const a=(null==(s=t.state)||null==(o=s.previousPath)?void 0:o.includes("/home"))&&"/compose/tweet"===t.pathname;t.pathname.includes("/home")||a?window.scrollTo(0,0):e.push("/home",{lockScroll:!0})}},p=({isInline:e,isSelfThreadReply:t,parentTweetId:a})=>e?{pathname:"/compose/tweet",state:{inReplyToStatusId:a,isSelfThreadReply:t}}:void 0,m=(e,t)=>{var a;return null!=e&&e.exclusivity_info?{_type:"super_followers_exclusive",conversationControlsValue:s.a.super_followers_exclusive,exclusivityControlValue:{}}:null!=e&&e.community_id_str?{_type:"community_members",communityIdValue:e.community_id_str,conversationControlsValue:s.a.community_members}:null!=e&&e.trusted_friends_info&&null!=t&&t.length?{_type:"trusted_friends_tweet",conversationControlsValue:s.a.trusted_friends_tweet,trustedFriendsValue:{trusted_friends_list_id:t[0].rest_id}}:{_type:"conversation_controls",conversationControlsValue:(null==(a=e.conversation_control)?void 0:a.policy)||s.a.all}}},m5o6:function(e,t,a){var n=a("Tv3l"),i=a("+ooz"),s=a("qeCs");e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},mUsV:function(e,t,a){var n=a("5pfJ");e.exports=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},n1QJ:function(e,t){e.exports=function(e,t,a){for(var n=a-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},oEoC:function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return p}));a("kYxP");var n=a("rHpw"),i=a("zTrU"),s=a("kIAd");function o(e,t){let a;const n=s.b.scoper.find((n=>{if(-1!==n.srcInputs.indexOf(t))return a=e.match(n.regexp),a}));let i="";return a&&(i=a&&(1===a.length?a[0]:a[1])),n?{...n.scope,src:t,q:i}:null}function r(e,t){const a=t.slice(0,e),n=t.slice(e,t.length),i=a.search(s.b.WordEnd),o=i>=0?a.slice(i):"",r=n.search(s.b.WordBoundary),l=o+n.slice(0,r);return l.trim()?{start:i,end:e+r,word:l}:{start:-1,end:-1,word:""}}function l(){return`typeaheadFocus-${Math.random()}`}function c(e){const{altKey:t,ctrlKey:a,metaKey:n}=e;return!(t||a||n)}function d(e,t){const a=[];e.forEach((e=>{const n=t.find((t=>t.id===e.id));n&&n.data&&n.data.result_context?a.push(n):a.push(e)}));const n=a.map((e=>e.id)),i=t.filter((e=>n.indexOf(e.id)<0));return[...a,...i]}const u=Object(i.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${n.a.theme.spaces.space64})`,position:"fixed",top:`calc(${e}px + ${n.a.theme.spaces.space1})`,transform:[{translate3d:"0,0,0"}]})));let h=0;const p=()=>(h+=1,`typeaheadDropdown-${h}`)},"p+r5":function(e,t,a){"use strict";a.d(t,"a",(function(){return R}));var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("tI3i"),l=a.n(r),c=a("MWbm"),d=a("qqsb"),u=a.n(d),h=a("n5fo"),p=a("5emT"),m=a("Oib4"),g=a("WtWS"),b=a("zTrU"),f=a("aITJ"),_=a("piX5"),y=a("38/B"),v=a("t62R"),w=a("/yvb"),C=a("rHpw"),x=a("ioan");const E=e=>e.length,T=(e,t=E)=>t(e),S=u.a.de540c32,I=u.a.b4abfdb4;class R extends o.a.Component{constructor(e){super(e),this._blurOnBackspaceKeyUpForKaiOS=!1,this._isLabelLarge=()=>{const{actualCount:e,isFocused:t}=this.state;return!e&&!t},this._getTextInputStyle=Object(b.a)((e=>[D.root,!e&&D.disabled])),this._getTextInputType=()=>{const{showPasswordVisibilityIcon:e,type:t}=this.props,{isPasswordRevealed:a}=this.state;return"password"===t&&e?a?"text":"password":t},this._calculateLength=e=>T(e,this.props.calculateLength),this._shouldRenderDisplayCount=()=>{const{isFocused:e}=this.state,t=this._isFormInvalid();return Boolean((e||t)&&this._getMaxDisplayCount())},this._isInvalidNumber=()=>{var e,t,a,n,i;const{type:s}=this.props,o=null==(e=this._textInput)||null==(t=e.textInputNode)?void 0:t.value,r=null==(a=this._textInput)||null==(n=a.textInputNode)||null==(i=n.validity)?void 0:i.badInput;return"number"===s&&""===o&&!0===r},this._getActualCount=e=>{let t=e.length;return this._isInvalidNumber()&&(t=1),t},this._handleBlur=()=>{var e;const{onBlur:t}=this.props,a=(null==(e=this._textInput)?void 0:e.getValue())||"",n=this._calculateLength(a),i=this._getActualCount(a);this.setState({isFocused:!1,displayCount:n,actualCount:i}),t&&t()},this._handleChange=e=>{const{onChange:t}=this.props,{previousValue:a}=this.state,{value:n}=e.currentTarget,i=this._calculateLength(n),s=this._getActualCount(n),o=this._getAdjustedMaxLength();void 0!==o&&n.length>o&&a.length<n.length?e.currentTarget.value=a:(this.setState({isFocused:!0,displayCount:i,actualCount:s,previousValue:e.currentTarget.value}),t&&t(e))},this._handleFocus=()=>{const{onFocus:e}=this.props;this.setState({isFocused:!0}),e&&e()},this._handleKeyPress=e=>{const{multiline:t,onKeyPress:a,onSubmitEditing:n}=this.props;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!n||(e.preventDefault(),n(e))},this._handleKeyDown=e=>{const{onKeyDown:t}=this.props,{displayCount:a}=this.state,n=0===a;f.b.isKaiOS()&&"Backspace"===e.key&&n?this._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)},this._handleKeyUp=e=>{const{onKeyUp:t}=this.props;f.b.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)},this._handlePasswordVisibilityClick=e=>{this.setState((e=>({isPasswordRevealed:!e.isPasswordRevealed})))},this._setTextInputRef=e=>{this._textInput=e},this._checkComponentPropsUsageCorrectness=e=>{const{defaultValue:t,maxLength:a,onChange:n,validLength:i,value:s}=e,o=!!n,r="string"==typeof s,c="string"==typeof t;l()(!(!c&&r&&!o),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),l()(!(a&&i&&i>a),"Max length should be equal or greater than valid length."),l()(!(void 0!==a&&a<=0||void 0!==i&&i<=0),"Set editable to false instead of limiting the valid character count to 0.")},this._exceedsValidLength=e=>{const t=this._getMaxDisplayCount();return!!t&&e>t},this._getMaxDisplayCount=()=>this.props.validLength||this.props.maxLength,this._getAdjustedMaxLength=()=>{const{maxLength:e}=this.props,t=this.getValue(),a=this._calculateLength(t);return e?e+t.length-a:void 0},this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:a}=e,n=a||t||"";this.state={displayCount:this._calculateLength(n),actualCount:E(n),isFocused:!1,isPasswordRevealed:!1,previousValue:n}}componentDidUpdate(e){const{maxLength:t,onChange:a,validLength:n,value:i}=this.props,{maxLength:s,onChange:o,validLength:r,value:l}=e;r===n&&t===s&&!!a===!!o&&"string"==typeof i===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:a,value:n}=e,i="string"==typeof n?T(n,a):0;return"string"==typeof n&&i!==t.displayCount?{displayCount:i,actualCount:n.length}:null}render(){const{accessibilityLabel:e,editable:t,errorText:a,helperText:n,style:i}=this.props,{isFocused:s}=this.state,r=this._isFormInvalid();return o.a.createElement(c.a,{style:[P.root,i]},o.a.createElement(c.a,{accessibilityLabel:e,accessibilityRole:"label",style:[_.a.border,P.textInputFormStyle,r&&_.a.invalidBorderColor,s&&r&&_.a.focusedBorderInvalid,s&&!r&&_.a.focusedBorderValid,!t&&_.a.disabled]},o.a.createElement(c.a,{style:P.textInputFormWrapper},o.a.createElement(c.a,{style:P.textInputHeader},this._renderLabel(),this._shouldRenderDisplayCount()?this._renderDisplayCount():null),this._renderTextInput())),o.a.createElement(c.a,{style:[P.sidePadding,P.underTextInputForm]},o.a.createElement(c.a,{style:P.subtextWrapper},n?this._renderHelperText():null,r&&a?this._renderErrorText():null)))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,a=t?"primary":"gray700",n=this._isFormInvalid()?"red500":a,i=this._isLabelLarge();return o.a.createElement(v.b,{color:i?"gray700":n,numberOfLines:1,size:i?"headline1":"subtext2",style:[P.textInputHeaderItem,i&&P.placeholderText,!y.a.reducedMotionEnabled&&P.transition]},e)}_renderTextInput(){const{Icon:e,accessibilityLabel:t,calculateLength:a,editable:n,errorText:s,helperText:r,invalid:l,label:d,maxLength:u,onBlur:h,onChange:p,onFocus:m,onKeyDown:g,onKeyPress:b,onKeyUp:f,onSubmitEditing:_,showPasswordVisibilityIcon:y,showValidationIcon:w,style:C,type:E,validLength:T,...S}=this.props;return o.a.createElement(c.a,{style:D.container},e&&!this._isLabelLarge()?this._renderIcon():null,o.a.createElement(v.b,{size:"headline1",style:D.wrapper},o.a.createElement(x.a,i()({},S,{editable:n,maxLength:this._getAdjustedMaxLength(),onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,ref:this._setTextInputRef,style:this._getTextInputStyle(n),type:this._getTextInputType()}))),w&&!this._isLabelLarge()?this._renderValidationIcon():null,this._renderPasswordVisibilityIcon())}_renderPasswordVisibilityIcon(){const{showPasswordVisibilityIcon:e,type:t}=this.props,{isPasswordRevealed:a}=this.state;return"password"===t&&e?o.a.createElement(c.a,{style:P.passwordVisibilityIconContainer},o.a.createElement(w.a,{accessibilityLabel:a?I:S,focusable:!0,hoverLabel:{label:a?I:S},icon:a?o.a.createElement(h.a,null):o.a.createElement(p.a,null),onPress:this._handlePasswordVisibilityClick,size:"smallCompact",type:"primaryText"})):null}_renderHelperText(){return o.a.createElement(c.a,{accessibilityLiveRegion:"polite"},o.a.createElement(v.b,{color:"gray700",size:"subtext2",style:P.subtext},this.props.helperText))}_renderErrorText(){return o.a.createElement(c.a,{accessibilityLiveRegion:"assertive"},o.a.createElement(v.b,{color:"red500",size:"subtext2",style:P.subtext},this.props.errorText))}_renderDisplayCount(){const{displayCount:e}=this.state,t=this._getMaxDisplayCount(),a=this._exceedsValidLength(e),n=t&&u.a.ia24dc8d(t),i=u.a.ia24dc8d(e);return o.a.createElement(c.a,{accessibilityLiveRegion:"polite",style:[P.textInputHeaderItem,P.displayCount]},o.a.createElement(v.b,{color:a?"red500":"gray700",size:"subtext2"},n?`${i} / ${n}`:""))}_renderIcon(){const{Icon:e}=this.props,{isFocused:t}=this.state,a=[P.icon,t&&P.focusedIcon];return e&&o.a.createElement(e,{style:a})}_renderValidationIcon(){return this._isFormInvalid()?o.a.createElement(m.a,{style:[P.validationIcon,_.a.invalidColor]}):o.a.createElement(g.a,{style:[P.validationIcon,_.a.validColor]})}_isFormInvalid(){const{displayCount:e}=this.state;return!!this.props.invalid||this._exceedsValidLength(e)||this._isInvalidNumber()}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}R.defaultProps={autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1},R.propTypes={};const D=C.a.create((e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden",paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space12,marginTop:e.spaces.space16},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",textAlign:"inherit",outlineStyle:"none",padding:0},wrapper:{alignItems:"center",display:"flex",fontSize:e.fontSizes.headline2,width:"100%"},disabled:{color:e.colors.gray700}}))),P=C.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},textInputHeader:{flexDirection:"row",justifyContent:"space-between",position:"absolute",height:"100%",width:"100%"},textInputHeaderItem:{paddingTop:e.spaces.space8,paddingHorizontal:e.spaces.space8,fontSize:"small"},placeholderText:{paddingTop:e.spaces.space16,fontSize:e.fontSizes.headline2,userSelect:"none"},displayCount:{flexGrow:1,alignItems:"flex-end"},sidePadding:{paddingHorizontal:e.spaces.space8},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.space20,paddingTop:e.spaces.space2},subtext:{alignSelf:"flex-start"},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.gray700,paddingRight:e.spaces.space4},validationIcon:{alignSelf:"center",paddingLeft:e.spaces.space4},transition:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms cubic-bezier(0.4, 0, 0.2, 1), font-size 150ms cubic-bezier(0.4, 0, 0.2, 1), padding-top 150ms cubic-bezier(0.4, 0, 0.2, 1)"},passwordVisibilityIconContainer:{alignSelf:"center",paddingLeft:e.spaces.space4},passwordVisibilityIcon:{color:e.colors.gray700}})))},pKoL:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("U+bB"),o=a("MWbm"),r=a("cHvH"),l=a("mXq/"),c=a("/yvb"),d=a("a6qo"),u=a("rHpw"),h=a("qqsb"),p=a.n(h),m=a("hOZg"),g=a("GCOQ"),b=a("tuke"),f=a("9HgX"),_=a("v6aA"),y=a("HPNB"),v=a("eyty"),w=a("62wY"),C=a("sjK1"),x=a("k/Ka"),E=a("z4Tm"),T=a("eXeu");class S extends i.a.Component{constructor(...e){super(...e),this._setVideoRef=e=>{const{getVideoRef:t}=this.props;t&&t(e)}}render(){const{children:e,dataSaverMode:t,getVideoRef:a,style:n,variants:s,...o}=this.props,r=Object(E.c)(Object(T.e)(s),t);return Object(x.a)("video",{...o,children:[r.map((e=>i.a.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:n})}}S.defaultProps={dataSaverMode:!1,variants:[]};var I=a("+/sI"),R=a("LCtV"),D=a("zb92"),P=a("RuTB"),M=Object(D.a)({loader:()=>Promise.all([a.e(0),a.e(4),a.e(187)]).then(a.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__}))),renderPlaceholder:(e,t)=>i.a.createElement(P.a,{hasError:e,onRetry:t})});const k=p.a.gd80afba,O=p.a.j322caee,A=p.a.abd845fe,L=p.a.df1b0708,F=p.a.cd959e5c,B=p.a.e68b09b4,N=p.a.add55c98;class j extends i.a.Component{constructor(...e){super(...e),this.state={isVideoPaused:!0,playGif:!1},this._handleGifClick=()=>{this.setState({playGif:!this.state.playGif})},this._handleMediaPreviewLayout=e=>{const{mediaItem:t,resizeIfNeeded:a}=this.props,n=t.mediaFile||t.externalMediaDetails;if(!n)return;const{nativeEvent:{layout:{height:i,width:s}}}=e,{height:o,width:r}=n,l=r/o;Math.abs(l-s/i)>.05&&this._mediaContainer&&("width"===a?this._mediaContainer.setNativeProps({style:{width:i*l}}):"height"===a&&this._mediaContainer.setNativeProps({style:{height:s/l}}))},this._handleVideoOnPlay=e=>{this.setState({isVideoPaused:!1})},this._handleVideoOnPause=e=>{this.setState({isVideoPaused:!0})},this._setMediaContainerRef=e=>{this._mediaContainer=e},this._setVideoRef=e=>{this._video=e},this.playVideo=()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}},this.pauseVideo=()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}}render(){var e;const{accessibilityLabel:t,accessibilityRole:a,enableGif:n,mediaItem:s,onEdit:u,onEditSensitiveWarning:h,onRemove:p,style:_,withAltTextLabel:v,withCloseButton:w,withEditButton:C,withEditIcon:x,withEditSensitiveWarningButton:E}=this.props,{playGif:T}=this.state,S=s.externalMediaDetails&&s.externalMediaDetails.mediaType===f.a,R=S||n&&s.mediaFile&&s.mediaFile.isGif,D=!(null==(e=s.mediaFile)||!e.isVideo);return i.a.createElement(r.a,null,(({windowWidth:e})=>{const n=void 0!==x?x:!y.a.isTwoColumnLayout(e);return i.a.createElement(o.a,{accessibilityLabel:t||N,accessibilityRole:a,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[_,z.cursor,S&&z.gifPlayButton]},this._renderPreview(),S&&!T&&i.a.createElement(l.a,{accessibilityLabel:L,onPress:this._handleGifClick,size:"small"}),w?i.a.createElement(c.a,{accessibilityLabel:F,hoverLabel:{label:B},icon:i.a.createElement(m.a,null),onPress:p,size:"small",style:z.close,type:"onMediaDominantColorFilled"}):null,R?i.a.createElement(I.c,{type:I.a}):null,v&&!D?i.a.createElement(d.a,{align:"left",altLabel:t}):null,C?i.a.createElement(o.a,{style:[z.editMedia,D?z.editVideo:z.editImage]},E?i.a.createElement(c.a,{accessibilityLabel:O,icon:i.a.createElement(g.a,{style:z.editSensitiveWarningIcon}),onPress:h,size:"small",style:z.editSensitiveWarningButton,type:"onMediaDominantColorFilled"}):null,i.a.createElement(c.a,{accessibilityLabel:k,icon:n?i.a.createElement(b.a,null):void 0,onPress:u,size:n?"xSmall":"small",type:"onMediaDominantColorFilled"},n?void 0:A)):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,a=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,a)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):i.a.createElement(o.a,{style:u.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:a}=this.state,n={uri:a?e:t};return i.a.createElement(o.a,{onClick:this._handleGifClick,style:u.a.absoluteFill},i.a.createElement(s.a,{resizeMode:"cover",source:n,style:z.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,imageResizeMode:a,mediaItem:n,onClick:s}=this.props;return i.a.createElement(R.b,{borderRadius:e,enableGif:t,mediaItem:n,onClick:s,resizeMode:a})}_renderVideoPreview(e,t,a,n){var s;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:o}=this.props,r=null==(s=o.mediaMetadata)?void 0:s.subtitles;if(this._configurableVideoPlayerEnabled&&n instanceof C.c){const s=Object(v.h)(n.fileHandle)?[{src:t,type:e}]:[],l=`${a}`;return i.a.createElement(M,{mediaFile:n,mediaId:l,subtitles:r,trimData:null==o?void 0:o.trimData,variants:s})}{var l;const a=Object(v.h)(n.fileHandle)?[{content_type:e,url:t}]:[],s=(null==r||null==(l=r.upload)?void 0:l.mediaFile)instanceof w.b?r.upload.mediaFile.vtt:void 0;return i.a.createElement(S,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:n instanceof C.c?n.thumbnail:"",style:z.video,variants:a},r&&s?i.a.createElement("track",{default:!0,kind:"subtitles",label:r.displayName,src:s,srcLang:r.lang}):null)}}}j.contextType=_.a,j.defaultProps={enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1,withEditSensitiveWarningButton:!1};const z=u.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editSensitiveWarningIcon:{color:e.colors.primary},editMedia:{display:"flex",flexDirection:"row",position:"absolute",right:e.spaces.space4},editImage:{bottom:e.spaces.space4},editVideo:{top:e.spaces.space4},editSensitiveWarningButton:{marginRight:e.spaces.space8},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=j},pPzx:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},pcjM:function(e,t,a){"use strict";a.r(t),a.d(t,"Compose",(function(){return Ae}));a("kYxP"),a("MvUL");var n=a("ERkP"),i=a.n(n),s=a("RgK2"),o=a.n(s),r=a("7nmT"),l=a.n(r),c=a("MWbm"),d=a("/yvb"),u=a("JYMr"),h=a("cHvH"),p=a("feu+"),m=a("7N4s"),g=a("rHpw"),b=a("qqsb"),f=a.n(b),_=a("zTrU"),y=a("3A2y"),v=a("t62R");const w=e=>{const{editableUntil:t,timeElapsedCallback:a}=e,n=i.a.useRef(t.getTime()),s=i.a.useRef(null);null==s.current&&(s.current=()=>{const e=n.current-(new Date).getTime();return new Date(e<0?0:e).toLocaleString("default",{minute:"numeric",second:"numeric"})});const[o,r]=i.a.useState(s.current);return i.a.useEffect((()=>{const e=setInterval((()=>{if(!s.current)return null;const t=s.current();"00:00"===t&&(clearInterval(e),a()),r(t)}),1e3);return()=>clearInterval(e)}),[a]),i.a.createElement(c.a,{style:C.root},i.a.createElement(v.b,{color:"red500",testID:"displayedCountdown",weight:"medium"},o))},C=g.a.create((e=>({root:{paddingLeft:4,paddingRight:4,paddingTop:6,paddingBottom:6,backgroundColor:e.colors.red0,borderRadius:6}})));var x=a("jHSc"),E=a("iFPY"),T=a("4zmP"),S=a("k/Ka"),I=a("Lsrn");const R=(e={})=>Object(S.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[I.a.root,e.style],viewBox:"0 0 32 32"},i.a.createElement("g",null,i.a.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));R.metadata={width:32,height:32};var D=R,P=a("xZGM"),M=a("v6aA"),k=a("rxPX");const O=e=>Object(P.I)(e,P.r);var A=Object(k.a)().propsFromState((()=>({shouldShowNewsletterCallout:O}))).propsFromActions((()=>({addFlag:P.E})));const L=f.a.ed33a3b6,F=f.a.d5bda8b4,B=f.a.i859a9d4,N=g.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var j=A((({addFlag:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:a}=i.a.useContext(M.a),n=a.isTrue("responsive_web_newsletters_callout_enabled");return t&&n?i.a.createElement(c.a,{style:N.revueCallout},i.a.createElement(T.a,{Icon:D,action:{label:B,link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},headline:L,onClose:()=>{e(P.r)},text:F,withCloseButton:!0})):null})),z=a("h5NW"),V=a("lsKC"),H=a("HPNB"),U=a("Dtul"),W=a("7JQg"),q=a("QbaN"),G=a("zh9S"),$=a("hqKg"),K=a("0KEI"),Q=a("pidX"),X=a("oEGd"),J=a("rU/Q"),Y=a("AspN"),Z=a("XpKj"),ee=a("xVN5"),te=a("XOJV"),ae=a("G6rE");const ne=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},ie=Object($.createSelector)(((e,t)=>t.activeUser),ae.e.selectLoggedInUser,((e,t)=>e||t)),se=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},oe=ne((e=>e.inReplyToStatusId)),re=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,le=ne((e=>e.defaultText)),ce=ne((e=>e.quotedStatus)),de=({cardUrl:e,mediaIds:t,...a})=>a,ue=ne((e=>e.isSelfThreadReply)),he=ne((e=>e.hideUnsentTweetsButton)),pe=ne((e=>e.headingSubtitle)),me=ne((e=>e.headingTitle)),ge=ne((e=>!!e.previousTweetId)),be=ne((e=>e.editableUntil)),fe=ne((e=>e.selectedCommunityId)),_e=Object($.createSelector)((e=>ee.k(e,"")),((e,t)=>{const a=le(e,t);return Object(Q.a)(t.location)||a}),((e,t)=>t.quotedStatus?t.quotedStatus:ce(e,t)),Y.j,re,((e,t,a,n,i)=>e.map(((e,s)=>({...de(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===s?a:void 0,text:0===s&&t&&!i?t:e.text}))))),ye=Object($.createStructuredSelector)({activeUser:ie,composerData:_e,draftTweets:J.e,inReplyToStatus:(e,t)=>{const a=se(0,t)||oe(e,t);return a?te.a.selectHydrated(e,a):void 0},inReplyToStatusId:se,isEdit:ge,editableUntil:be,isIntentRoute:re,isSelfThreadReply:ue,isSending:e=>ee.m(e,""),scheduledTweets:Z.f,sendingProgress:ee.o,composeSemanticCoreId:ne((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:he,subtitle:pe,title:me,selectedCommunityIdFromLocationState:fe,shouldShowCommunityAudienceEducation:(e,t)=>Object(P.I)(e,P.e)}),ve={createDraftTweetApiErrorHandler:Object(K.createLocalApiErrorHandlerWithContextFactory)(J.d),createScheduledTweetApiErrorHandler:Object(K.createLocalApiErrorHandlerWithContextFactory)(Z.d),fetchScheduledTweets:Z.c,fetchDraftTweets:J.c,addCommunityAudienceEducationFlag:()=>Object(P.E)(P.e),updateAudienceControlsValue:ee.t};var we=Object(X.f)(ye,ve),Ce="tweetButton";const xe=f.a.b8f0483e,Ee=f.a.a133d13e,Te=f.a.a1183238,Se=f.a.da2663f6,Ie=f.a.j24c37b2,Re=f.a.ea41975c,De="compose",Pe={page:De},Me={page:De,section:"reply"},ke={context:"compose_intent_logged_in"},Oe={viewType:"send_tweet"};class Ae extends i.a.Component{constructor(...e){super(...e),this.state={isValid:!1,showEditTimer:!1},this._handleDismissCommunityAudienceEducation=()=>{this.props.addCommunityAudienceEducationFlag()},this._handleAppBarHeight=Object(_.a)((()=>{const e=l.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50})),this._handleBackClick=()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()},this._handleCloseComposer=()=>{this._appBarRef&&this._appBarRef.goBack()},this._handleSendTweet=()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()},this._setValidity=e=>{e!==this.state.isValid&&this.setState({isValid:e})},this._getScribeNamespace=()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?Me:Pe,this._getScribeData=()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?ke:o.a},this._renderAppBarRightControl=()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{activeUser:a,inReplyToStatus:n,isEdit:s,isSelfThreadReply:o,isSending:r}=this.props,l=!e||r||!a;return i.a.createElement(c.a,{style:Le.rightControlContainer},s?this._renderCountdownTimer():this._renderUnsentHeading(),t?null:i.a.createElement(d.a,{behavioralEventContext:Oe,disabled:l,onPress:this._handleSendTweet,size:"small",testID:Ce,type:"brandFilled"},Object(V.c)({inReplyToStatus:!!n,isSelfThreadReply:!!o,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread,isEdit:!!s})))},this._renderHeaderWithProgressBar=e=>{const{isModal:t}=this.context,{isSending:a,sendingProgress:n}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{progress:a?Math.max(n,.02):0,style:[Le.progressBar,t&&Le.progressBarModal]}),e)},this._renderUnsentHeading=()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:a}=this.props;if(!t&&(a.length>0||e.length>0))return i.a.createElement(c.a,null,i.a.createElement(d.a,{onPress:this._handleOpenUnsent,size:"small",testID:"unsentButton",type:"brandText"},Ee))},this._renderCountdownTimer=()=>{const{editableUntil:e}=this.props,t=new Date(parseInt(e,10));return this.state.showEditTimer?i.a.createElement(c.a,null,i.a.createElement(w,{editableUntil:t,timeElapsedCallback:()=>{this._composeContainerRef&&this._composeContainerRef.handleEditTimeLimitExceeded()}})):null},this._handleOpenUnsent=()=>{const{history:e}=this.props;Object(G.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")},this._setAppBarRef=e=>{this._appBarRef=e},this._handleComposeContainerRef=e=>{this._composeContainerRef=e}}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:a,editableUntil:n,fetchDraftTweets:i,fetchScheduledTweets:s,history:o,inReplyToStatus:r,isEdit:l,location:c,selectedCommunityIdFromLocationState:d,updateAudienceControlsValue:u}=this.props;if(this._unlockReload=U.a.acquire(),o.setModalRouteBreakpoint(o.location),e&&(s().catch(a()),i().catch(t())),d&&(u({_type:"community_members",communityIdValue:d,conversationControlsValue:"community_members"}),o.replace({pathname:c.pathname,state:Object(y.a)(c.state||{},"selectedCommunityId")})),null!=r&&r.exclusivity_info?u({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}):null!=r&&r.community_id_str?u({_type:"community_members",communityIdValue:r.community_id_str,conversationControlsValue:"community_members"}):null!=r&&r.trusted_friends_info&&u({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsValue:{trusted_friends_list_id:"1482057446797373440"}}),!this._countdownRef&&l&&n&&!this.state.showEditTimer){const e=new Date(parseInt(n,10)),t=()=>e-new Date<=3e5&&(this.setState({showEditTimer:!0}),this._countdownRef&&clearInterval(this._countdownRef),!0);t()||(this._countdownRef=setInterval((()=>t()),1e3))}}componentWillUnmount(){this._unlockReload(),this._countdownRef&&clearInterval(this._countdownRef)}render(){const{activeUser:e,composeHeader:t,composeSemanticCoreId:a,composerData:n,customizePropsForSingleComposerItem:s,history:o,isEdit:r,isIntentRoute:l,location:c,quotedStatus:d,richTextInputContext:u,subtitle:m,title:g,typeaheadWrapper:b}=this.props,f=l&&!e,{isModal:_}=this.context;return i.a.createElement(W.c,{data:this._getScribeData(),namespace:this._getScribeNamespace()},i.a.createElement(h.a,null,(({windowWidth:l})=>{const h=H.a.shouldRenderAsModal(l),y=(f||this.showCommunityAudienceEducation)&&h,v=(null==n?void 0:n.length)>1;return i.a.createElement(i.a.Fragment,null,this.showCommunityAudienceEducation?i.a.createElement(p.a,{actionLabel:Ie,graphicDisplayMode:"none",headline:Te,onAction:this._handleDismissCommunityAudienceEducation,onClose:this._handleDismissCommunityAudienceEducation,subtext:Se,withCloseButton:!1}):null,f&&i.a.createElement(E.a,{history:o,location:c}),!y&&i.a.createElement(i.a.Fragment,null,i.a.createElement(x.b,{appBarRef:this._setAppBarRef,behavioralEventViewType:De,documentTitle:xe,hideBackButton:!1,history:o,onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:m,title:r?Re:g},i.a.createElement(z.a,{activeUser:e,composeHeader:t,composeSemanticCoreId:a,customizePropsForSingleComposerItem:s,history:o,isModal:_,location:c,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,quotedStatus:d,richTextInputContext:u,setValidity:this._setValidity,typeaheadWrapper:b,windowWidth:l})),v?i.a.createElement(j,null):null))})))}get showCommunityAudienceEducation(){const{inReplyToStatus:e,selectedCommunityIdFromLocationState:t,shouldShowCommunityAudienceEducation:a}=this.props,n=!!(null!=e&&e.community_id_str||t);return a&&n}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&!!e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(q.h)(e[0].scheduledFor)}}Ae.contextType=m.b;const Le=g.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},rightControlContainer:{"flex-direction":"row"}})));t.default=we(Ae)},piX5:function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({border:{borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.small,borderColor:e.colors.gray200},focusedBorderValid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.primary}`,borderColor:e.colors.primary},focusedBorderInvalid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.red500}`},invalidBorderColor:{borderColor:e.colors.red500},invalidColor:{color:e.colors.red500},validColor:{color:e.colors.primary},disabled:{cursor:"default",opacity:.5,backgroundColor:e.colors.gray50,borderColor:e.colors.gray50}})));t.a=n},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("kYxP");var n=a("qqsb"),i=a.n(n),s=a("3A2y");const o=i.a.b2e94283,r=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[n,i,s,l,c,d]=r.map((e=>t[e]||a[e])),u=[n,i&&`@${i.toString()}`,s,l,c&&c.toString().split(",").map((e=>`#${e}`)).join(" "),d&&o({viaScreenName:d})].filter(Boolean).join(" ");return u?`${u} `:void 0};const l=e=>Object(s.a)(e,r)},qeCs:function(e,t,a){var n=a("vxC8")(a("IBsm"),"Map");e.exports=n},qjF7:function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},rFBM:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("MWbm"),r=a("rHpw");const l=e=>Object(s.a)("div",e);class c extends i.a.Component{constructor(...e){super(...e),this._dragEnterCount=0,this.state={active:!1},this._handleDragDrop=e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)},this._handleDragEnter=e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)},this._handleDragLeave=e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)},this._handleDragOver=e=>{e.preventDefault()}}render(){const{allowDragDrop:e,children:t,style:a}=this.props,{active:n}=this.state,s=e?d.dragBorderValid:d.dragBorderInvalid;return i.a.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[d.root,a,n&&s]},i.a.createElement(o.a,{style:d.inner},"function"==typeof t?t(n):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}c.defaultProps={allowDragDrop:!0};const d=r.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.magenta500},inner:{flexGrow:1}})));t.a=c},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n="send-tweet",i="dismiss-composer"},"sCL+":function(e,t){e.exports=function(e,t,a){for(var n=-1,i=null==e?0:e.length;++n<i;)if(a(t,e[n]))return!0;return!1}},sCk0:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("zfvc"),o=a("zrc3");const r=Object.freeze({in:"in",out:"out",static:"static"});class l extends i.a.Component{constructor(...e){super(...e),this.state={isAnimating:!1,renderChildren:i.a.Children.toArray(this.props.children).map((e=>({status:r.static,child:e})))},this._handleEachAnimateComplete=()=>{const{isAnimating:e}=this.state,{children:t,onAnimateComplete:a}=this.props;e&&(a&&a(),this.setState({renderChildren:i.a.Children.toArray(t).map((e=>({status:r.static,child:e}))),isAnimating:!1}))}}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,n=0;const i=[];for(;n<e.length;){if(a>=t.length){i.push(...e.slice(n).map((e=>({child:e,status:r.out}))));break}const s=t[a],l=e[n];if(s.key===l.key)i.push({child:s,status:r.static}),a+=1;else{const e=Object(o.a)(t,(e=>e.key===l.key));e>=0?(i.push(...t.slice(a,e).map((e=>({child:e,status:r.in}))),{child:t[e],status:r.static}),a=e+1):i.push({child:l,status:r.out})}n+=1}return a<t.length&&i.push(...t.slice(a).map((e=>({child:e,status:r.in})))),i})(t.renderChildren.map((e=>e.child)),i.a.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every((e=>e.status===r.static))}}render(){const{renderChildren:e}=this.state;return e.map((({child:e,status:t})=>i.a.createElement(s.a,{animateMount:t!==r.static,key:e.key,onAnimateComplete:this._handleEachAnimateComplete,show:t!==r.out},e)))}}t.a=l},t0L4:function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},tLQN:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},tQYX:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},tuke:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("k/Ka"),o=a("Lsrn");const r=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));r.metadata={width:24,height:24},t.a=r},ude7:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("hJBK"),i=a("A0bJ"),s=a("1auM");const o=1,r=2,l=3,c=e=>{if(Object(s.b)(e)){if(e.isGif){const{height:t,img:a,orientation:s,width:o}=e;return Object(n.b)(a,o,t,s).then((e=>Object(n.a)(e)),(e=>{throw new i.a("Gif preview could not be generated",l)}))}{const e=new i.a("The provided image must be a gif",r);return Promise.reject(e)}}{const e=new i.a("The provided file is not a valid image",o);return Promise.reject(e)}}},vxC8:function(e,t,a){var n=a("5nKN"),i=a("4p/L");e.exports=function(e,t){var a=i(e,t);return n(a)?a:void 0}},w3n3:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("/yvb"),o=a("qqsb"),r=a.n(o),l=a("3rWK"),c=a("Irs7");const d=r.a.a4993fa2,u=i.a.createElement(l.a,null),h=r.a.i0db46e6,p={viewType:"gif_search"};t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:a,history:n,onPress:o,style:r,testID:l})=>{const m=Object(c.b)(),g=i.a.useCallback((()=>{o&&o(),m.scribe({element:"found_media_button",action:"click"}),n.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:a,dmConversationId:e}})}),[e,m,a,n,o]);return i.a.createElement(s.a,{accessibilityLabel:d,behavioralEventContext:p,disabled:!t,hoverLabel:{label:h},icon:u,onPress:g,size:"medium",style:r,testID:l,type:"brandText"})}},wpu3:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m}));a("kYxP"),a("qd3W");var n=a("VAyw"),i=a("/Ikv"),s=a("1auM"),o=a("s1N3"),r=a("lnti"),l=a("kIAd"),c=a("oEoC");const d=({excludeReplyUser:e,inReplyToStatus:t,loggedInUserId:a})=>{const{retweeted_status:i}=t,{entities:s,unmentioned_user_ids:l,user:c}=i||t,d=i?i.user:{},h=i?t.user:{},p=(null==s?void 0:s.user_mentions)||[],m=n.a.mergeTaggedUsers((null==s?void 0:s.media)||[]),g=u(i||t)||{},b={[d.id_str]:d,[h.id_str]:h,[c.id_str]:c,[g.id_str]:g};p.forEach((e=>{b[e.id_str]=e})),m.forEach((({name:e,screen_name:t,user_id:a})=>{b[a]={id_str:a,name:e,screen_name:t}}));const f=e=>{const t=null==l?void 0:l.includes(e.id_str),a=e.id_str===c.id_str;return!t||a?[e.id_str]:[]},_=Object(o.a)(Object(r.a)([...f(d),...f(h),c.id_str,...p.flatMap((e=>f(e))),...m.map((e=>e.user_id))])).filter((e=>e!==a));let y=a&&c.id_str===a?[a,..._]:_;return e&&(y=y.filter((e=>e!==c.id_str))),y.map((e=>b[e]))},u=({card:e})=>{let t=null;if(e){const a=i.a.getBindingValue(e.binding_values,"site");a&&e.users&&(t=e.users[a.id_str])}return t},h=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const a=t.some((e=>!!e.externalMediaDetails)),n=!a&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),i=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof s.a)&&e.mediaFile.isVideo));if(n||a||i)return 1===t.length;{const a=t.length<=e,n=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return a&&n}},p=h({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const a=e.split(l.b.WordBoundary);return t&&a.pop(),!!a.find((e=>{const t=Object(c.e)(e,"compose");return t&&"users"===t.result_type}))}},x8Sc:function(e,t,a){"use strict";a.r(t),a.d(t,"InlineComposeContainer",(function(){return d}));var n=a("ERkP"),i=a.n(n),s=a("MWbm"),o=a("7N4s"),r=a("cHvH"),l=a("rHpw"),c=a("h5NW");const d=({history:e,location:t,parentTweetId:a,replyPressToggle:n,richTextInputContext:l,typeaheadWrapper:d})=>{const{isModal:h}=i.a.useContext(o.b);return i.a.createElement(r.a,null,(({windowWidth:o})=>i.a.createElement(s.a,{style:u.root},i.a.createElement(c.a,{history:e,isInline:!0,isModal:h,location:t,parentTweetId:a,replyPressToggle:n,richTextInputContext:l,typeaheadWrapper:d,windowWidth:o}))))},u=l.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}})));t.default=d},yTN1:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("+/1j"),o=a("MWbm"),r=a("qqsb"),l=a.n(r),c=a("WOwf"),d=a("k6Ei"),u=a("rHpw");const h=l.a.c2fc878d,p=l.a.db11b27f,m=e=>e,g=u.a.create((({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:"0.8",minWidth:16,textAlign:"center"},gray700:{color:e.gray700},red500:{color:e.red500}})));t.a=e=>{const{count:t,maxCount:a,formatNumber:n=m,warningCount:r}=e,l=a-t,b=l>=0?p({count:n(l)}):h({count:n(t-a)}),f=t>=r?i.a.createElement(s.a,{accessibilityAtomic:!0,accessibilityLiveRegion:"polite",style:u.a.visuallyHidden},b):null,_=Object(c.a)(l,a),y=t>=a?"red500":t>=r?"yellow500":"primary",v=i.a.createElement(d.a,{color:y,progress:_,size:t>=r?30:20,style:[g.progressCircle,l<=-10&&g.hide]}),w=t>=r?i.a.createElement(s.a,{style:[g.text,l>0?g.gray700:g.red500]},n(l)):null;return i.a.createElement(o.a,{style:[g.root,g.center]},f,v,i.a.createElement(o.a,{style:[u.a.absoluteFill,g.center]},w))}},yZqq:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),o=a.n(s),r=a("OiMc"),l=a("efqG"),c=a("MWbm"),d=a("t62R"),u=a("CKsB"),h=a("/yvb"),p=a("rHpw"),m=a("qqsb"),g=a.n(m),b=a("Zg3A"),f=a("k/Ka"),_=a("Lsrn");const y=(e={})=>Object(f.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},o.a.createElement("g",null,o.a.createElement("path",{d:"M10.43 12.24c-1.37 0-2.89-.15-3.87-1.26-.82-.95-1.09-2.39-.81-4.43C6.13 3.7 7.88 2 10.43 2s4.3 1.7 4.68 4.55c.27 2.04.01 3.49-.81 4.42-.98 1.12-2.51 1.27-3.87 1.27zm0-8.73c-2.39 0-3.03 2.03-3.19 3.24-.21 1.56-.06 2.65.45 3.23.46.53 1.28.75 2.73.75 1.46 0 2.28-.22 2.74-.75.51-.58.66-1.67.45-3.23-.16-1.21-.79-3.24-3.18-3.24zm2.01 18.99H4.22c-.7 0-1.33-.3-1.75-.83-.43-.54-.57-1.26-.4-1.95.88-3.55 4.31-6.03 8.34-6.03.42 0 .75.34.75.75 0 .42-.34.75-.75.75-3.34 0-6.17 2.01-6.88 4.89-.06.25-.02.49.12.66.13.16.32.25.56.25h8.22c.42 0 .75.34.75.75.01.42-.32.76-.74.76zm9.15-10.87l-4.2 8.46c-.01.03-.02.05-.04.07-.02.06-.06.11-.1.15-.05.05-.1.09-.15.13h-.01c-.06.04-.12.06-.19.08-.07.02-.13.03-.2.03-.05 0-.11 0-.17-.02-.06-.01-.11-.03-.16-.06-.06-.03-.12-.07-.18-.12-.01-.01-.03-.02-.04-.03l-3.08-3.27c-.28-.3-.27-.78.04-1.06.3-.29.77-.27 1.06.03l2.34 2.48 3.74-7.53c.18-.37.63-.52 1-.34.37.17.52.63.34 1z"}),o.a.createElement("path",{d:"M17.1 20.44c.05-.04.1-.08.15-.13 0 .01-.02.03-.03.04-.04.04-.08.06-.12.09z"})));y.metadata={width:24,height:24};var v=y,w=a("boUI"),C=a("EweD"),x=a("H7Rt");const E=g.a.g6185a9e,T=g.a.g2d04222,S=g.a.baffe39a,I=g.a.af293dc2,R=g.a.h1053f7e,D=g.a.bf994ab2,P=g.a.cf7f7e3a,M=g.a.cfd2f35e,k=p.a.create((e=>({root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.space64},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,marginBottom:e.spaces.space12},menuRow:{flexDirection:"row",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));var O=e=>{var t,a;const{dismiss:n,isModal:i,midConversationTweet:s,value:r}=e,l=t=>()=>{e.onChange(t),e.dismiss()},p=!!s,m=p&&!(null!=s&&null!=(t=s.entities)&&null!=(a=t.user_mentions)&&a.some((e=>e.id_str!==s.user.id_str)));let g=R;return m?g=D:p&&(g=P),o.a.createElement(c.a,{accessibilityDescribedBy:"conversation-controls-details",accessibilityLabelledBy:"conversation-controls-title",accessibilityRole:"dialog",style:[k.root,i?k.modal:k.popover]},o.a.createElement(c.a,{style:k.title},o.a.createElement(d.b,{nativeID:"conversation-controls-title",weight:"bold"},E),o.a.createElement(d.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body"},T)),o.a.createElement(c.a,null,o.a.createElement(u.a,{Icon:b.a,actionText:S,isSelected:x.a.all===r,onClick:l(x.a.all),selectable:!0,style:k.menuRow,withIconAsThumbnail:!0}),o.a.createElement(u.a,{Icon:v,actionText:I,isSelected:x.a.community===r,onClick:l(x.a.community),selectable:!0,style:k.menuRow,withIconAsThumbnail:!0}),o.a.createElement(u.a,{Icon:m?w.a:C.a,actionText:g,isSelected:x.a.by_invitation===r,onClick:l(x.a.by_invitation),selectable:!0,style:k.menuRow,withIconAsThumbnail:!0}),e.isModal?o.a.createElement(h.a,{key:"button_cancel",onPress:n,size:"large",style:k.cancelButton,type:"primaryOutlined"},M):null))};t.a=e=>{const{children:t,controlled:a=!1,disabled:n}=e,[s,c]=o.a.useState(!1),d=o.a.useCallback((()=>c(!0)),[]),u=o.a.useCallback((()=>c(!1)),[]),h=a?s?r.a.VISIBILITY_BEHAVIOR.forceVisible:r.a.VISIBILITY_BEHAVIOR.forceHidden:void 0,p="function"==typeof t?t({openPopover:d,closePopover:u}):t;return o.a.createElement(l.a,{disabled:n,onDismiss:u,renderContent:(t,a)=>{const{children:n,controlled:s,...r}=e;return o.a.createElement(O,i()({},r,{dismiss:t,isModal:"sheet"===a}))},visibilityBehavior:h},p)}},z9Jh:function(e,t){e.exports=function(e){return e!=e}},zWgn:function(e,t){e.exports=function(e){return e}},zaNA:function(e,t){e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},zmS9:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("t62R"),o=a("rHpw"),r=a("qqsb"),l=a.n(r),c=a("J0mu"),d=a("QbaN");const u=l.a.bfb895b1,h=o.a.create((e=>({icon:{fontSize:e.fontSizes.body,paddingRight:e.spaces.space12,textAlignVertical:"middle"}})));t.a=({onPress:e,scheduledFor:t,testID:a})=>{const n=Object(d.c)(t),o=!!n&&(Object(d.h)(t)&&!Object(d.g)(n)&&!Object(d.f)(n)),r=Boolean(e);return n&&o?i.a.createElement(s.b,{color:"gray700",onPress:e,size:"subtext2",testID:a,withInteractiveStyling:r},i.a.createElement(c.a,{style:h.icon}),u({date:Object(d.b)(n),time:Object(d.i)(n)})):null}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.6d327d48.js.map