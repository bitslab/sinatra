(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{fyKl:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return R}));var n=i("97Jx"),o=i.n(n),a=i("ERkP"),r=i.n(a),s=i("i4Oy"),c=i("shC7"),l=i("MWbm"),d=i("VY6S"),h=i("zfvc"),p=i("jHwr"),m=i("w9LO"),u=i("//dC"),f=i("lHOd"),w=i("Oe3h"),_=i("0FVZ"),b=i("7N4s"),g=i("cHvH"),v=i("rHpw");const y=v.a.create((e=>({rootNarrow:{maxWidth:"75%"},rootWide:{maxWidth:`calc(${e.spaces.space64} * 6)`},anchor:v.a.absoluteFillObject,mask:{...v.a.absoluteFillObject,position:"fixed"},bodyRectHelper:{...v.a.absoluteFillObject,bottom:void 0},content:{borderRadius:e.borderRadii.small,position:"absolute",overflow:"hidden",backgroundColor:e.colors.navigationBackground,boxShadow:e.boxShadows.medium},contentInitialRender:{position:"fixed",opacity:0},contentFixed:{position:"fixed",overflowY:"auto",overscrollBehavior:"contain"}})));class R extends r.a.Component{constructor(e,t){super(e,t),this._handleAnimateComplete=()=>{const{onAnimateComplete:e}=this.props;e&&e()},this._handleEsc=e=>{const{onDismiss:t}=this.props,{altKey:i,ctrlKey:n,key:o,metaKey:a}=e;!(i||n||a)&&"Escape"===o&&t()},this._receiveBodyRectHelperRef=e=>{e&&this._bodyRectHelperNode!==e&&(this._bodyRectHelperNode=e,this._scheduleUpdate())},this._receiveAnchorRef=e=>{e&&this._anchorNode!==e&&(this._anchorNode=e,this._scheduleUpdate())},this._receiveContentRef=e=>{e&&this._contentNode!==e&&(this._contentNode=e,this._scheduleUpdate())},this._updatePosition=()=>{if(!(this._mounted&&(this._anchorNode||this.props.position)&&this._contentNode&&this._contentNode instanceof window.HTMLElement&&this._bodyRectHelperNode&&this._bodyRectHelperNode instanceof window.HTMLElement))return;const e=this._contentNode.scrollHeight,t=this._contentNode.scrollWidth,{left:i,top:n,width:o}=this._bodyRectHelperNode.getBoundingClientRect(),{height:a,width:r}=s.a.get("window");let l={left:0,top:0,height:0,width:0};this.props.position?l={...l,...this.props.position}:this._anchorNode&&this._anchorNode instanceof window.HTMLElement&&(l=this._anchorNode.getBoundingClientRect());const{height:d,left:h,top:p,width:m}=l,u=r-o,f=h-i,w=p-n,_=h+m>=t,b=p+d>=e,g=r-h>=t,v=a-p>=e,y=this.props.preferredVerticalOrientation,R=(e=>c.a.getConstants().isRTL?"left"===e?"right":"left":e)(this.props.preferredHorizontalOrientation),O=this.state.verticalOrientation||(({canOrientDown:e,canOrientUp:t,verticalPreference:i})=>t&&e||!t&&!e?i:t?"up":"down")({verticalPreference:y,canOrientUp:b,canOrientDown:v}),E=this.state.horizontalOrientation||(({canOrientLeft:e,canOrientRight:t,horizontalPreference:i})=>!e||"left"!==i&&t?"right":"left")({horizontalPreference:R,canOrientLeft:_,canOrientRight:g}),N=this.props.isFixed?h:f,H=this.props.isFixed?p:w,C="up"===O?H+d-e:H,x="left"===E?r-N-m-u:r-N-t-u;this.setState({top:Math.max(C,0),right:x,verticalOrientation:O,horizontalOrientation:E})},this.state=Object.freeze({}),this._scheduleUpdate=Object(p.a)(this._updatePosition,window.requestAnimationFrame),this._scheduleDebouncedUpdate=Object(d.a)(this._scheduleUpdate,250)}componentDidMount(){this._mounted=!0,s.a.addEventListener("change",this._scheduleDebouncedUpdate)}componentWillUnmount(){this._mounted=!1,s.a.removeEventListener("change",this._scheduleDebouncedUpdate)}render(){const{animateInDuration:e,animateType:t,children:i,isFixed:n,onDismiss:a,preventFocusShift:s,withKeyboardNavigation:d}=this.props,{right:p,top:R,verticalOrientation:O}=this.state,E=void 0===R,N=`calc(100vh - ${R||0}px)`,H=[y.content,E&&y.contentInitialRender,n&&[y.contentFixed,{maxHeight:N}],{top:R,right:c.a.getConstants().isRTL?void 0:p,left:c.a.getConstants().isRTL?p:void 0}],C=r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{onClick:a,style:y.mask}),r.a.createElement(l.a,{ref:this._receiveBodyRectHelperRef,style:y.bodyRectHelper}),r.a.createElement(g.a,null,(({windowWidth:n})=>r.a.createElement(l.a,{accessibilityRole:"menu",onKeyUp:this._handleEsc,ref:this._receiveContentRef,style:[n<v.a.theme.breakpoints.medium?y.rootNarrow:y.rootWide,H]},E&&"slide"===t?i:r.a.createElement(h.a,{animateMount:"up"!==O,duration:e,onAnimateComplete:this._handleAnimateComplete,show:!0,type:t},(({isAnimating:e})=>r.a.createElement(w.a,{id:"Dropdown",minimizeReporting:e},((e,t)=>r.a.createElement(l.a,o()({ref:e()},t({})),i)))))))));return r.a.createElement(l.a,{ref:this._receiveAnchorRef,style:y.anchor},r.a.createElement(_.a.Dropdown,null,r.a.createElement(f.a.Consumer,null,(e=>r.a.createElement(b.b.Consumer,null,(({isModal:t})=>r.a.createElement(u.a,{history:e,isModal:t,onDismiss:a},s?C:r.a.createElement(m.a,{withKeyboardNavigation:d},C))))))))}}R.defaultProps={preferredHorizontalOrientation:"left",preferredVerticalOrientation:"down",animateType:"slide",animateInDuration:"normal",withKeyboardNavigation:!0}},jHwr:function(e,t,i){"use strict";t.a=(e,t)=>{let i=null;const n=()=>{i=null,e()};return()=>(i||(i=t(n)),i)}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.Dropdown.db432c28.js.map